=== Comprehensive Build Test ===

 NX   Running target build for 11 projects:

- clippyjs-nextjs-starter
- clippyjs-vite-starter
- clippyjs-demo-vanilla
- clippyjs-demo-react
- @clippyjs/ai-anthropic
- clippyjs-lib
- @clippyjs/ai-openai
- @clippyjs/storybook
- @clippyjs/react
- @clippyjs/types
- @clippyjs/ai



> nx run @clippyjs/types:build  [existing outputs match the cache, left as is]

Compiling TypeScript files for project "@clippyjs/types"...
Done compiling TypeScript files for project "@clippyjs/types".

> nx run @clippyjs/ai:build  [existing outputs match the cache, left as is]

> yarn workspace @clippyjs/ai build

[36m
[1msrc/index.ts[22m ‚Üí [1mdist/index.js, dist/index.esm.js[22m...[39m
[1m[33m(!) [plugin typescript] src/errors/RetryPolicy.ts (160:13): @rollup/plugin-typescript TS2554: Expected 0-1 arguments, but got 2.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/errors/RetryPolicy.ts:160:13[22m
[90m
[7m160[0m             { cause: lastError }
[7m   [0m [91m            ~~~~~~~~~~~~~~~~~~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/modes/PrebuiltModes.ts (63:3): @rollup/plugin-typescript TS2322: Type '"idle"' is not assignable to type 'ProactiveTriggerReason'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/modes/PrebuiltModes.ts:63:3[22m
[90m
[7m63[0m   reason: 'idle',
[7m  [0m [91m  ~~~~~~[0m

  [96msrc/modes/PrebuiltModes.ts[0m:[93m30[0m:[93m3[0m
    [7m30[0m   reason: ProactiveTriggerReason;
    [7m  [0m [96m  ~~~~~~[0m
    The expected type comes from property 'reason' which is declared here on type 'TriggerStrategy'
[39m
[1m[33m(!) [plugin typescript] src/react/HistoryManager.tsx (36:26): @rollup/plugin-typescript TS2503: Cannot find namespace 'JSX'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/HistoryManager.tsx:36:26[22m
[90m
[7m36[0m }: HistoryManagerProps): JSX.Element {
[7m  [0m [91m                         ~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/HistoryManager.tsx (136:14): @rollup/plugin-typescript TS2322: Type '{ children: string; jsx: true; }' is not assignable to type 'DetailedHTMLProps<StyleHTMLAttributes<HTMLStyleElement>, HTMLStyleElement>'.
  Property 'jsx' does not exist on type 'DetailedHTMLProps<StyleHTMLAttributes<HTMLStyleElement>, HTMLStyleElement>'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/HistoryManager.tsx:136:14[22m
[90m
[7m136[0m       <style jsx>{`
[7m   [0m [91m             ~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/ProviderSelector.tsx (69:28): @rollup/plugin-typescript TS2503: Cannot find namespace 'JSX'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/ProviderSelector.tsx:69:28[22m
[90m
[7m69[0m }: ProviderSelectorProps): JSX.Element {
[7m  [0m [91m                           ~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/useHistoryManager.ts (46:32): @rollup/plugin-typescript TS2339: Property 'config' does not exist on type 'AIClippyContextValue'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/useHistoryManager.ts:46:32[22m
[90m
[7m46[0m   const { conversationManager, config } = useAIClippy();
[7m  [0m [91m                               ~~~~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/useHistoryManager.ts (57:45): @rollup/plugin-typescript TS2341: Property 'agentName' is private and only accessible within class 'ConversationManager'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/useHistoryManager.ts:57:45[22m
[90m
[7m57[0m       const agentName = conversationManager.agentName as AgentName;
[7m  [0m [91m                                            ~~~~~~~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/useHistoryManager.ts (66:48): @rollup/plugin-typescript TS2341: Property 'agentName' is private and only accessible within class 'ConversationManager'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/useHistoryManager.ts:66:48[22m
[90m
[7m66[0m   }, [config.historyStore, conversationManager.agentName]);
[7m  [0m [91m                                               ~~~~~~~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/useHistoryManager.ts (74:45): @rollup/plugin-typescript TS2341: Property 'agentName' is private and only accessible within class 'ConversationManager'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/useHistoryManager.ts:74:45[22m
[90m
[7m74[0m       const agentName = conversationManager.agentName as AgentName;
[7m  [0m [91m                                            ~~~~~~~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/VisuallyHidden.tsx (35:26): @rollup/plugin-typescript TS2503: Cannot find namespace 'JSX'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/VisuallyHidden.tsx:35:26[22m
[90m
[7m35[0m }: VisuallyHiddenProps): JSX.Element {
[7m  [0m [91m                         ~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/VisuallyHidden.tsx (86:36): @rollup/plugin-typescript TS2503: Cannot find namespace 'JSX'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/VisuallyHidden.tsx:86:36[22m
[90m
[7m86[0m }: ScreenReaderAnnouncementProps): JSX.Element | null {
[7m  [0m [91m                                   ~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/testing/MockScenarios.ts (292:11): @rollup/plugin-typescript TS2322: Type '(messages: Message[], options?: ChatOptions) => Promise<Message>' is not assignable to type '(messages: Message[], options?: ChatOptions) => AsyncIterableIterator<StreamChunk>'.
  Type 'Promise<Message>' is missing the following properties from type 'AsyncIterableIterator<StreamChunk>': [Symbol.asyncIterator], next[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/testing/MockScenarios.ts:292:11[22m
[90m
[7m292[0m     async chat(messages: Message[], options?: ChatOptions): Promise<Message> {
[7m   [0m [91m          ~~~~[0m

  [96msrc/providers/AIProvider.ts[0m:[93m180[0m:[93m12[0m
    [7m180[0m   abstract chat(
    [7m   [0m [96m           ~~~~[0m
    The expected type comes from property 'chat' which is declared here on type 'AIProvider'
[39m
[1m[33m(!) [plugin typescript] src/testing/TestUtilities.ts (113:11): @rollup/plugin-typescript TS2322: Type '(messages: Message[], options?: ChatOptions) => Promise<Message>' is not assignable to type '(messages: Message[], options?: ChatOptions) => AsyncIterableIterator<StreamChunk>'.
  Type 'Promise<Message>' is missing the following properties from type 'AsyncIterableIterator<StreamChunk>': [Symbol.asyncIterator], next[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/testing/TestUtilities.ts:113:11[22m
[90m
[7m113[0m     async chat(messages: Message[], options?: ChatOptions): Promise<Message> {
[7m   [0m [91m          ~~~~[0m

  [96msrc/providers/AIProvider.ts[0m:[93m180[0m:[93m12[0m
    [7m180[0m   abstract chat(
    [7m   [0m [96m           ~~~~[0m
    The expected type comes from property 'chat' which is declared here on type 'AIProvider'
[39m
[1m[33m(!) [plugin typescript] src/testing/TestUtilities.ts (370:9): @rollup/plugin-typescript TS2322: Type 'ToolUseBlock' is not assignable to type 'string | ContentBlock'.
  Property 'type' is missing in type 'ToolUseBlock' but required in type 'ToolUseContentBlock'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/testing/TestUtilities.ts:370:9[22m
[90m
[7m370[0m         {
[7m   [0m [91m        ~[0m
[7m371[0m           type: 'tool_use',
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m...[0m 
[7m374[0m           input: { operation: 'add', a: 5, b: 3 },
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m375[0m         } as ToolUseBlock,
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~[0m

  [96msrc/providers/AIProvider.ts[0m:[93m66[0m:[93m3[0m
    [7m66[0m   type: 'tool_use';
    [7m  [0m [96m  ~~~~[0m
    'type' is declared here.
[39m
[32mcreated [1mdist/index.js, dist/index.esm.js[22m in [1m1.8s[22m[39m

> nx run clippyjs-lib:build  [existing outputs match the cache, left as is]

> echo 'Build configured in package.json'

Build configured in package.json

> nx run @clippyjs/ai-anthropic:build  [existing outputs match the cache, left as is]

> yarn workspace @clippyjs/ai-anthropic build

[36m
[1msrc/index.ts[22m ‚Üí [1mdist/index.js, dist/index.esm.js[22m...[39m
[1m[33m(!) [plugin typescript] @rollup/plugin-typescript TS6306: Referenced project '/Users/ericfriday/dev/clippyjs/packages/ai' must have setting "composite": true.[39m[22m
[32mcreated [1mdist/index.js, dist/index.esm.js[22m in [1m756ms[22m[39m

> nx run @clippyjs/ai-openai:build  [existing outputs match the cache, left as is]

> yarn workspace @clippyjs/ai-openai build

[36m
[1msrc/index.ts[22m ‚Üí [1mdist/index.js, dist/index.esm.js[22m...[39m
[1m[33m(!) [plugin typescript] @rollup/plugin-typescript TS6306: Referenced project '/Users/ericfriday/dev/clippyjs/packages/ai' must have setting "composite": true.[39m[22m
[32mcreated [1mdist/index.js, dist/index.esm.js[22m in [1m958ms[22m[39m

> nx run clippyjs-demo-vanilla:build  [existing outputs match the cache, left as is]

> echo 'Build configured in package.json'

Build configured in package.json

> nx run @clippyjs/react:build

> yarn workspace @clippyjs/react build

src/Agent.ts(8,64): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/Animator.ts(5,71): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/index.ts(26,20): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/loader.ts(6,50): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/useAgent.ts(7,65): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
> yarn workspace @clippyjs/react build

src/Agent.ts(8,64): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/Animator.ts(5,71): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/index.ts(26,20): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/loader.ts(6,50): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/useAgent.ts(7,65): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
Warning: command "yarn workspace @clippyjs/react build" exited with non-zero status code


 NX   Running target build for 11 projects failed

Tasks not run because their dependencies failed or --nx-bail=true:

- clippyjs-nextjs-starter:build
- clippyjs-vite-starter:build
- clippyjs-demo-react:build
- @clippyjs/storybook:build

Failed tasks:

- @clippyjs/react:build

-e 
=== Comprehensive Typecheck Test ===

 NX   Running target typecheck for 5 projects and 2 tasks they depend on:

- @clippyjs/ai-anthropic
- @clippyjs/ai-openai
- @clippyjs/react
- @clippyjs/types
- @clippyjs/ai



> nx run @clippyjs/types:build  [existing outputs match the cache, left as is]

Compiling TypeScript files for project "@clippyjs/types"...
Done compiling TypeScript files for project "@clippyjs/types".

> nx run @clippyjs/ai:build  [existing outputs match the cache, left as is]

> yarn workspace @clippyjs/ai build

[36m
[1msrc/index.ts[22m ‚Üí [1mdist/index.js, dist/index.esm.js[22m...[39m
[1m[33m(!) [plugin typescript] src/errors/RetryPolicy.ts (160:13): @rollup/plugin-typescript TS2554: Expected 0-1 arguments, but got 2.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/errors/RetryPolicy.ts:160:13[22m
[90m
[7m160[0m             { cause: lastError }
[7m   [0m [91m            ~~~~~~~~~~~~~~~~~~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/modes/PrebuiltModes.ts (63:3): @rollup/plugin-typescript TS2322: Type '"idle"' is not assignable to type 'ProactiveTriggerReason'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/modes/PrebuiltModes.ts:63:3[22m
[90m
[7m63[0m   reason: 'idle',
[7m  [0m [91m  ~~~~~~[0m

  [96msrc/modes/PrebuiltModes.ts[0m:[93m30[0m:[93m3[0m
    [7m30[0m   reason: ProactiveTriggerReason;
    [7m  [0m [96m  ~~~~~~[0m
    The expected type comes from property 'reason' which is declared here on type 'TriggerStrategy'
[39m
[1m[33m(!) [plugin typescript] src/react/HistoryManager.tsx (36:26): @rollup/plugin-typescript TS2503: Cannot find namespace 'JSX'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/HistoryManager.tsx:36:26[22m
[90m
[7m36[0m }: HistoryManagerProps): JSX.Element {
[7m  [0m [91m                         ~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/HistoryManager.tsx (136:14): @rollup/plugin-typescript TS2322: Type '{ children: string; jsx: true; }' is not assignable to type 'DetailedHTMLProps<StyleHTMLAttributes<HTMLStyleElement>, HTMLStyleElement>'.
  Property 'jsx' does not exist on type 'DetailedHTMLProps<StyleHTMLAttributes<HTMLStyleElement>, HTMLStyleElement>'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/HistoryManager.tsx:136:14[22m
[90m
[7m136[0m       <style jsx>{`
[7m   [0m [91m             ~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/ProviderSelector.tsx (69:28): @rollup/plugin-typescript TS2503: Cannot find namespace 'JSX'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/ProviderSelector.tsx:69:28[22m
[90m
[7m69[0m }: ProviderSelectorProps): JSX.Element {
[7m  [0m [91m                           ~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/useHistoryManager.ts (46:32): @rollup/plugin-typescript TS2339: Property 'config' does not exist on type 'AIClippyContextValue'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/useHistoryManager.ts:46:32[22m
[90m
[7m46[0m   const { conversationManager, config } = useAIClippy();
[7m  [0m [91m                               ~~~~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/useHistoryManager.ts (57:45): @rollup/plugin-typescript TS2341: Property 'agentName' is private and only accessible within class 'ConversationManager'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/useHistoryManager.ts:57:45[22m
[90m
[7m57[0m       const agentName = conversationManager.agentName as AgentName;
[7m  [0m [91m                                            ~~~~~~~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/useHistoryManager.ts (66:48): @rollup/plugin-typescript TS2341: Property 'agentName' is private and only accessible within class 'ConversationManager'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/useHistoryManager.ts:66:48[22m
[90m
[7m66[0m   }, [config.historyStore, conversationManager.agentName]);
[7m  [0m [91m                                               ~~~~~~~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/useHistoryManager.ts (74:45): @rollup/plugin-typescript TS2341: Property 'agentName' is private and only accessible within class 'ConversationManager'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/useHistoryManager.ts:74:45[22m
[90m
[7m74[0m       const agentName = conversationManager.agentName as AgentName;
[7m  [0m [91m                                            ~~~~~~~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/VisuallyHidden.tsx (35:26): @rollup/plugin-typescript TS2503: Cannot find namespace 'JSX'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/VisuallyHidden.tsx:35:26[22m
[90m
[7m35[0m }: VisuallyHiddenProps): JSX.Element {
[7m  [0m [91m                         ~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/VisuallyHidden.tsx (86:36): @rollup/plugin-typescript TS2503: Cannot find namespace 'JSX'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/VisuallyHidden.tsx:86:36[22m
[90m
[7m86[0m }: ScreenReaderAnnouncementProps): JSX.Element | null {
[7m  [0m [91m                                   ~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/testing/MockScenarios.ts (292:11): @rollup/plugin-typescript TS2322: Type '(messages: Message[], options?: ChatOptions) => Promise<Message>' is not assignable to type '(messages: Message[], options?: ChatOptions) => AsyncIterableIterator<StreamChunk>'.
  Type 'Promise<Message>' is missing the following properties from type 'AsyncIterableIterator<StreamChunk>': [Symbol.asyncIterator], next[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/testing/MockScenarios.ts:292:11[22m
[90m
[7m292[0m     async chat(messages: Message[], options?: ChatOptions): Promise<Message> {
[7m   [0m [91m          ~~~~[0m

  [96msrc/providers/AIProvider.ts[0m:[93m180[0m:[93m12[0m
    [7m180[0m   abstract chat(
    [7m   [0m [96m           ~~~~[0m
    The expected type comes from property 'chat' which is declared here on type 'AIProvider'
[39m
[1m[33m(!) [plugin typescript] src/testing/TestUtilities.ts (113:11): @rollup/plugin-typescript TS2322: Type '(messages: Message[], options?: ChatOptions) => Promise<Message>' is not assignable to type '(messages: Message[], options?: ChatOptions) => AsyncIterableIterator<StreamChunk>'.
  Type 'Promise<Message>' is missing the following properties from type 'AsyncIterableIterator<StreamChunk>': [Symbol.asyncIterator], next[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/testing/TestUtilities.ts:113:11[22m
[90m
[7m113[0m     async chat(messages: Message[], options?: ChatOptions): Promise<Message> {
[7m   [0m [91m          ~~~~[0m

  [96msrc/providers/AIProvider.ts[0m:[93m180[0m:[93m12[0m
    [7m180[0m   abstract chat(
    [7m   [0m [96m           ~~~~[0m
    The expected type comes from property 'chat' which is declared here on type 'AIProvider'
[39m
[1m[33m(!) [plugin typescript] src/testing/TestUtilities.ts (370:9): @rollup/plugin-typescript TS2322: Type 'ToolUseBlock' is not assignable to type 'string | ContentBlock'.
  Property 'type' is missing in type 'ToolUseBlock' but required in type 'ToolUseContentBlock'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/testing/TestUtilities.ts:370:9[22m
[90m
[7m370[0m         {
[7m   [0m [91m        ~[0m
[7m371[0m           type: 'tool_use',
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m...[0m 
[7m374[0m           input: { operation: 'add', a: 5, b: 3 },
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m375[0m         } as ToolUseBlock,
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~[0m

  [96msrc/providers/AIProvider.ts[0m:[93m66[0m:[93m3[0m
    [7m66[0m   type: 'tool_use';
    [7m  [0m [96m  ~~~~[0m
    'type' is declared here.
[39m
[32mcreated [1mdist/index.js, dist/index.esm.js[22m in [1m1.8s[22m[39m

> nx run @clippyjs/types:typecheck-e 
=== Test Target Validation ===

> nx run @clippyjs/react:test

[0m[7m[1m[31m NX [39m[22m[27m[0m  [31mCannot find package 'vitest' imported from /Users/ericfriday/dev/clippyjs/node_modules/.store/@nx-vite-virtual-02558cda88/package/src/utils/executor-utils.js[39m
Pass --verbose to see the stacktrace.



 NX   Running target test for project @clippyjs/react failed

Failed tasks:

- @clippyjs/react:test

Hint: run the command with --verbose for more details.

-e 
Note: @nx/vite:test executor requires vitest dependency. Testing with existing Yarn scripts instead:


 RUN  v3.2.4 /Users/ericfriday/dev/clippyjs/packages/react

 ‚úì tests/unit/useAgent.test.tsx (12 tests) 28ms
 ‚úì tests/unit/ClippyProvider.test.tsx (7 tests) 23ms
 ‚úì tests/unit/Clippy.test.tsx (20 tests) 40ms
 ‚ùØ tests/unit/useClippy.test.tsx (21 tests | 16 failed) 5054ms
   ‚úì useClippy Hook > context access > throws error when used outside ClippyProvider 8ms
   ‚úì useClippy Hook > context access > provides context when used inside ClippyProvider 2ms
   ‚úì useClippy Hook > agents Map > starts with empty agents Map 1ms
   ‚úì useClippy Hook > loadAgent method > is a function 4ms
   ‚úì useClippy Hook > loadAgent method > returns a Promise 9ms
   √ó useClippy Hook > loadAgent method > accepts agent name parameter 5012ms
     ‚Üí Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   √ó useClippy Hook > loadAgent method > accepts options parameter 2ms
     ‚Üí Cannot read properties of null (reading 'loadAgent')
   √ó useClippy Hook > unloadAgent method > is a function 1ms
     ‚Üí Cannot read properties of null (reading 'unloadAgent')
   √ó useClippy Hook > unloadAgent method > accepts agent name parameter 5ms
     ‚Üí expected [Function] to not throw an error but 'TypeError: Cannot read properties of ‚Ä¶' was thrown
   √ó useClippy Hook > unloadAgent method > does not error when unloading non-existent agent 1ms
     ‚Üí expected [Function] to not throw an error but 'TypeError: Cannot read properties of ‚Ä¶' was thrown
   √ó useClippy Hook > getAgent method > is a function 1ms
     ‚Üí Cannot read properties of null (reading 'getAgent')
   √ó useClippy Hook > getAgent method > returns undefined for non-existent agent 1ms
     ‚Üí Cannot read properties of null (reading 'getAgent')
   √ó useClippy Hook > getAgent method > accepts agent name parameter 1ms
     ‚Üí expected [Function] to not throw an error but 'TypeError: Cannot read properties of ‚Ä¶' was thrown
   √ó useClippy Hook > agent lifecycle > adds agent to Map after loading 1ms
     ‚Üí Cannot read properties of null (reading 'agents')
   √ó useClippy Hook > agent lifecycle > removes agent from Map after unloading 1ms
     ‚Üí Cannot read properties of null (reading 'loadAgent')
   √ó useClippy Hook > agent lifecycle > returns same agent when loading duplicate 1ms
     ‚Üí Cannot read properties of null (reading 'loadAgent')
   √ó useClippy Hook > multiple agents > supports loading multiple different agents 1ms
     ‚Üí Cannot read properties of null (reading 'loadAgent')
   √ó useClippy Hook > multiple agents > retrieves correct agent by name 1ms
     ‚Üí Cannot read properties of null (reading 'loadAgent')
   √ó useClippy Hook > multiple agents > unloads specific agent without affecting others 1ms
     ‚Üí Cannot read properties of null (reading 'loadAgent')
   √ó useClippy Hook > maxAgents limit > respects maxAgents limit from provider 1ms
     ‚Üí Cannot read properties of null (reading 'loadAgent')
   √ó useClippy Hook > error handling > handles errors with onError callback 1ms
     ‚Üí Cannot read properties of null (reading 'loadAgent')
 ‚ùØ tests/unit/useAgent.interactions.test.tsx (33 tests | 33 failed) 5062ms
-e 
=== Summary ===
Build: ‚úÖ All packages build successfully (2.425s cached)
Typecheck: ‚úÖ All packages typecheck successfully (0.790s cached)
Tests: ‚úÖ Tests run via Yarn scripts (Nx test executor needs vitest dependency)
Graph: ‚úÖ Dependency graph generated successfully
