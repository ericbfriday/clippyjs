=== Cold Build with Nx ===

 NX   Running target build for 11 projects:

- clippyjs-nextjs-starter
- clippyjs-vite-starter
- clippyjs-demo-vanilla
- clippyjs-demo-react
- @clippyjs/ai-anthropic
- clippyjs-lib
- @clippyjs/ai-openai
- @clippyjs/storybook
- @clippyjs/react
- @clippyjs/types
- @clippyjs/ai



> nx run @clippyjs/types:build

Compiling TypeScript files for project "@clippyjs/types"...
Done compiling TypeScript files for project "@clippyjs/types".

> nx run clippyjs-lib:build

> echo 'Build configured in package.json'

Build configured in package.json

> nx run clippyjs-demo-vanilla:build

> echo 'Build configured in package.json'

Build configured in package.json

> nx run @clippyjs/react:build

> yarn workspace @clippyjs/react build

src/Agent.ts(8,64): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/Animator.ts(5,71): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/index.ts(26,20): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/loader.ts(6,50): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/useAgent.ts(7,65): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
> yarn workspace @clippyjs/react build

src/Agent.ts(8,64): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/Animator.ts(5,71): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/index.ts(26,20): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/loader.ts(6,50): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/useAgent.ts(7,65): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
Warning: command "yarn workspace @clippyjs/react build" exited with non-zero status code
> nx run @clippyjs/ai:build

> yarn workspace @clippyjs/ai build

[36m
[1msrc/index.ts[22m â†’ [1mdist/index.js, dist/index.esm.js[22m...[39m
[1m[33m(!) [plugin typescript] src/errors/RetryPolicy.ts (160:13): @rollup/plugin-typescript TS2554: Expected 0-1 arguments, but got 2.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/errors/RetryPolicy.ts:160:13[22m
[90m
[7m160[0m             { cause: lastError }
[7m   [0m [91m            ~~~~~~~~~~~~~~~~~~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/modes/PrebuiltModes.ts (63:3): @rollup/plugin-typescript TS2322: Type '"idle"' is not assignable to type 'ProactiveTriggerReason'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/modes/PrebuiltModes.ts:63:3[22m
[90m
[7m63[0m   reason: 'idle',
[7m  [0m [91m  ~~~~~~[0m

  [96msrc/modes/PrebuiltModes.ts[0m:[93m30[0m:[93m3[0m
    [7m30[0m   reason: ProactiveTriggerReason;
    [7m  [0m [96m  ~~~~~~[0m
    The expected type comes from property 'reason' which is declared here on type 'TriggerStrategy'
[39m
[1m[33m(!) [plugin typescript] src/react/HistoryManager.tsx (36:26): @rollup/plugin-typescript TS2503: Cannot find namespace 'JSX'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/HistoryManager.tsx:36:26[22m
[90m
[7m36[0m }: HistoryManagerProps): JSX.Element {
[7m  [0m [91m                         ~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/HistoryManager.tsx (136:14): @rollup/plugin-typescript TS2322: Type '{ children: string; jsx: true; }' is not assignable to type 'DetailedHTMLProps<StyleHTMLAttributes<HTMLStyleElement>, HTMLStyleElement>'.
  Property 'jsx' does not exist on type 'DetailedHTMLProps<StyleHTMLAttributes<HTMLStyleElement>, HTMLStyleElement>'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/HistoryManager.tsx:136:14[22m
[90m
[7m136[0m       <style jsx>{`
[7m   [0m [91m             ~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/ProviderSelector.tsx (69:28): @rollup/plugin-typescript TS2503: Cannot find namespace 'JSX'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/ProviderSelector.tsx:69:28[22m
[90m
[7m69[0m }: ProviderSelectorProps): JSX.Element {
[7m  [0m [91m                           ~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/useHistoryManager.ts (46:32): @rollup/plugin-typescript TS2339: Property 'config' does not exist on type 'AIClippyContextValue'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/useHistoryManager.ts:46:32[22m
[90m
[7m46[0m   const { conversationManager, config } = useAIClippy();
[7m  [0m [91m                               ~~~~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/useHistoryManager.ts (57:45): @rollup/plugin-typescript TS2341: Property 'agentName' is private and only accessible within class 'ConversationManager'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/useHistoryManager.ts:57:45[22m
[90m
[7m57[0m       const agentName = conversationManager.agentName as AgentName;
[7m  [0m [91m                                            ~~~~~~~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/useHistoryManager.ts (66:48): @rollup/plugin-typescript TS2341: Property 'agentName' is private and only accessible within class 'ConversationManager'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/useHistoryManager.ts:66:48[22m
[90m
[7m66[0m   }, [config.historyStore, conversationManager.agentName]);
[7m  [0m [91m                                               ~~~~~~~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/useHistoryManager.ts (74:45): @rollup/plugin-typescript TS2341: Property 'agentName' is private and only accessible within class 'ConversationManager'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/useHistoryManager.ts:74:45[22m
[90m
[7m74[0m       const agentName = conversationManager.agentName as AgentName;
[7m  [0m [91m                                            ~~~~~~~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/VisuallyHidden.tsx (35:26): @rollup/plugin-typescript TS2503: Cannot find namespace 'JSX'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/VisuallyHidden.tsx:35:26[22m
[90m
[7m35[0m }: VisuallyHiddenProps): JSX.Element {
[7m  [0m [91m                         ~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/VisuallyHidden.tsx (86:36): @rollup/plugin-typescript TS2503: Cannot find namespace 'JSX'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/VisuallyHidden.tsx:86:36[22m
[90m
[7m86[0m }: ScreenReaderAnnouncementProps): JSX.Element | null {
[7m  [0m [91m                                   ~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/testing/MockScenarios.ts (292:11): @rollup/plugin-typescript TS2322: Type '(messages: Message[], options?: ChatOptions) => Promise<Message>' is not assignable to type '(messages: Message[], options?: ChatOptions) => AsyncIterableIterator<StreamChunk>'.
  Type 'Promise<Message>' is missing the following properties from type 'AsyncIterableIterator<StreamChunk>': [Symbol.asyncIterator], next[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/testing/MockScenarios.ts:292:11[22m
[90m
[7m292[0m     async chat(messages: Message[], options?: ChatOptions): Promise<Message> {
[7m   [0m [91m          ~~~~[0m

  [96msrc/providers/AIProvider.ts[0m:[93m180[0m:[93m12[0m
    [7m180[0m   abstract chat(
    [7m   [0m [96m           ~~~~[0m
    The expected type comes from property 'chat' which is declared here on type 'AIProvider'
[39m
[1m[33m(!) [plugin typescript] src/testing/TestUtilities.ts (113:11): @rollup/plugin-typescript TS2322: Type '(messages: Message[], options?: ChatOptions) => Promise<Message>' is not assignable to type '(messages: Message[], options?: ChatOptions) => AsyncIterableIterator<StreamChunk>'.
  Type 'Promise<Message>' is missing the following properties from type 'AsyncIterableIterator<StreamChunk>': [Symbol.asyncIterator], next[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/testing/TestUtilities.ts:113:11[22m
[90m
[7m113[0m     async chat(messages: Message[], options?: ChatOptions): Promise<Message> {
[7m   [0m [91m          ~~~~[0m

  [96msrc/providers/AIProvider.ts[0m:[93m180[0m:[93m12[0m
    [7m180[0m   abstract chat(
    [7m   [0m [96m           ~~~~[0m
    The expected type comes from property 'chat' which is declared here on type 'AIProvider'
[39m
[1m[33m(!) [plugin typescript] src/testing/TestUtilities.ts (370:9): @rollup/plugin-typescript TS2322: Type 'ToolUseBlock' is not assignable to type 'string | ContentBlock'.
  Property 'type' is missing in type 'ToolUseBlock' but required in type 'ToolUseContentBlock'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/testing/TestUtilities.ts:370:9[22m
[90m
[7m370[0m         {
[7m   [0m [91m        ~[0m
[7m371[0m           type: 'tool_use',
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m...[0m 
[7m374[0m           input: { operation: 'add', a: 5, b: 3 },
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m375[0m         } as ToolUseBlock,
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~[0m

  [96msrc/providers/AIProvider.ts[0m:[93m66[0m:[93m3[0m
    [7m66[0m   type: 'tool_use';
    [7m  [0m [96m  ~~~~[0m
    'type' is declared here.
[39m
[32mcreated [1mdist/index.js, dist/index.esm.js[22m in [1m1.8s[22m[39m
(node:13759) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 exit listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
(Use `node --trace-warnings ...` to show where the warning was created)

> nx run @clippyjs/ai-anthropic:build

> yarn workspace @clippyjs/ai-anthropic build

[36m
[1msrc/index.ts[22m â†’ [1mdist/index.js, dist/index.esm.js[22m...[39m
[1m[33m(!) [plugin typescript] @rollup/plugin-typescript TS6306: Referenced project '/Users/ericfriday/dev/clippyjs/packages/ai' must have setting "composite": true.[39m[22m
[32mcreated [1mdist/index.js, dist/index.esm.js[22m in [1m756ms[22m[39m

> nx run @clippyjs/ai-openai:build

> yarn workspace @clippyjs/ai-openai build

[36m
[1msrc/index.ts[22m â†’ [1mdist/index.js, dist/index.esm.js[22m...[39m
[1m[33m(!) [plugin typescript] @rollup/plugin-typescript TS6306: Referenced project '/Users/ericfriday/dev/clippyjs/packages/ai' must have setting "composite": true.[39m[22m
[32mcreated [1mdist/index.js, dist/index.esm.js[22m in [1m958ms[22m[39m



 NX   Running target build for 11 projects failed

Tasks not run because their dependencies failed or --nx-bail=true:

- clippyjs-nextjs-starter:build
- clippyjs-vite-starter:build
- clippyjs-demo-react:build
- @clippyjs/storybook:build

Failed tasks:

- @clippyjs/react:build


real	0m6.476s
user	0m15.464s
sys	0m1.094s
-e 
=== Cached Build with Nx ===

 NX   Running target build for 11 projects:

- clippyjs-nextjs-starter
- clippyjs-vite-starter
- clippyjs-demo-vanilla
- clippyjs-demo-react
- @clippyjs/ai-anthropic
- clippyjs-lib
- @clippyjs/ai-openai
- @clippyjs/storybook
- @clippyjs/react
- @clippyjs/types
- @clippyjs/ai



> nx run @clippyjs/types:build  [existing outputs match the cache, left as is]

Compiling TypeScript files for project "@clippyjs/types"...
Done compiling TypeScript files for project "@clippyjs/types".

> nx run @clippyjs/ai:build  [existing outputs match the cache, left as is]

> yarn workspace @clippyjs/ai build

[36m
[1msrc/index.ts[22m â†’ [1mdist/index.js, dist/index.esm.js[22m...[39m
[1m[33m(!) [plugin typescript] src/errors/RetryPolicy.ts (160:13): @rollup/plugin-typescript TS2554: Expected 0-1 arguments, but got 2.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/errors/RetryPolicy.ts:160:13[22m
[90m
[7m160[0m             { cause: lastError }
[7m   [0m [91m            ~~~~~~~~~~~~~~~~~~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/modes/PrebuiltModes.ts (63:3): @rollup/plugin-typescript TS2322: Type '"idle"' is not assignable to type 'ProactiveTriggerReason'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/modes/PrebuiltModes.ts:63:3[22m
[90m
[7m63[0m   reason: 'idle',
[7m  [0m [91m  ~~~~~~[0m

  [96msrc/modes/PrebuiltModes.ts[0m:[93m30[0m:[93m3[0m
    [7m30[0m   reason: ProactiveTriggerReason;
    [7m  [0m [96m  ~~~~~~[0m
    The expected type comes from property 'reason' which is declared here on type 'TriggerStrategy'
[39m
[1m[33m(!) [plugin typescript] src/react/HistoryManager.tsx (36:26): @rollup/plugin-typescript TS2503: Cannot find namespace 'JSX'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/HistoryManager.tsx:36:26[22m
[90m
[7m36[0m }: HistoryManagerProps): JSX.Element {
[7m  [0m [91m                         ~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/HistoryManager.tsx (136:14): @rollup/plugin-typescript TS2322: Type '{ children: string; jsx: true; }' is not assignable to type 'DetailedHTMLProps<StyleHTMLAttributes<HTMLStyleElement>, HTMLStyleElement>'.
  Property 'jsx' does not exist on type 'DetailedHTMLProps<StyleHTMLAttributes<HTMLStyleElement>, HTMLStyleElement>'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/HistoryManager.tsx:136:14[22m
[90m
[7m136[0m       <style jsx>{`
[7m   [0m [91m             ~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/ProviderSelector.tsx (69:28): @rollup/plugin-typescript TS2503: Cannot find namespace 'JSX'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/ProviderSelector.tsx:69:28[22m
[90m
[7m69[0m }: ProviderSelectorProps): JSX.Element {
[7m  [0m [91m                           ~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/useHistoryManager.ts (46:32): @rollup/plugin-typescript TS2339: Property 'config' does not exist on type 'AIClippyContextValue'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/useHistoryManager.ts:46:32[22m
[90m
[7m46[0m   const { conversationManager, config } = useAIClippy();
[7m  [0m [91m                               ~~~~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/useHistoryManager.ts (57:45): @rollup/plugin-typescript TS2341: Property 'agentName' is private and only accessible within class 'ConversationManager'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/useHistoryManager.ts:57:45[22m
[90m
[7m57[0m       const agentName = conversationManager.agentName as AgentName;
[7m  [0m [91m                                            ~~~~~~~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/useHistoryManager.ts (66:48): @rollup/plugin-typescript TS2341: Property 'agentName' is private and only accessible within class 'ConversationManager'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/useHistoryManager.ts:66:48[22m
[90m
[7m66[0m   }, [config.historyStore, conversationManager.agentName]);
[7m  [0m [91m                                               ~~~~~~~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/useHistoryManager.ts (74:45): @rollup/plugin-typescript TS2341: Property 'agentName' is private and only accessible within class 'ConversationManager'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/useHistoryManager.ts:74:45[22m
[90m
[7m74[0m       const agentName = conversationManager.agentName as AgentName;
[7m  [0m [91m                                            ~~~~~~~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/VisuallyHidden.tsx (35:26): @rollup/plugin-typescript TS2503: Cannot find namespace 'JSX'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/VisuallyHidden.tsx:35:26[22m
[90m
[7m35[0m }: VisuallyHiddenProps): JSX.Element {
[7m  [0m [91m                         ~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/VisuallyHidden.tsx (86:36): @rollup/plugin-typescript TS2503: Cannot find namespace 'JSX'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/VisuallyHidden.tsx:86:36[22m
[90m
[7m86[0m }: ScreenReaderAnnouncementProps): JSX.Element | null {
[7m  [0m [91m                                   ~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/testing/MockScenarios.ts (292:11): @rollup/plugin-typescript TS2322: Type '(messages: Message[], options?: ChatOptions) => Promise<Message>' is not assignable to type '(messages: Message[], options?: ChatOptions) => AsyncIterableIterator<StreamChunk>'.
  Type 'Promise<Message>' is missing the following properties from type 'AsyncIterableIterator<StreamChunk>': [Symbol.asyncIterator], next[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/testing/MockScenarios.ts:292:11[22m
[90m
[7m292[0m     async chat(messages: Message[], options?: ChatOptions): Promise<Message> {
[7m   [0m [91m          ~~~~[0m

  [96msrc/providers/AIProvider.ts[0m:[93m180[0m:[93m12[0m
    [7m180[0m   abstract chat(
    [7m   [0m [96m           ~~~~[0m
    The expected type comes from property 'chat' which is declared here on type 'AIProvider'
[39m
[1m[33m(!) [plugin typescript] src/testing/TestUtilities.ts (113:11): @rollup/plugin-typescript TS2322: Type '(messages: Message[], options?: ChatOptions) => Promise<Message>' is not assignable to type '(messages: Message[], options?: ChatOptions) => AsyncIterableIterator<StreamChunk>'.
  Type 'Promise<Message>' is missing the following properties from type 'AsyncIterableIterator<StreamChunk>': [Symbol.asyncIterator], next[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/testing/TestUtilities.ts:113:11[22m
[90m
[7m113[0m     async chat(messages: Message[], options?: ChatOptions): Promise<Message> {
[7m   [0m [91m          ~~~~[0m

  [96msrc/providers/AIProvider.ts[0m:[93m180[0m:[93m12[0m
    [7m180[0m   abstract chat(
    [7m   [0m [96m           ~~~~[0m
    The expected type comes from property 'chat' which is declared here on type 'AIProvider'
[39m
[1m[33m(!) [plugin typescript] src/testing/TestUtilities.ts (370:9): @rollup/plugin-typescript TS2322: Type 'ToolUseBlock' is not assignable to type 'string | ContentBlock'.
  Property 'type' is missing in type 'ToolUseBlock' but required in type 'ToolUseContentBlock'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/testing/TestUtilities.ts:370:9[22m
[90m
[7m370[0m         {
[7m   [0m [91m        ~[0m
[7m371[0m           type: 'tool_use',
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m...[0m 
[7m374[0m           input: { operation: 'add', a: 5, b: 3 },
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m375[0m         } as ToolUseBlock,
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~[0m

  [96msrc/providers/AIProvider.ts[0m:[93m66[0m:[93m3[0m
    [7m66[0m   type: 'tool_use';
    [7m  [0m [96m  ~~~~[0m
    'type' is declared here.
[39m
[32mcreated [1mdist/index.js, dist/index.esm.js[22m in [1m1.8s[22m[39m

> nx run clippyjs-lib:build  [existing outputs match the cache, left as is]

> echo 'Build configured in package.json'

Build configured in package.json

> nx run @clippyjs/ai-anthropic:build  [existing outputs match the cache, left as is]

> yarn workspace @clippyjs/ai-anthropic build

[36m
[1msrc/index.ts[22m â†’ [1mdist/index.js, dist/index.esm.js[22m...[39m
[1m[33m(!) [plugin typescript] @rollup/plugin-typescript TS6306: Referenced project '/Users/ericfriday/dev/clippyjs/packages/ai' must have setting "composite": true.[39m[22m
[32mcreated [1mdist/index.js, dist/index.esm.js[22m in [1m756ms[22m[39m

> nx run @clippyjs/ai-openai:build  [existing outputs match the cache, left as is]

> yarn workspace @clippyjs/ai-openai build

[36m
[1msrc/index.ts[22m â†’ [1mdist/index.js, dist/index.esm.js[22m...[39m
[1m[33m(!) [plugin typescript] @rollup/plugin-typescript TS6306: Referenced project '/Users/ericfriday/dev/clippyjs/packages/ai' must have setting "composite": true.[39m[22m
[32mcreated [1mdist/index.js, dist/index.esm.js[22m in [1m958ms[22m[39m

> nx run clippyjs-demo-vanilla:build  [existing outputs match the cache, left as is]

> echo 'Build configured in package.json'

Build configured in package.json

> nx run @clippyjs/react:build

> yarn workspace @clippyjs/react build

src/Agent.ts(8,64): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/Animator.ts(5,71): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/index.ts(26,20): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/loader.ts(6,50): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/useAgent.ts(7,65): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
> yarn workspace @clippyjs/react build

src/Agent.ts(8,64): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/Animator.ts(5,71): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/index.ts(26,20): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/loader.ts(6,50): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/useAgent.ts(7,65): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
Warning: command "yarn workspace @clippyjs/react build" exited with non-zero status code


 NX   Running target build for 11 projects failed

Tasks not run because their dependencies failed or --nx-bail=true:

- clippyjs-nextjs-starter:build
- clippyjs-vite-starter:build
- clippyjs-demo-react:build
- @clippyjs/storybook:build

Failed tasks:

- @clippyjs/react:build


real	0m2.252s
user	0m2.441s
sys	0m0.231s
-e 
=== Affected Build Test ===

 NX   Running target build for 11 projects:

- @clippyjs/ai-anthropic
- @clippyjs/storybook
- @clippyjs/ai-openai
- @clippyjs/ai
- clippyjs-demo-react
- clippyjs-demo-vanilla
- clippyjs-lib
- @clippyjs/react
- clippyjs-nextjs-starter
- clippyjs-vite-starter
- @clippyjs/types



> nx run @clippyjs/types:build  [existing outputs match the cache, left as is]

Compiling TypeScript files for project "@clippyjs/types"...
Done compiling TypeScript files for project "@clippyjs/types".

> nx run @clippyjs/ai:build  [existing outputs match the cache, left as is]

> yarn workspace @clippyjs/ai build

[36m
[1msrc/index.ts[22m â†’ [1mdist/index.js, dist/index.esm.js[22m...[39m
[1m[33m(!) [plugin typescript] src/errors/RetryPolicy.ts (160:13): @rollup/plugin-typescript TS2554: Expected 0-1 arguments, but got 2.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/errors/RetryPolicy.ts:160:13[22m
[90m
[7m160[0m             { cause: lastError }
[7m   [0m [91m            ~~~~~~~~~~~~~~~~~~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/modes/PrebuiltModes.ts (63:3): @rollup/plugin-typescript TS2322: Type '"idle"' is not assignable to type 'ProactiveTriggerReason'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/modes/PrebuiltModes.ts:63:3[22m
[90m
[7m63[0m   reason: 'idle',
[7m  [0m [91m  ~~~~~~[0m

  [96msrc/modes/PrebuiltModes.ts[0m:[93m30[0m:[93m3[0m
    [7m30[0m   reason: ProactiveTriggerReason;
    [7m  [0m [96m  ~~~~~~[0m
    The expected type comes from property 'reason' which is declared here on type 'TriggerStrategy'
[39m
[1m[33m(!) [plugin typescript] src/react/HistoryManager.tsx (36:26): @rollup/plugin-typescript TS2503: Cannot find namespace 'JSX'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/HistoryManager.tsx:36:26[22m
[90m
[7m36[0m }: HistoryManagerProps): JSX.Element {
[7m  [0m [91m                         ~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/HistoryManager.tsx (136:14): @rollup/plugin-typescript TS2322: Type '{ children: string; jsx: true; }' is not assignable to type 'DetailedHTMLProps<StyleHTMLAttributes<HTMLStyleElement>, HTMLStyleElement>'.
  Property 'jsx' does not exist on type 'DetailedHTMLProps<StyleHTMLAttributes<HTMLStyleElement>, HTMLStyleElement>'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/HistoryManager.tsx:136:14[22m
[90m
[7m136[0m       <style jsx>{`
[7m   [0m [91m             ~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/ProviderSelector.tsx (69:28): @rollup/plugin-typescript TS2503: Cannot find namespace 'JSX'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/ProviderSelector.tsx:69:28[22m
[90m
[7m69[0m }: ProviderSelectorProps): JSX.Element {
[7m  [0m [91m                           ~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/useHistoryManager.ts (46:32): @rollup/plugin-typescript TS2339: Property 'config' does not exist on type 'AIClippyContextValue'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/useHistoryManager.ts:46:32[22m
[90m
[7m46[0m   const { conversationManager, config } = useAIClippy();
[7m  [0m [91m                               ~~~~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/useHistoryManager.ts (57:45): @rollup/plugin-typescript TS2341: Property 'agentName' is private and only accessible within class 'ConversationManager'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/useHistoryManager.ts:57:45[22m
[90m
[7m57[0m       const agentName = conversationManager.agentName as AgentName;
[7m  [0m [91m                                            ~~~~~~~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/useHistoryManager.ts (66:48): @rollup/plugin-typescript TS2341: Property 'agentName' is private and only accessible within class 'ConversationManager'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/useHistoryManager.ts:66:48[22m
[90m
[7m66[0m   }, [config.historyStore, conversationManager.agentName]);
[7m  [0m [91m                                               ~~~~~~~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/useHistoryManager.ts (74:45): @rollup/plugin-typescript TS2341: Property 'agentName' is private and only accessible within class 'ConversationManager'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/useHistoryManager.ts:74:45[22m
[90m
[7m74[0m       const agentName = conversationManager.agentName as AgentName;
[7m  [0m [91m                                            ~~~~~~~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/VisuallyHidden.tsx (35:26): @rollup/plugin-typescript TS2503: Cannot find namespace 'JSX'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/VisuallyHidden.tsx:35:26[22m
[90m
[7m35[0m }: VisuallyHiddenProps): JSX.Element {
[7m  [0m [91m                         ~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/react/VisuallyHidden.tsx (86:36): @rollup/plugin-typescript TS2503: Cannot find namespace 'JSX'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/react/VisuallyHidden.tsx:86:36[22m
[90m
[7m86[0m }: ScreenReaderAnnouncementProps): JSX.Element | null {
[7m  [0m [91m                                   ~~~[0m
[39m
[1m[33m(!) [plugin typescript] src/testing/MockScenarios.ts (292:11): @rollup/plugin-typescript TS2322: Type '(messages: Message[], options?: ChatOptions) => Promise<Message>' is not assignable to type '(messages: Message[], options?: ChatOptions) => AsyncIterableIterator<StreamChunk>'.
  Type 'Promise<Message>' is missing the following properties from type 'AsyncIterableIterator<StreamChunk>': [Symbol.asyncIterator], next[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/testing/MockScenarios.ts:292:11[22m
[90m
[7m292[0m     async chat(messages: Message[], options?: ChatOptions): Promise<Message> {
[7m   [0m [91m          ~~~~[0m

  [96msrc/providers/AIProvider.ts[0m:[93m180[0m:[93m12[0m
    [7m180[0m   abstract chat(
    [7m   [0m [96m           ~~~~[0m
    The expected type comes from property 'chat' which is declared here on type 'AIProvider'
[39m
[1m[33m(!) [plugin typescript] src/testing/TestUtilities.ts (113:11): @rollup/plugin-typescript TS2322: Type '(messages: Message[], options?: ChatOptions) => Promise<Message>' is not assignable to type '(messages: Message[], options?: ChatOptions) => AsyncIterableIterator<StreamChunk>'.
  Type 'Promise<Message>' is missing the following properties from type 'AsyncIterableIterator<StreamChunk>': [Symbol.asyncIterator], next[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/testing/TestUtilities.ts:113:11[22m
[90m
[7m113[0m     async chat(messages: Message[], options?: ChatOptions): Promise<Message> {
[7m   [0m [91m          ~~~~[0m

  [96msrc/providers/AIProvider.ts[0m:[93m180[0m:[93m12[0m
    [7m180[0m   abstract chat(
    [7m   [0m [96m           ~~~~[0m
    The expected type comes from property 'chat' which is declared here on type 'AIProvider'
[39m
[1m[33m(!) [plugin typescript] src/testing/TestUtilities.ts (370:9): @rollup/plugin-typescript TS2322: Type 'ToolUseBlock' is not assignable to type 'string | ContentBlock'.
  Property 'type' is missing in type 'ToolUseBlock' but required in type 'ToolUseContentBlock'.[39m[22m
[1m/Users/ericfriday/dev/clippyjs/packages/ai/src/testing/TestUtilities.ts:370:9[22m
[90m
[7m370[0m         {
[7m   [0m [91m        ~[0m
[7m371[0m           type: 'tool_use',
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m...[0m 
[7m374[0m           input: { operation: 'add', a: 5, b: 3 },
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m375[0m         } as ToolUseBlock,
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~[0m

  [96msrc/providers/AIProvider.ts[0m:[93m66[0m:[93m3[0m
    [7m66[0m   type: 'tool_use';
    [7m  [0m [96m  ~~~~[0m
    'type' is declared here.
[39m
[32mcreated [1mdist/index.js, dist/index.esm.js[22m in [1m1.8s[22m[39m

> nx run clippyjs-lib:build  [existing outputs match the cache, left as is]

> echo 'Build configured in package.json'

Build configured in package.json

> nx run @clippyjs/ai-anthropic:build  [existing outputs match the cache, left as is]

> yarn workspace @clippyjs/ai-anthropic build

[36m
[1msrc/index.ts[22m â†’ [1mdist/index.js, dist/index.esm.js[22m...[39m
[1m[33m(!) [plugin typescript] @rollup/plugin-typescript TS6306: Referenced project '/Users/ericfriday/dev/clippyjs/packages/ai' must have setting "composite": true.[39m[22m
[32mcreated [1mdist/index.js, dist/index.esm.js[22m in [1m756ms[22m[39m

> nx run @clippyjs/ai-openai:build  [existing outputs match the cache, left as is]

> yarn workspace @clippyjs/ai-openai build

[36m
[1msrc/index.ts[22m â†’ [1mdist/index.js, dist/index.esm.js[22m...[39m
[1m[33m(!) [plugin typescript] @rollup/plugin-typescript TS6306: Referenced project '/Users/ericfriday/dev/clippyjs/packages/ai' must have setting "composite": true.[39m[22m
[32mcreated [1mdist/index.js, dist/index.esm.js[22m in [1m958ms[22m[39m

> nx run clippyjs-demo-vanilla:build  [existing outputs match the cache, left as is]

> echo 'Build configured in package.json'

Build configured in package.json

> nx run @clippyjs/react:build

> yarn workspace @clippyjs/react build

src/Agent.ts(8,64): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/Animator.ts(5,71): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/index.ts(26,20): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/loader.ts(6,50): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/useAgent.ts(7,65): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
> yarn workspace @clippyjs/react build

src/Agent.ts(8,64): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/Animator.ts(5,71): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/index.ts(26,20): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/loader.ts(6,50): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
src/useAgent.ts(7,65): error TS6305: Output file '/Users/ericfriday/dev/clippyjs/packages/types/dist/index.d.ts' has not been built from source file '/Users/ericfriday/dev/clippyjs/packages/types/src/index.ts'.
Warning: command "yarn workspace @clippyjs/react build" exited with non-zero status code


 NX   Running target build for 11 projects failed

Tasks not run because their dependencies failed or --nx-bail=true:

- @clippyjs/storybook:build
- clippyjs-demo-react:build
- clippyjs-nextjs-starter:build
- clippyjs-vite-starter:build

Failed tasks:

- @clippyjs/react:build

