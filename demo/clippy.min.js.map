{"version":3,"file":"clippy.min.js","sources":["../src/Queue.ts","../src/Animator.ts","../src/Balloon.ts","../src/Agent.ts","../src/loader.ts","../../../.yarn/berry/cache/react-npm-18.3.1-af38f3c1ae-10c0.zip/node_modules/react/jsx-runtime.js","../../../.yarn/berry/cache/react-npm-18.3.1-af38f3c1ae-10c0.zip/node_modules/react/cjs/react-jsx-runtime.production.min.js","../../../.yarn/berry/cache/react-npm-18.3.1-af38f3c1ae-10c0.zip/node_modules/react/cjs/react-jsx-runtime.development.js","../src/ClippyProvider.tsx","../src/index.ts","../src/Clippy.tsx"],"sourcesContent":["/**\n * Queue implementation for managing animations and actions\n */\n\ntype QueueFunction = (complete: () => void) => void;\n\nexport class Queue {\n  private queue: QueueFunction[] = [];\n  private active = false;\n  private onEmptyCallback: (() => void) | undefined;\n\n  constructor(onEmptyCallback?: () => void) {\n    this.onEmptyCallback = onEmptyCallback;\n  }\n\n  /**\n   * Add a function to the queue\n   */\n  public enqueue(func: QueueFunction): void {\n    this.queue.push(func);\n\n    if (this.queue.length === 1 && !this.active) {\n      this.progressQueue();\n    }\n  }\n\n  /**\n   * Clear the queue\n   */\n  public clear(): void {\n    this.queue = [];\n    this.active = false;\n  }\n\n  /**\n   * Process the next item in the queue\n   */\n  public next(): void {\n    this.active = false;\n    this.progressQueue();\n  }\n\n  /**\n   * Get the current queue size\n   */\n  public size(): number {\n    return this.queue.length;\n  }\n\n  /**\n   * Check if queue is active\n   */\n  public isActive(): boolean {\n    return this.active;\n  }\n\n  /**\n   * Process the queue\n   */\n  private progressQueue(): void {\n    // Stop if nothing left in queue\n    if (!this.queue.length) {\n      if (this.onEmptyCallback) {\n        this.onEmptyCallback();\n      }\n      return;\n    }\n\n    const func = this.queue.shift();\n    if (!func) return;\n\n    this.active = true;\n\n    // Execute function with completion callback\n    const completeFunction = () => this.next();\n    func(completeFunction);\n  }\n}","/**\n * Animator class for handling sprite animations\n */\n\nimport { AgentData, Animation, Frame, AnimationState, SoundMap } from './types';\n\nexport type AnimatorStateCallback = (name: string, state: AnimationState) => void;\n\nexport class Animator {\n  public static readonly States = {\n    WAITING: 'WAITING' as AnimationState,\n    EXITED: 'EXITED' as AnimationState,\n    PLAYING: 'PLAYING' as AnimationState,\n  };\n\n  private element: HTMLElement;\n  private data: AgentData;\n  private path: string;\n  private sounds: { [key: string]: HTMLAudioElement } = {};\n  private overlays: HTMLElement[] = [];\n\n  private currentAnimation?: Animation;\n  private currentFrame?: Frame;\n  private currentFrameIndex = 0;\n  private exiting = false;\n  private started = false;\n  private paused = false;\n  private loop?: number;\n  private endCallback?: AnimatorStateCallback;\n\n  public currentAnimationName?: string;\n\n  constructor(element: HTMLElement, path: string, data: AgentData, sounds: SoundMap) {\n    this.element = element;\n    this.data = data;\n    this.path = path;\n\n    this.preloadSounds(sounds);\n    this.setupElements();\n  }\n\n  /**\n   * Set up the DOM elements for animation layers\n   */\n  private setupElements(): void {\n    this.overlays = [this.element];\n    let currentElement = this.element;\n\n    this.setupElementStyle(this.element);\n\n    // Create overlay elements for multi-layer animations\n    for (let i = 1; i < this.data.overlayCount; i++) {\n      const innerElement = document.createElement('div');\n      this.setupElementStyle(innerElement);\n      currentElement.appendChild(innerElement);\n      this.overlays.push(innerElement);\n      currentElement = innerElement;\n    }\n  }\n\n  /**\n   * Set up styling for an animation element\n   */\n  private setupElementStyle(element: HTMLElement): void {\n    const [width, height] = this.data.framesize;\n    element.style.display = 'none';\n    element.style.width = `${width}px`;\n    element.style.height = `${height}px`;\n    element.style.background = `url('${this.path}/map.png') no-repeat`;\n  }\n\n  /**\n   * Preload sound files\n   */\n  private preloadSounds(sounds: SoundMap): void {\n    for (const soundName of this.data.sounds) {\n      const uri = sounds[soundName];\n      if (uri) {\n        this.sounds[soundName] = new Audio(uri);\n      }\n    }\n  }\n\n  /**\n   * Get list of available animations\n   */\n  public getAnimations(): string[] {\n    return Object.keys(this.data.animations);\n  }\n\n  /**\n   * Check if an animation exists\n   */\n  public hasAnimation(name: string): boolean {\n    return !!this.data.animations[name];\n  }\n\n  /**\n   * Start showing an animation\n   */\n  public showAnimation(animationName: string, stateChangeCallback?: AnimatorStateCallback): boolean {\n    this.exiting = false;\n\n    if (!this.hasAnimation(animationName)) {\n      return false;\n    }\n\n    this.currentAnimation = this.data.animations[animationName];\n    this.currentAnimationName = animationName;\n\n    if (!this.started) {\n      this.step();\n      this.started = true;\n    }\n\n    this.currentFrameIndex = 0;\n    this.currentFrame = undefined;\n    this.endCallback = stateChangeCallback;\n\n    return true;\n  }\n\n  /**\n   * Exit the current animation\n   */\n  public exitAnimation(): void {\n    this.exiting = true;\n  }\n\n  /**\n   * Pause the animation\n   */\n  public pause(): void {\n    this.paused = true;\n    if (this.loop) {\n      window.clearTimeout(this.loop);\n      this.loop = undefined;\n    }\n  }\n\n  /**\n   * Resume the animation\n   */\n  public resume(): void {\n    this.paused = false;\n    if (this.currentAnimation) {\n      this.step();\n    }\n  }\n\n  /**\n   * Main animation loop step\n   */\n  private step(): void {\n    if (!this.currentAnimation || this.paused) return;\n\n    const newFrameIndex = Math.min(\n      this.getNextAnimationFrame(),\n      this.currentAnimation.frames.length - 1\n    );\n    const frameChanged = !this.currentFrame || this.currentFrameIndex !== newFrameIndex;\n    this.currentFrameIndex = newFrameIndex;\n\n    // Always switch frame data, unless at last frame with useExitBranching flag\n    if (!(this.atLastFrame() && this.currentAnimation.useExitBranching)) {\n      this.currentFrame = this.currentAnimation.frames[this.currentFrameIndex];\n    }\n\n    this.draw();\n    this.playSound();\n\n    if (this.currentFrame) {\n      this.loop = window.setTimeout(() => this.step(), this.currentFrame.duration);\n    }\n\n    // Fire events if frames changed and we reached an end\n    if (this.endCallback && frameChanged && this.atLastFrame()) {\n      if (this.currentAnimation.useExitBranching && !this.exiting) {\n        this.endCallback(this.currentAnimationName!, Animator.States.WAITING);\n      } else {\n        this.endCallback(this.currentAnimationName!, Animator.States.EXITED);\n      }\n    }\n  }\n\n  /**\n   * Get the next animation frame index\n   */\n  private getNextAnimationFrame(): number {\n    if (!this.currentAnimation) return 0;\n    if (!this.currentFrame) return 0;\n\n    const currentFrame = this.currentFrame;\n    const branching = currentFrame.branching;\n\n    if (this.exiting && currentFrame.exitBranch !== undefined) {\n      return currentFrame.exitBranch;\n    } else if (branching) {\n      let rnd = Math.random() * 100;\n      for (const branch of branching.branches) {\n        if (rnd <= branch.weight) {\n          return branch.frameIndex;\n        }\n        rnd -= branch.weight;\n      }\n    }\n\n    return this.currentFrameIndex + 1;\n  }\n\n  /**\n   * Draw the current frame\n   */\n  private draw(): void {\n    const images = this.currentFrame?.images || [];\n\n    for (let i = 0; i < this.overlays.length; i++) {\n      if (i < images.length) {\n        const [x, y] = images[i];\n        const backgroundPosition = `-${x}px -${y}px`;\n        this.overlays[i].style.backgroundPosition = backgroundPosition;\n        this.overlays[i].style.display = 'block';\n      } else {\n        this.overlays[i].style.display = 'none';\n      }\n    }\n  }\n\n  /**\n   * Play the current frame's sound\n   */\n  private playSound(): void {\n    if (!this.currentFrame?.sound) return;\n\n    const soundName = this.currentFrame.sound;\n    if (typeof soundName === 'string') {\n      const audio = this.sounds[soundName];\n      if (audio) {\n        audio.play().catch(() => {\n          // Ignore audio play errors (browser autoplay policies)\n        });\n      }\n    }\n  }\n\n  /**\n   * Check if at last frame of animation\n   */\n  private atLastFrame(): boolean {\n    if (!this.currentAnimation) return false;\n    return this.currentFrameIndex >= this.currentAnimation.frames.length - 1;\n  }\n\n  /**\n   * Destroy the animator and clean up\n   */\n  public destroy(): void {\n    this.pause();\n    this.overlays = [];\n    this.sounds = {};\n  }\n}","/**\n * Balloon component for displaying speech bubbles\n */\n\ntype BalloonPosition =\n  | \"top-left\"\n  | \"top-right\"\n  | \"bottom-left\"\n  | \"bottom-right\";\n\nexport class Balloon {\n  private targetEl: HTMLElement;\n  private balloonEl: HTMLDivElement;\n  private contentEl: HTMLDivElement;\n  private tipEl: HTMLDivElement;\n  private hidden = true;\n  private active = false;\n  private hold = false;\n  private hidingTimeout?: number;\n  private wordTimeout?: number;\n  private completeCallback?: () => void;\n\n  private readonly WORD_SPEAK_TIME = 200;\n  private readonly CLOSE_BALLOON_DELAY = 2000;\n  private readonly BALLOON_MARGIN = 15;\n\n  constructor(targetEl: HTMLElement) {\n    this.targetEl = targetEl;\n    this.balloonEl = this.createBalloonElement();\n    this.contentEl = this.balloonEl.querySelector(\n      \".clippy-content\",\n    ) as HTMLDivElement;\n    this.tipEl = this.balloonEl.querySelector(\".clippy-tip\") as HTMLDivElement;\n    document.body.appendChild(this.balloonEl);\n  }\n\n  /**\n   * Create the balloon DOM element\n   */\n  private createBalloonElement(): HTMLDivElement {\n    const balloon = document.createElement(\"div\");\n    balloon.className = \"clippy-balloon\";\n    balloon.style.display = \"none\";\n\n    const tip = document.createElement(\"div\");\n    tip.className = \"clippy-tip\";\n\n    const content = document.createElement(\"div\");\n    content.className = \"clippy-content\";\n\n    balloon.appendChild(tip);\n    balloon.appendChild(content);\n\n    return balloon;\n  }\n\n  /**\n   * Speak text with animation (returns Promise)\n   */\n  public speak(text: string, hold = false): Promise<void> {\n    return new Promise((resolve) => {\n      this.hidden = false;\n      this.show();\n\n      // Set height to auto to measure\n      this.contentEl.style.height = \"auto\";\n      this.contentEl.style.width = \"auto\";\n\n      // Add the text to measure\n      this.contentEl.textContent = text;\n\n      // Set fixed dimensions\n      const height = this.contentEl.offsetHeight;\n      const width = this.contentEl.offsetWidth;\n      this.contentEl.style.height = `${height}px`;\n      this.contentEl.style.width = `${width}px`;\n\n      // Clear text for animation\n      this.contentEl.textContent = \"\";\n\n      this.reposition();\n\n      this.completeCallback = resolve;\n      this.sayWords(text, hold);\n    });\n  }\n\n  /**\n   * Show the balloon\n   */\n  public show(): void {\n    if (this.hidden) return;\n    this.balloonEl.style.display = \"block\";\n  }\n\n  /**\n   * Hide the balloon\n   */\n  public hide(immediately = false): void {\n    if (immediately) {\n      this.balloonEl.style.display = \"none\";\n      this.hidden = true;\n      return;\n    }\n\n    this.hidingTimeout = window.setTimeout(() => {\n      this.finishHideBalloon();\n    }, this.CLOSE_BALLOON_DELAY);\n  }\n\n  /**\n   * Close the balloon\n   */\n  public close(): void {\n    if (this.active) {\n      this.hold = false;\n    } else if (this.hold && this.completeCallback) {\n      this.completeCallback();\n    }\n  }\n\n  /**\n   * Pause the balloon animation\n   */\n  public pause(): void {\n    if (this.wordTimeout) {\n      window.clearTimeout(this.wordTimeout);\n    }\n    if (this.hidingTimeout) {\n      window.clearTimeout(this.hidingTimeout);\n      this.hidingTimeout = undefined;\n    }\n  }\n\n  /**\n   * Resume the balloon animation\n   */\n  public resume(): void {\n    if (this.active) {\n      this.addWord && this.addWord();\n    } else if (!this.hold && !this.hidden) {\n      this.hidingTimeout = window.setTimeout(() => {\n        this.finishHideBalloon();\n      }, this.CLOSE_BALLOON_DELAY);\n    }\n  }\n\n  /**\n   * Reposition the balloon relative to target element\n   */\n  public reposition(): void {\n    const positions: BalloonPosition[] = [\n      \"top-left\",\n      \"top-right\",\n      \"bottom-left\",\n      \"bottom-right\",\n    ];\n\n    for (const position of positions) {\n      this.position(position);\n      if (!this.isOutOfBounds()) break;\n    }\n  }\n\n  /**\n   * Position the balloon at a specific location\n   */\n  private position(side: BalloonPosition): void {\n    const rect = this.targetEl.getBoundingClientRect();\n    const balloonHeight = this.balloonEl.offsetHeight;\n    const balloonWidth = this.balloonEl.offsetWidth;\n\n    // Remove all position classes\n    this.balloonEl.classList.remove(\n      \"clippy-top-left\",\n      \"clippy-top-right\",\n      \"clippy-bottom-left\",\n      \"clippy-bottom-right\",\n    );\n\n    let left = 0;\n    let top = 0;\n\n    switch (side) {\n      case \"top-left\":\n        left = rect.left + rect.width - balloonWidth;\n        top = rect.top - balloonHeight - this.BALLOON_MARGIN;\n        break;\n      case \"top-right\":\n        left = rect.left;\n        top = rect.top - balloonHeight - this.BALLOON_MARGIN;\n        break;\n      case \"bottom-right\":\n        left = rect.left;\n        top = rect.top + rect.height + this.BALLOON_MARGIN;\n        break;\n      case \"bottom-left\":\n        left = rect.left + rect.width - balloonWidth;\n        top = rect.top + rect.height + this.BALLOON_MARGIN;\n        break;\n    }\n\n    this.balloonEl.style.top = `${top}px`;\n    this.balloonEl.style.left = `${left}px`;\n    this.balloonEl.classList.add(`clippy-${side}`);\n  }\n\n  /**\n   * Check if balloon is out of viewport bounds\n   */\n  private isOutOfBounds(): boolean {\n    const rect = this.balloonEl.getBoundingClientRect();\n    const margin = 5;\n\n    if (rect.top - margin < 0 || rect.left - margin < 0) {\n      return true;\n    }\n\n    return (\n      rect.bottom + margin > window.innerHeight ||\n      rect.right + margin > window.innerWidth\n    );\n  }\n\n  /**\n   * Animate the words appearing in the balloon\n   */\n  private sayWords(text: string, hold: boolean): void {\n    this.active = true;\n    this.hold = hold;\n    const words = text.split(/\\s+/);\n    let currentIndex = 0;\n\n    const addNextWord = () => {\n      if (!this.active) return;\n\n      if (currentIndex >= words.length) {\n        this.active = false;\n        if (!this.hold) {\n          if (this.completeCallback) {\n            this.completeCallback();\n          }\n          this.hide();\n        }\n      } else {\n        this.contentEl.textContent = words.slice(0, currentIndex + 1).join(\" \");\n        currentIndex++;\n        this.wordTimeout = window.setTimeout(addNextWord, this.WORD_SPEAK_TIME);\n      }\n    };\n\n    this.addWord = addNextWord;\n    addNextWord();\n  }\n\n  /**\n   * Complete hiding the balloon\n   */\n  private finishHideBalloon(): void {\n    if (this.active) return;\n    this.balloonEl.style.display = \"none\";\n    this.hidden = true;\n    this.hidingTimeout = undefined;\n  }\n\n  /**\n   * Stored function for resuming word animation\n   */\n  private addWord?: () => void;\n\n  /**\n   * Destroy the balloon and clean up\n   */\n  public destroy(): void {\n    if (this.hidingTimeout) {\n      window.clearTimeout(this.hidingTimeout);\n    }\n    if (this.wordTimeout) {\n      window.clearTimeout(this.wordTimeout);\n    }\n    this.balloonEl.remove();\n  }\n}\n","/**\n * Agent class representing a Clippy character\n */\n\nimport { Queue } from './Queue';\nimport { Animator } from './Animator';\nimport { Balloon } from './Balloon';\nimport { AgentData, SoundMap, Direction, AnimationState } from './types';\n\nexport interface AgentOptions {\n  onDoubleClick?: () => void;\n}\n\nexport class Agent {\n  private path: string;\n  private element: HTMLDivElement;\n  private animator: Animator;\n  private balloon: Balloon;\n  private queue: Queue;\n\n  private hidden = false;\n  private idleDeferred?: Promise<void>;\n  private idleResolve?: () => void;\n\n  // Drag state\n  private dragOffset?: { top: number; left: number };\n  private targetX?: number;\n  private targetY?: number;\n  private dragUpdateLoop?: number;\n  private moveHandler?: (e: MouseEvent) => void;\n  private upHandler?: (e: MouseEvent) => void;\n\n  constructor(path: string, data: AgentData, sounds: SoundMap, options?: AgentOptions) {\n    this.path = path;\n\n    // Create agent element\n    this.element = document.createElement('div');\n    this.element.className = 'clippy';\n    this.element.style.display = 'none';\n    this.element.style.position = 'fixed';\n    this.element.style.zIndex = '9999';\n    document.body.appendChild(this.element);\n\n    // Initialize components\n    this.queue = new Queue(() => this.onQueueEmpty());\n    this.animator = new Animator(this.element, path, data, sounds);\n    this.balloon = new Balloon(this.element);\n\n    // Set up event handlers\n    this.setupEvents(options);\n  }\n\n  /**\n   * Show the agent with optional animation\n   */\n  public async show(fast = false): Promise<void> {\n    this.hidden = false;\n\n    if (fast) {\n      this.element.style.display = 'block';\n      this.resume();\n      this.onQueueEmpty();\n      return Promise.resolve();\n    }\n\n    // Position the agent if not already positioned\n    if (this.element.style.top === 'auto' || this.element.style.left === 'auto') {\n      const left = window.innerWidth * 0.8;\n      const top = (window.innerHeight + window.scrollY) * 0.8;\n      this.element.style.left = `${left}px`;\n      this.element.style.top = `${top}px`;\n    }\n\n    this.element.style.display = 'block';\n    this.resume();\n    return this.play('Show');\n  }\n\n  /**\n   * Hide the agent with optional animation\n   */\n  public async hide(fast = false): Promise<void> {\n    this.hidden = true;\n    this.stop();\n\n    if (fast) {\n      this.element.style.display = 'none';\n      this.pause();\n      return Promise.resolve();\n    }\n\n    return new Promise((resolve) => {\n      this.playInternal('Hide', (name, state) => {\n        if (state === Animator.States.EXITED) {\n          this.element.style.display = 'none';\n          this.pause();\n          resolve();\n        }\n      });\n    });\n  }\n\n  /**\n   * Play an animation\n   */\n  public play(animation: string, timeout = 5000): Promise<void> {\n    if (!this.hasAnimation(animation)) {\n      return Promise.reject(new Error(`Animation \"${animation}\" not found`));\n    }\n\n    return new Promise((resolve) => {\n      this.queue.enqueue((complete) => {\n        let completed = false;\n        const callback = (name: string, state: AnimationState) => {\n          if (state === Animator.States.EXITED) {\n            completed = true;\n            resolve();\n            complete();\n          }\n        };\n\n        // Set timeout if specified\n        if (timeout) {\n          window.setTimeout(() => {\n            if (completed) return;\n            this.animator.exitAnimation();\n          }, timeout);\n        }\n\n        this.playInternal(animation, callback);\n      });\n    });\n  }\n\n  /**\n   * Speak text in a balloon\n   */\n  public speak(text: string, hold = false): Promise<void> {\n    return new Promise((resolve) => {\n      this.queue.enqueue(async (complete) => {\n        await this.balloon.speak(text, hold);\n        complete();\n        resolve();\n      });\n    });\n  }\n\n  /**\n   * Close the current balloon\n   */\n  public closeBalloon(): void {\n    this.balloon.hide();\n  }\n\n  /**\n   * Move to a position\n   */\n  public moveTo(x: number, y: number, duration = 1000): Promise<void> {\n    const direction = this.getDirection(x, y);\n    const animation = `Move${direction}`;\n\n    return new Promise((resolve) => {\n      this.queue.enqueue((complete) => {\n        // Simple case - instant move\n        if (duration === 0) {\n          this.element.style.left = `${x}px`;\n          this.element.style.top = `${y}px`;\n          this.reposition();\n          complete();\n          resolve();\n          return;\n        }\n\n        // No animation available - use CSS transition\n        if (!this.hasAnimation(animation)) {\n          this.animatePosition(x, y, duration, () => {\n            complete();\n            resolve();\n          });\n          return;\n        }\n\n        // Use animation\n        const callback = (name: string, state: AnimationState) => {\n          if (state === Animator.States.EXITED) {\n            complete();\n            resolve();\n          } else if (state === Animator.States.WAITING) {\n            this.animatePosition(x, y, duration, () => {\n              this.animator.exitAnimation();\n            });\n          }\n        };\n\n        this.playInternal(animation, callback);\n      });\n    });\n  }\n\n  /**\n   * Gesture at a position\n   */\n  public async gestureAt(x: number, y: number): Promise<void> {\n    const direction = this.getDirection(x, y);\n    const gestureAnim = `Gesture${direction}`;\n    const lookAnim = `Look${direction}`;\n\n    const animation = this.hasAnimation(gestureAnim) ? gestureAnim : lookAnim;\n    return this.play(animation);\n  }\n\n  /**\n   * Play a random animation\n   */\n  public async animate(): Promise<void> {\n    const animations = this.getAnimations();\n    const nonIdleAnimations = animations.filter(a => !a.startsWith('Idle'));\n\n    if (nonIdleAnimations.length === 0) {\n      return Promise.resolve();\n    }\n\n    const randomAnimation = nonIdleAnimations[Math.floor(Math.random() * nonIdleAnimations.length)];\n    return this.play(randomAnimation);\n  }\n\n  /**\n   * Add delay to the queue\n   */\n  public delay(time = 250): Promise<void> {\n    return new Promise((resolve) => {\n      this.queue.enqueue((complete) => {\n        this.onQueueEmpty();\n        window.setTimeout(() => {\n          complete();\n          resolve();\n        }, time);\n      });\n    });\n  }\n\n  /**\n   * Stop all current animations\n   */\n  public stop(): void {\n    this.queue.clear();\n    this.animator.exitAnimation();\n    this.balloon.hide();\n  }\n\n  /**\n   * Stop current animation/action\n   */\n  public stopCurrent(): void {\n    this.animator.exitAnimation();\n    this.balloon.close();\n  }\n\n  /**\n   * Pause animations\n   */\n  public pause(): void {\n    this.animator.pause();\n    this.balloon.pause();\n  }\n\n  /**\n   * Resume animations\n   */\n  public resume(): void {\n    this.animator.resume();\n    this.balloon.resume();\n  }\n\n  /**\n   * Check if animation exists\n   */\n  public hasAnimation(name: string): boolean {\n    return this.animator.hasAnimation(name);\n  }\n\n  /**\n   * Get list of available animations\n   */\n  public getAnimations(): string[] {\n    return this.animator.getAnimations();\n  }\n\n  /**\n   * Reposition to stay in viewport\n   */\n  public reposition(): void {\n    if (!this.isVisible()) return;\n\n    const rect = this.element.getBoundingClientRect();\n    const margin = 5;\n    let { top, left } = rect;\n\n    // Adjust position to stay in viewport\n    if (top - margin < 0) {\n      top = margin;\n    } else if (top + rect.height + margin > window.innerHeight) {\n      top = window.innerHeight - rect.height - margin;\n    }\n\n    if (left - margin < 0) {\n      left = margin;\n    } else if (left + rect.width + margin > window.innerWidth) {\n      left = window.innerWidth - rect.width - margin;\n    }\n\n    this.element.style.left = `${left}px`;\n    this.element.style.top = `${top}px`;\n\n    // Reposition balloon\n    this.balloon.reposition();\n  }\n\n  /**\n   * Destroy the agent and clean up\n   */\n  public destroy(): void {\n    this.stop();\n    window.removeEventListener('resize', this.handleResize);\n    this.element.remove();\n    this.animator.destroy();\n    this.balloon.destroy();\n  }\n\n  // Private methods\n\n  private setupEvents(options?: AgentOptions): void {\n    // Window resize\n    this.handleResize = this.handleResize.bind(this);\n    window.addEventListener('resize', this.handleResize);\n\n    // Mouse events\n    this.element.addEventListener('mousedown', (e) => this.onMouseDown(e));\n    this.element.addEventListener('dblclick', () => this.onDoubleClick(options));\n  }\n\n  private handleResize = (): void => {\n    this.reposition();\n  };\n\n  private onMouseDown(e: MouseEvent): void {\n    e.preventDefault();\n    this.startDrag(e);\n  }\n\n  private onDoubleClick(options?: AgentOptions): void {\n    if (options?.onDoubleClick) {\n      options.onDoubleClick();\n    } else if (!this.play('ClickedOn')) {\n      this.animate();\n    }\n  }\n\n  private startDrag(e: MouseEvent): void {\n    this.pause();\n    this.balloon.hide(true);\n\n    const rect = this.element.getBoundingClientRect();\n    this.dragOffset = {\n      top: e.clientY - rect.top,\n      left: e.clientX - rect.left\n    };\n\n    this.moveHandler = (e: MouseEvent) => this.dragMove(e);\n    this.upHandler = () => this.finishDrag();\n\n    window.addEventListener('mousemove', this.moveHandler);\n    window.addEventListener('mouseup', this.upHandler);\n\n    this.updateDragPosition();\n  }\n\n  private dragMove(e: MouseEvent): void {\n    e.preventDefault();\n    if (!this.dragOffset) return;\n\n    this.targetX = e.clientX - this.dragOffset.left;\n    this.targetY = e.clientY - this.dragOffset.top;\n  }\n\n  private updateDragPosition(): void {\n    if (this.targetX !== undefined && this.targetY !== undefined) {\n      this.element.style.left = `${this.targetX}px`;\n      this.element.style.top = `${this.targetY}px`;\n    }\n    this.dragUpdateLoop = window.setTimeout(() => this.updateDragPosition(), 10);\n  }\n\n  private finishDrag(): void {\n    if (this.dragUpdateLoop) {\n      window.clearTimeout(this.dragUpdateLoop);\n    }\n\n    if (this.moveHandler && this.upHandler) {\n      window.removeEventListener('mousemove', this.moveHandler);\n      window.removeEventListener('mouseup', this.upHandler);\n    }\n\n    this.balloon.show();\n    this.reposition();\n    this.resume();\n  }\n\n  private playInternal(animation: string, callback?: (name: string, state: AnimationState) => void): void {\n    // If in idle animation, wait for it to complete\n    if (this.isIdleAnimation() && this.idleDeferred) {\n      this.idleDeferred.then(() => {\n        this.playInternal(animation, callback);\n      });\n      return;\n    }\n\n    this.animator.showAnimation(animation, callback);\n  }\n\n  private onQueueEmpty(): void {\n    if (this.hidden || this.isIdleAnimation()) return;\n\n    const idleAnimation = this.getIdleAnimation();\n    this.idleDeferred = new Promise((resolve) => {\n      this.idleResolve = resolve;\n    });\n\n    this.animator.showAnimation(idleAnimation, (name, state) => {\n      if (state === Animator.States.EXITED && this.idleResolve) {\n        this.idleResolve();\n        this.idleDeferred = undefined;\n        this.idleResolve = undefined;\n      }\n    });\n  }\n\n  private isIdleAnimation(): boolean {\n    const current = this.animator.currentAnimationName;\n    return !!current && current.startsWith('Idle');\n  }\n\n  private getIdleAnimation(): string {\n    const animations = this.getAnimations();\n    const idleAnimations = animations.filter(a => a.startsWith('Idle'));\n\n    if (idleAnimations.length === 0) {\n      return animations[0] || 'Idle1';\n    }\n\n    return idleAnimations[Math.floor(Math.random() * idleAnimations.length)];\n  }\n\n  private getDirection(x: number, y: number): Direction {\n    const rect = this.element.getBoundingClientRect();\n    const centerX = rect.left + rect.width / 2;\n    const centerY = rect.top + rect.height / 2;\n\n    const a = centerY - y;\n    const b = centerX - x;\n    const angle = Math.round((180 * Math.atan2(a, b)) / Math.PI);\n\n    if (-45 <= angle && angle < 45) return 'Right';\n    if (45 <= angle && angle < 135) return 'Up';\n    if ((135 <= angle && angle <= 180) || (-180 <= angle && angle < -135)) return 'Left';\n    if (-135 <= angle && angle < -45) return 'Down';\n\n    return 'Up'; // Default\n  }\n\n  private animatePosition(x: number, y: number, duration: number, callback: () => void): void {\n    const startX = parseInt(this.element.style.left) || 0;\n    const startY = parseInt(this.element.style.top) || 0;\n    const startTime = Date.now();\n\n    const animate = () => {\n      const elapsed = Date.now() - startTime;\n      const progress = Math.min(elapsed / duration, 1);\n\n      const currentX = startX + (x - startX) * progress;\n      const currentY = startY + (y - startY) * progress;\n\n      this.element.style.left = `${currentX}px`;\n      this.element.style.top = `${currentY}px`;\n\n      if (progress < 1) {\n        requestAnimationFrame(animate);\n      } else {\n        callback();\n      }\n    };\n\n    animate();\n  }\n\n  private isVisible(): boolean {\n    return this.element.style.display !== 'none';\n  }\n}","/**\n * Modern Promise-based loader for Clippy agents\n */\n\nimport { Agent } from './Agent';\nimport { AgentData, SoundMap, LoadOptions } from './types';\n\n// Global registry for loaded data\nconst loadedMaps: Map<string, Promise<void>> = new Map();\nconst loadedSounds: Map<string, Promise<SoundMap>> = new Map();\nconst loadedData: Map<string, Promise<AgentData>> = new Map();\n\n// Callbacks for JSONP-style loading\nconst dataCallbacks: Map<string, (data: AgentData) => void> = new Map();\nconst soundCallbacks: Map<string, (sounds: SoundMap) => void> = new Map();\n\n/**\n * Load a Clippy agent\n */\nexport async function load(name: string, options?: LoadOptions): Promise<Agent> {\n  const basePath = options?.basePath ||\n    (window as any).CLIPPY_CDN ||\n    'https://gitcdn.xyz/repo/pi0/clippyjs/master/assets/agents/';\n\n  const path = `${basePath}${name}`;\n\n  // Load all resources in parallel\n  const [, agentData, sounds] = await Promise.all([\n    loadMap(path),\n    loadAgentData(name, path),\n    loadSounds(name, path)\n  ]);\n\n  return new Agent(path, agentData, sounds);\n}\n\n/**\n * Load the sprite map image\n */\nasync function loadMap(path: string): Promise<void> {\n  // Check if already loading/loaded\n  const existing = loadedMaps.get(path);\n  if (existing) return existing;\n\n  const promise = new Promise<void>((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => resolve();\n    img.onerror = () => reject(new Error(`Failed to load map: ${path}/map.png`));\n    img.src = `${path}/map.png`;\n  });\n\n  loadedMaps.set(path, promise);\n  return promise;\n}\n\n/**\n * Load agent animation data\n */\nasync function loadAgentData(name: string, path: string): Promise<AgentData> {\n  // Check if already loading/loaded\n  const existing = loadedData.get(name);\n  if (existing) return existing;\n\n  const promise = new Promise<AgentData>((resolve, reject) => {\n    // Set up callback for JSONP-style loading\n    dataCallbacks.set(name, resolve);\n\n    // Create and load script\n    const script = document.createElement('script');\n    script.src = `${path}/agent.js`;\n    script.async = true;\n    script.onerror = () => {\n      dataCallbacks.delete(name);\n      reject(new Error(`Failed to load agent data: ${path}/agent.js`));\n    };\n\n    document.head.appendChild(script);\n  });\n\n  loadedData.set(name, promise);\n  return promise;\n}\n\n/**\n * Load agent sounds\n */\nasync function loadSounds(name: string, path: string): Promise<SoundMap> {\n  // Check if already loading/loaded\n  const existing = loadedSounds.get(name);\n  if (existing) return existing;\n\n  const promise = new Promise<SoundMap>((resolve, reject) => {\n    // Check audio support\n    const audio = document.createElement('audio');\n    const canPlayMp3 = !!audio.canPlayType && audio.canPlayType('audio/mpeg') !== '';\n    const canPlayOgg = !!audio.canPlayType && audio.canPlayType('audio/ogg; codecs=\"vorbis\"') !== '';\n\n    if (!canPlayMp3 && !canPlayOgg) {\n      resolve({});\n      return;\n    }\n\n    // Set up callback for JSONP-style loading\n    soundCallbacks.set(name, resolve);\n\n    // Load appropriate sound format\n    const soundFile = canPlayMp3 ? 'sounds-mp3.js' : 'sounds-ogg.js';\n    const script = document.createElement('script');\n    script.src = `${path}/${soundFile}`;\n    script.async = true;\n    script.onerror = () => {\n      soundCallbacks.delete(name);\n      // Don't reject on sound load failure, just return empty\n      resolve({});\n    };\n\n    document.head.appendChild(script);\n  });\n\n  loadedSounds.set(name, promise);\n  return promise;\n}\n\n/**\n * Called by agent.js files to provide data (JSONP-style)\n * This maintains backward compatibility with existing agent files\n */\nexport function ready(name: string, data: AgentData): void {\n  const callback = dataCallbacks.get(name);\n  if (callback) {\n    callback(data);\n    dataCallbacks.delete(name);\n  }\n}\n\n/**\n * Called by sounds-*.js files to provide sound data (JSONP-style)\n * This maintains backward compatibility with existing sound files\n */\nexport function soundsReady(name: string, sounds: SoundMap): void {\n  const callback = soundCallbacks.get(name);\n  if (callback) {\n    callback(sounds);\n    soundCallbacks.delete(name);\n  }\n}\n\n// Expose ready functions globally for backward compatibility\nif (typeof window !== 'undefined') {\n  (window as any).clippy = {\n    ...((window as any).clippy || {}),\n    ready,\n    soundsReady\n  };\n}","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","/**\n * @license React\n * react-jsx-runtime.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n'use strict';\n\nvar React = require('react');\n\n// ATTENTION\n// When adding new symbols to this file,\n// Please consider also adding to 'react-devtools-shared/src/backend/ReactSymbols'\n// The Symbol used to tag the ReactElement-like types.\nvar REACT_ELEMENT_TYPE = Symbol.for('react.element');\nvar REACT_PORTAL_TYPE = Symbol.for('react.portal');\nvar REACT_FRAGMENT_TYPE = Symbol.for('react.fragment');\nvar REACT_STRICT_MODE_TYPE = Symbol.for('react.strict_mode');\nvar REACT_PROFILER_TYPE = Symbol.for('react.profiler');\nvar REACT_PROVIDER_TYPE = Symbol.for('react.provider');\nvar REACT_CONTEXT_TYPE = Symbol.for('react.context');\nvar REACT_FORWARD_REF_TYPE = Symbol.for('react.forward_ref');\nvar REACT_SUSPENSE_TYPE = Symbol.for('react.suspense');\nvar REACT_SUSPENSE_LIST_TYPE = Symbol.for('react.suspense_list');\nvar REACT_MEMO_TYPE = Symbol.for('react.memo');\nvar REACT_LAZY_TYPE = Symbol.for('react.lazy');\nvar REACT_OFFSCREEN_TYPE = Symbol.for('react.offscreen');\nvar MAYBE_ITERATOR_SYMBOL = Symbol.iterator;\nvar FAUX_ITERATOR_SYMBOL = '@@iterator';\nfunction getIteratorFn(maybeIterable) {\n  if (maybeIterable === null || typeof maybeIterable !== 'object') {\n    return null;\n  }\n\n  var maybeIterator = MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL];\n\n  if (typeof maybeIterator === 'function') {\n    return maybeIterator;\n  }\n\n  return null;\n}\n\nvar ReactSharedInternals = React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n\nfunction error(format) {\n  {\n    {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      printWarning('error', format, args);\n    }\n  }\n}\n\nfunction printWarning(level, format, args) {\n  // When changing this logic, you might want to also\n  // update consoleWithStackDev.www.js as well.\n  {\n    var ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n    var stack = ReactDebugCurrentFrame.getStackAddendum();\n\n    if (stack !== '') {\n      format += '%s';\n      args = args.concat([stack]);\n    } // eslint-disable-next-line react-internal/safe-string-coercion\n\n\n    var argsWithFormat = args.map(function (item) {\n      return String(item);\n    }); // Careful: RN currently depends on this prefix\n\n    argsWithFormat.unshift('Warning: ' + format); // We intentionally don't use spread (or .apply) directly because it\n    // breaks IE9: https://github.com/facebook/react/issues/13610\n    // eslint-disable-next-line react-internal/no-production-logging\n\n    Function.prototype.apply.call(console[level], console, argsWithFormat);\n  }\n}\n\n// -----------------------------------------------------------------------------\n\nvar enableScopeAPI = false; // Experimental Create Event Handle API.\nvar enableCacheElement = false;\nvar enableTransitionTracing = false; // No known bugs, but needs performance testing\n\nvar enableLegacyHidden = false; // Enables unstable_avoidThisFallback feature in Fiber\n// stuff. Intended to enable React core members to more easily debug scheduling\n// issues in DEV builds.\n\nvar enableDebugTracing = false; // Track which Fiber(s) schedule render work.\n\nvar REACT_MODULE_REFERENCE;\n\n{\n  REACT_MODULE_REFERENCE = Symbol.for('react.module.reference');\n}\n\nfunction isValidElementType(type) {\n  if (typeof type === 'string' || typeof type === 'function') {\n    return true;\n  } // Note: typeof might be other than 'symbol' or 'number' (e.g. if it's a polyfill).\n\n\n  if (type === REACT_FRAGMENT_TYPE || type === REACT_PROFILER_TYPE || enableDebugTracing  || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || enableLegacyHidden  || type === REACT_OFFSCREEN_TYPE || enableScopeAPI  || enableCacheElement  || enableTransitionTracing ) {\n    return true;\n  }\n\n  if (typeof type === 'object' && type !== null) {\n    if (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || // This needs to include all possible module reference object\n    // types supported by any Flight configuration anywhere since\n    // we don't know which Flight build this will end up being used\n    // with.\n    type.$$typeof === REACT_MODULE_REFERENCE || type.getModuleId !== undefined) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction getWrappedName(outerType, innerType, wrapperName) {\n  var displayName = outerType.displayName;\n\n  if (displayName) {\n    return displayName;\n  }\n\n  var functionName = innerType.displayName || innerType.name || '';\n  return functionName !== '' ? wrapperName + \"(\" + functionName + \")\" : wrapperName;\n} // Keep in sync with react-reconciler/getComponentNameFromFiber\n\n\nfunction getContextName(type) {\n  return type.displayName || 'Context';\n} // Note that the reconciler package should generally prefer to use getComponentNameFromFiber() instead.\n\n\nfunction getComponentNameFromType(type) {\n  if (type == null) {\n    // Host root, text node or just invalid type.\n    return null;\n  }\n\n  {\n    if (typeof type.tag === 'number') {\n      error('Received an unexpected object in getComponentNameFromType(). ' + 'This is likely a bug in React. Please file an issue.');\n    }\n  }\n\n  if (typeof type === 'function') {\n    return type.displayName || type.name || null;\n  }\n\n  if (typeof type === 'string') {\n    return type;\n  }\n\n  switch (type) {\n    case REACT_FRAGMENT_TYPE:\n      return 'Fragment';\n\n    case REACT_PORTAL_TYPE:\n      return 'Portal';\n\n    case REACT_PROFILER_TYPE:\n      return 'Profiler';\n\n    case REACT_STRICT_MODE_TYPE:\n      return 'StrictMode';\n\n    case REACT_SUSPENSE_TYPE:\n      return 'Suspense';\n\n    case REACT_SUSPENSE_LIST_TYPE:\n      return 'SuspenseList';\n\n  }\n\n  if (typeof type === 'object') {\n    switch (type.$$typeof) {\n      case REACT_CONTEXT_TYPE:\n        var context = type;\n        return getContextName(context) + '.Consumer';\n\n      case REACT_PROVIDER_TYPE:\n        var provider = type;\n        return getContextName(provider._context) + '.Provider';\n\n      case REACT_FORWARD_REF_TYPE:\n        return getWrappedName(type, type.render, 'ForwardRef');\n\n      case REACT_MEMO_TYPE:\n        var outerName = type.displayName || null;\n\n        if (outerName !== null) {\n          return outerName;\n        }\n\n        return getComponentNameFromType(type.type) || 'Memo';\n\n      case REACT_LAZY_TYPE:\n        {\n          var lazyComponent = type;\n          var payload = lazyComponent._payload;\n          var init = lazyComponent._init;\n\n          try {\n            return getComponentNameFromType(init(payload));\n          } catch (x) {\n            return null;\n          }\n        }\n\n      // eslint-disable-next-line no-fallthrough\n    }\n  }\n\n  return null;\n}\n\nvar assign = Object.assign;\n\n// Helpers to patch console.logs to avoid logging during side-effect free\n// replaying on render function. This currently only patches the object\n// lazily which won't cover if the log function was extracted eagerly.\n// We could also eagerly patch the method.\nvar disabledDepth = 0;\nvar prevLog;\nvar prevInfo;\nvar prevWarn;\nvar prevError;\nvar prevGroup;\nvar prevGroupCollapsed;\nvar prevGroupEnd;\n\nfunction disabledLog() {}\n\ndisabledLog.__reactDisabledLog = true;\nfunction disableLogs() {\n  {\n    if (disabledDepth === 0) {\n      /* eslint-disable react-internal/no-production-logging */\n      prevLog = console.log;\n      prevInfo = console.info;\n      prevWarn = console.warn;\n      prevError = console.error;\n      prevGroup = console.group;\n      prevGroupCollapsed = console.groupCollapsed;\n      prevGroupEnd = console.groupEnd; // https://github.com/facebook/react/issues/19099\n\n      var props = {\n        configurable: true,\n        enumerable: true,\n        value: disabledLog,\n        writable: true\n      }; // $FlowFixMe Flow thinks console is immutable.\n\n      Object.defineProperties(console, {\n        info: props,\n        log: props,\n        warn: props,\n        error: props,\n        group: props,\n        groupCollapsed: props,\n        groupEnd: props\n      });\n      /* eslint-enable react-internal/no-production-logging */\n    }\n\n    disabledDepth++;\n  }\n}\nfunction reenableLogs() {\n  {\n    disabledDepth--;\n\n    if (disabledDepth === 0) {\n      /* eslint-disable react-internal/no-production-logging */\n      var props = {\n        configurable: true,\n        enumerable: true,\n        writable: true\n      }; // $FlowFixMe Flow thinks console is immutable.\n\n      Object.defineProperties(console, {\n        log: assign({}, props, {\n          value: prevLog\n        }),\n        info: assign({}, props, {\n          value: prevInfo\n        }),\n        warn: assign({}, props, {\n          value: prevWarn\n        }),\n        error: assign({}, props, {\n          value: prevError\n        }),\n        group: assign({}, props, {\n          value: prevGroup\n        }),\n        groupCollapsed: assign({}, props, {\n          value: prevGroupCollapsed\n        }),\n        groupEnd: assign({}, props, {\n          value: prevGroupEnd\n        })\n      });\n      /* eslint-enable react-internal/no-production-logging */\n    }\n\n    if (disabledDepth < 0) {\n      error('disabledDepth fell below zero. ' + 'This is a bug in React. Please file an issue.');\n    }\n  }\n}\n\nvar ReactCurrentDispatcher = ReactSharedInternals.ReactCurrentDispatcher;\nvar prefix;\nfunction describeBuiltInComponentFrame(name, source, ownerFn) {\n  {\n    if (prefix === undefined) {\n      // Extract the VM specific prefix used by each line.\n      try {\n        throw Error();\n      } catch (x) {\n        var match = x.stack.trim().match(/\\n( *(at )?)/);\n        prefix = match && match[1] || '';\n      }\n    } // We use the prefix to ensure our stacks line up with native stack frames.\n\n\n    return '\\n' + prefix + name;\n  }\n}\nvar reentry = false;\nvar componentFrameCache;\n\n{\n  var PossiblyWeakMap = typeof WeakMap === 'function' ? WeakMap : Map;\n  componentFrameCache = new PossiblyWeakMap();\n}\n\nfunction describeNativeComponentFrame(fn, construct) {\n  // If something asked for a stack inside a fake render, it should get ignored.\n  if ( !fn || reentry) {\n    return '';\n  }\n\n  {\n    var frame = componentFrameCache.get(fn);\n\n    if (frame !== undefined) {\n      return frame;\n    }\n  }\n\n  var control;\n  reentry = true;\n  var previousPrepareStackTrace = Error.prepareStackTrace; // $FlowFixMe It does accept undefined.\n\n  Error.prepareStackTrace = undefined;\n  var previousDispatcher;\n\n  {\n    previousDispatcher = ReactCurrentDispatcher.current; // Set the dispatcher in DEV because this might be call in the render function\n    // for warnings.\n\n    ReactCurrentDispatcher.current = null;\n    disableLogs();\n  }\n\n  try {\n    // This should throw.\n    if (construct) {\n      // Something should be setting the props in the constructor.\n      var Fake = function () {\n        throw Error();\n      }; // $FlowFixMe\n\n\n      Object.defineProperty(Fake.prototype, 'props', {\n        set: function () {\n          // We use a throwing setter instead of frozen or non-writable props\n          // because that won't throw in a non-strict mode function.\n          throw Error();\n        }\n      });\n\n      if (typeof Reflect === 'object' && Reflect.construct) {\n        // We construct a different control for this case to include any extra\n        // frames added by the construct call.\n        try {\n          Reflect.construct(Fake, []);\n        } catch (x) {\n          control = x;\n        }\n\n        Reflect.construct(fn, [], Fake);\n      } else {\n        try {\n          Fake.call();\n        } catch (x) {\n          control = x;\n        }\n\n        fn.call(Fake.prototype);\n      }\n    } else {\n      try {\n        throw Error();\n      } catch (x) {\n        control = x;\n      }\n\n      fn();\n    }\n  } catch (sample) {\n    // This is inlined manually because closure doesn't do it for us.\n    if (sample && control && typeof sample.stack === 'string') {\n      // This extracts the first frame from the sample that isn't also in the control.\n      // Skipping one frame that we assume is the frame that calls the two.\n      var sampleLines = sample.stack.split('\\n');\n      var controlLines = control.stack.split('\\n');\n      var s = sampleLines.length - 1;\n      var c = controlLines.length - 1;\n\n      while (s >= 1 && c >= 0 && sampleLines[s] !== controlLines[c]) {\n        // We expect at least one stack frame to be shared.\n        // Typically this will be the root most one. However, stack frames may be\n        // cut off due to maximum stack limits. In this case, one maybe cut off\n        // earlier than the other. We assume that the sample is longer or the same\n        // and there for cut off earlier. So we should find the root most frame in\n        // the sample somewhere in the control.\n        c--;\n      }\n\n      for (; s >= 1 && c >= 0; s--, c--) {\n        // Next we find the first one that isn't the same which should be the\n        // frame that called our sample function and the control.\n        if (sampleLines[s] !== controlLines[c]) {\n          // In V8, the first line is describing the message but other VMs don't.\n          // If we're about to return the first line, and the control is also on the same\n          // line, that's a pretty good indicator that our sample threw at same line as\n          // the control. I.e. before we entered the sample frame. So we ignore this result.\n          // This can happen if you passed a class to function component, or non-function.\n          if (s !== 1 || c !== 1) {\n            do {\n              s--;\n              c--; // We may still have similar intermediate frames from the construct call.\n              // The next one that isn't the same should be our match though.\n\n              if (c < 0 || sampleLines[s] !== controlLines[c]) {\n                // V8 adds a \"new\" prefix for native classes. Let's remove it to make it prettier.\n                var _frame = '\\n' + sampleLines[s].replace(' at new ', ' at '); // If our component frame is labeled \"<anonymous>\"\n                // but we have a user-provided \"displayName\"\n                // splice it in to make the stack more readable.\n\n\n                if (fn.displayName && _frame.includes('<anonymous>')) {\n                  _frame = _frame.replace('<anonymous>', fn.displayName);\n                }\n\n                {\n                  if (typeof fn === 'function') {\n                    componentFrameCache.set(fn, _frame);\n                  }\n                } // Return the line we found.\n\n\n                return _frame;\n              }\n            } while (s >= 1 && c >= 0);\n          }\n\n          break;\n        }\n      }\n    }\n  } finally {\n    reentry = false;\n\n    {\n      ReactCurrentDispatcher.current = previousDispatcher;\n      reenableLogs();\n    }\n\n    Error.prepareStackTrace = previousPrepareStackTrace;\n  } // Fallback to just using the name if we couldn't make it throw.\n\n\n  var name = fn ? fn.displayName || fn.name : '';\n  var syntheticFrame = name ? describeBuiltInComponentFrame(name) : '';\n\n  {\n    if (typeof fn === 'function') {\n      componentFrameCache.set(fn, syntheticFrame);\n    }\n  }\n\n  return syntheticFrame;\n}\nfunction describeFunctionComponentFrame(fn, source, ownerFn) {\n  {\n    return describeNativeComponentFrame(fn, false);\n  }\n}\n\nfunction shouldConstruct(Component) {\n  var prototype = Component.prototype;\n  return !!(prototype && prototype.isReactComponent);\n}\n\nfunction describeUnknownElementTypeFrameInDEV(type, source, ownerFn) {\n\n  if (type == null) {\n    return '';\n  }\n\n  if (typeof type === 'function') {\n    {\n      return describeNativeComponentFrame(type, shouldConstruct(type));\n    }\n  }\n\n  if (typeof type === 'string') {\n    return describeBuiltInComponentFrame(type);\n  }\n\n  switch (type) {\n    case REACT_SUSPENSE_TYPE:\n      return describeBuiltInComponentFrame('Suspense');\n\n    case REACT_SUSPENSE_LIST_TYPE:\n      return describeBuiltInComponentFrame('SuspenseList');\n  }\n\n  if (typeof type === 'object') {\n    switch (type.$$typeof) {\n      case REACT_FORWARD_REF_TYPE:\n        return describeFunctionComponentFrame(type.render);\n\n      case REACT_MEMO_TYPE:\n        // Memo may contain any component type so we recursively resolve it.\n        return describeUnknownElementTypeFrameInDEV(type.type, source, ownerFn);\n\n      case REACT_LAZY_TYPE:\n        {\n          var lazyComponent = type;\n          var payload = lazyComponent._payload;\n          var init = lazyComponent._init;\n\n          try {\n            // Lazy may contain any component type so we recursively resolve it.\n            return describeUnknownElementTypeFrameInDEV(init(payload), source, ownerFn);\n          } catch (x) {}\n        }\n    }\n  }\n\n  return '';\n}\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar loggedTypeFailures = {};\nvar ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n\nfunction setCurrentlyValidatingElement(element) {\n  {\n    if (element) {\n      var owner = element._owner;\n      var stack = describeUnknownElementTypeFrameInDEV(element.type, element._source, owner ? owner.type : null);\n      ReactDebugCurrentFrame.setExtraStackFrame(stack);\n    } else {\n      ReactDebugCurrentFrame.setExtraStackFrame(null);\n    }\n  }\n}\n\nfunction checkPropTypes(typeSpecs, values, location, componentName, element) {\n  {\n    // $FlowFixMe This is okay but Flow doesn't know it.\n    var has = Function.call.bind(hasOwnProperty);\n\n    for (var typeSpecName in typeSpecs) {\n      if (has(typeSpecs, typeSpecName)) {\n        var error$1 = void 0; // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            // eslint-disable-next-line react-internal/prod-error-codes\n            var err = Error((componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' + 'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.' + 'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.');\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n\n          error$1 = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED');\n        } catch (ex) {\n          error$1 = ex;\n        }\n\n        if (error$1 && !(error$1 instanceof Error)) {\n          setCurrentlyValidatingElement(element);\n\n          error('%s: type specification of %s' + ' `%s` is invalid; the type checker ' + 'function must return `null` or an `Error` but returned a %s. ' + 'You may have forgotten to pass an argument to the type checker ' + 'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' + 'shape all require an argument).', componentName || 'React class', location, typeSpecName, typeof error$1);\n\n          setCurrentlyValidatingElement(null);\n        }\n\n        if (error$1 instanceof Error && !(error$1.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error$1.message] = true;\n          setCurrentlyValidatingElement(element);\n\n          error('Failed %s type: %s', location, error$1.message);\n\n          setCurrentlyValidatingElement(null);\n        }\n      }\n    }\n  }\n}\n\nvar isArrayImpl = Array.isArray; // eslint-disable-next-line no-redeclare\n\nfunction isArray(a) {\n  return isArrayImpl(a);\n}\n\n/*\n * The `'' + value` pattern (used in in perf-sensitive code) throws for Symbol\n * and Temporal.* types. See https://github.com/facebook/react/pull/22064.\n *\n * The functions in this module will throw an easier-to-understand,\n * easier-to-debug exception with a clear errors message message explaining the\n * problem. (Instead of a confusing exception thrown inside the implementation\n * of the `value` object).\n */\n// $FlowFixMe only called in DEV, so void return is not possible.\nfunction typeName(value) {\n  {\n    // toStringTag is needed for namespaced types like Temporal.Instant\n    var hasToStringTag = typeof Symbol === 'function' && Symbol.toStringTag;\n    var type = hasToStringTag && value[Symbol.toStringTag] || value.constructor.name || 'Object';\n    return type;\n  }\n} // $FlowFixMe only called in DEV, so void return is not possible.\n\n\nfunction willCoercionThrow(value) {\n  {\n    try {\n      testStringCoercion(value);\n      return false;\n    } catch (e) {\n      return true;\n    }\n  }\n}\n\nfunction testStringCoercion(value) {\n  // If you ended up here by following an exception call stack, here's what's\n  // happened: you supplied an object or symbol value to React (as a prop, key,\n  // DOM attribute, CSS property, string ref, etc.) and when React tried to\n  // coerce it to a string using `'' + value`, an exception was thrown.\n  //\n  // The most common types that will cause this exception are `Symbol` instances\n  // and Temporal objects like `Temporal.Instant`. But any object that has a\n  // `valueOf` or `[Symbol.toPrimitive]` method that throws will also cause this\n  // exception. (Library authors do this to prevent users from using built-in\n  // numeric operators like `+` or comparison operators like `>=` because custom\n  // methods are needed to perform accurate arithmetic or comparison.)\n  //\n  // To fix the problem, coerce this object or symbol value to a string before\n  // passing it to React. The most reliable way is usually `String(value)`.\n  //\n  // To find which value is throwing, check the browser or debugger console.\n  // Before this exception was thrown, there should be `console.error` output\n  // that shows the type (Symbol, Temporal.PlainDate, etc.) that caused the\n  // problem and how that type was used: key, atrribute, input value prop, etc.\n  // In most cases, this console output also shows the component and its\n  // ancestor components where the exception happened.\n  //\n  // eslint-disable-next-line react-internal/safe-string-coercion\n  return '' + value;\n}\nfunction checkKeyStringCoercion(value) {\n  {\n    if (willCoercionThrow(value)) {\n      error('The provided key is an unsupported type %s.' + ' This value must be coerced to a string before before using it here.', typeName(value));\n\n      return testStringCoercion(value); // throw (to help callers find troubleshooting comments)\n    }\n  }\n}\n\nvar ReactCurrentOwner = ReactSharedInternals.ReactCurrentOwner;\nvar RESERVED_PROPS = {\n  key: true,\n  ref: true,\n  __self: true,\n  __source: true\n};\nvar specialPropKeyWarningShown;\nvar specialPropRefWarningShown;\nvar didWarnAboutStringRefs;\n\n{\n  didWarnAboutStringRefs = {};\n}\n\nfunction hasValidRef(config) {\n  {\n    if (hasOwnProperty.call(config, 'ref')) {\n      var getter = Object.getOwnPropertyDescriptor(config, 'ref').get;\n\n      if (getter && getter.isReactWarning) {\n        return false;\n      }\n    }\n  }\n\n  return config.ref !== undefined;\n}\n\nfunction hasValidKey(config) {\n  {\n    if (hasOwnProperty.call(config, 'key')) {\n      var getter = Object.getOwnPropertyDescriptor(config, 'key').get;\n\n      if (getter && getter.isReactWarning) {\n        return false;\n      }\n    }\n  }\n\n  return config.key !== undefined;\n}\n\nfunction warnIfStringRefCannotBeAutoConverted(config, self) {\n  {\n    if (typeof config.ref === 'string' && ReactCurrentOwner.current && self && ReactCurrentOwner.current.stateNode !== self) {\n      var componentName = getComponentNameFromType(ReactCurrentOwner.current.type);\n\n      if (!didWarnAboutStringRefs[componentName]) {\n        error('Component \"%s\" contains the string ref \"%s\". ' + 'Support for string refs will be removed in a future major release. ' + 'This case cannot be automatically converted to an arrow function. ' + 'We ask you to manually fix this case by using useRef() or createRef() instead. ' + 'Learn more about using refs safely here: ' + 'https://reactjs.org/link/strict-mode-string-ref', getComponentNameFromType(ReactCurrentOwner.current.type), config.ref);\n\n        didWarnAboutStringRefs[componentName] = true;\n      }\n    }\n  }\n}\n\nfunction defineKeyPropWarningGetter(props, displayName) {\n  {\n    var warnAboutAccessingKey = function () {\n      if (!specialPropKeyWarningShown) {\n        specialPropKeyWarningShown = true;\n\n        error('%s: `key` is not a prop. Trying to access it will result ' + 'in `undefined` being returned. If you need to access the same ' + 'value within the child component, you should pass it as a different ' + 'prop. (https://reactjs.org/link/special-props)', displayName);\n      }\n    };\n\n    warnAboutAccessingKey.isReactWarning = true;\n    Object.defineProperty(props, 'key', {\n      get: warnAboutAccessingKey,\n      configurable: true\n    });\n  }\n}\n\nfunction defineRefPropWarningGetter(props, displayName) {\n  {\n    var warnAboutAccessingRef = function () {\n      if (!specialPropRefWarningShown) {\n        specialPropRefWarningShown = true;\n\n        error('%s: `ref` is not a prop. Trying to access it will result ' + 'in `undefined` being returned. If you need to access the same ' + 'value within the child component, you should pass it as a different ' + 'prop. (https://reactjs.org/link/special-props)', displayName);\n      }\n    };\n\n    warnAboutAccessingRef.isReactWarning = true;\n    Object.defineProperty(props, 'ref', {\n      get: warnAboutAccessingRef,\n      configurable: true\n    });\n  }\n}\n/**\n * Factory method to create a new React element. This no longer adheres to\n * the class pattern, so do not use new to call it. Also, instanceof check\n * will not work. Instead test $$typeof field against Symbol.for('react.element') to check\n * if something is a React Element.\n *\n * @param {*} type\n * @param {*} props\n * @param {*} key\n * @param {string|object} ref\n * @param {*} owner\n * @param {*} self A *temporary* helper to detect places where `this` is\n * different from the `owner` when React.createElement is called, so that we\n * can warn. We want to get rid of owner and replace string `ref`s with arrow\n * functions, and as long as `this` and owner are the same, there will be no\n * change in behavior.\n * @param {*} source An annotation object (added by a transpiler or otherwise)\n * indicating filename, line number, and/or other information.\n * @internal\n */\n\n\nvar ReactElement = function (type, key, ref, self, source, owner, props) {\n  var element = {\n    // This tag allows us to uniquely identify this as a React Element\n    $$typeof: REACT_ELEMENT_TYPE,\n    // Built-in properties that belong on the element\n    type: type,\n    key: key,\n    ref: ref,\n    props: props,\n    // Record the component responsible for creating this element.\n    _owner: owner\n  };\n\n  {\n    // The validation flag is currently mutative. We put it on\n    // an external backing store so that we can freeze the whole object.\n    // This can be replaced with a WeakMap once they are implemented in\n    // commonly used development environments.\n    element._store = {}; // To make comparing ReactElements easier for testing purposes, we make\n    // the validation flag non-enumerable (where possible, which should\n    // include every environment we run tests in), so the test framework\n    // ignores it.\n\n    Object.defineProperty(element._store, 'validated', {\n      configurable: false,\n      enumerable: false,\n      writable: true,\n      value: false\n    }); // self and source are DEV only properties.\n\n    Object.defineProperty(element, '_self', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: self\n    }); // Two elements created in two different places should be considered\n    // equal for testing purposes and therefore we hide it from enumeration.\n\n    Object.defineProperty(element, '_source', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: source\n    });\n\n    if (Object.freeze) {\n      Object.freeze(element.props);\n      Object.freeze(element);\n    }\n  }\n\n  return element;\n};\n/**\n * https://github.com/reactjs/rfcs/pull/107\n * @param {*} type\n * @param {object} props\n * @param {string} key\n */\n\nfunction jsxDEV(type, config, maybeKey, source, self) {\n  {\n    var propName; // Reserved names are extracted\n\n    var props = {};\n    var key = null;\n    var ref = null; // Currently, key can be spread in as a prop. This causes a potential\n    // issue if key is also explicitly declared (ie. <div {...props} key=\"Hi\" />\n    // or <div key=\"Hi\" {...props} /> ). We want to deprecate key spread,\n    // but as an intermediary step, we will use jsxDEV for everything except\n    // <div {...props} key=\"Hi\" />, because we aren't currently able to tell if\n    // key is explicitly declared to be undefined or not.\n\n    if (maybeKey !== undefined) {\n      {\n        checkKeyStringCoercion(maybeKey);\n      }\n\n      key = '' + maybeKey;\n    }\n\n    if (hasValidKey(config)) {\n      {\n        checkKeyStringCoercion(config.key);\n      }\n\n      key = '' + config.key;\n    }\n\n    if (hasValidRef(config)) {\n      ref = config.ref;\n      warnIfStringRefCannotBeAutoConverted(config, self);\n    } // Remaining properties are added to a new props object\n\n\n    for (propName in config) {\n      if (hasOwnProperty.call(config, propName) && !RESERVED_PROPS.hasOwnProperty(propName)) {\n        props[propName] = config[propName];\n      }\n    } // Resolve default props\n\n\n    if (type && type.defaultProps) {\n      var defaultProps = type.defaultProps;\n\n      for (propName in defaultProps) {\n        if (props[propName] === undefined) {\n          props[propName] = defaultProps[propName];\n        }\n      }\n    }\n\n    if (key || ref) {\n      var displayName = typeof type === 'function' ? type.displayName || type.name || 'Unknown' : type;\n\n      if (key) {\n        defineKeyPropWarningGetter(props, displayName);\n      }\n\n      if (ref) {\n        defineRefPropWarningGetter(props, displayName);\n      }\n    }\n\n    return ReactElement(type, key, ref, self, source, ReactCurrentOwner.current, props);\n  }\n}\n\nvar ReactCurrentOwner$1 = ReactSharedInternals.ReactCurrentOwner;\nvar ReactDebugCurrentFrame$1 = ReactSharedInternals.ReactDebugCurrentFrame;\n\nfunction setCurrentlyValidatingElement$1(element) {\n  {\n    if (element) {\n      var owner = element._owner;\n      var stack = describeUnknownElementTypeFrameInDEV(element.type, element._source, owner ? owner.type : null);\n      ReactDebugCurrentFrame$1.setExtraStackFrame(stack);\n    } else {\n      ReactDebugCurrentFrame$1.setExtraStackFrame(null);\n    }\n  }\n}\n\nvar propTypesMisspellWarningShown;\n\n{\n  propTypesMisspellWarningShown = false;\n}\n/**\n * Verifies the object is a ReactElement.\n * See https://reactjs.org/docs/react-api.html#isvalidelement\n * @param {?object} object\n * @return {boolean} True if `object` is a ReactElement.\n * @final\n */\n\n\nfunction isValidElement(object) {\n  {\n    return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n  }\n}\n\nfunction getDeclarationErrorAddendum() {\n  {\n    if (ReactCurrentOwner$1.current) {\n      var name = getComponentNameFromType(ReactCurrentOwner$1.current.type);\n\n      if (name) {\n        return '\\n\\nCheck the render method of `' + name + '`.';\n      }\n    }\n\n    return '';\n  }\n}\n\nfunction getSourceInfoErrorAddendum(source) {\n  {\n    if (source !== undefined) {\n      var fileName = source.fileName.replace(/^.*[\\\\\\/]/, '');\n      var lineNumber = source.lineNumber;\n      return '\\n\\nCheck your code at ' + fileName + ':' + lineNumber + '.';\n    }\n\n    return '';\n  }\n}\n/**\n * Warn if there's no key explicitly set on dynamic arrays of children or\n * object keys are not valid. This allows us to keep track of children between\n * updates.\n */\n\n\nvar ownerHasKeyUseWarning = {};\n\nfunction getCurrentComponentErrorInfo(parentType) {\n  {\n    var info = getDeclarationErrorAddendum();\n\n    if (!info) {\n      var parentName = typeof parentType === 'string' ? parentType : parentType.displayName || parentType.name;\n\n      if (parentName) {\n        info = \"\\n\\nCheck the top-level render call using <\" + parentName + \">.\";\n      }\n    }\n\n    return info;\n  }\n}\n/**\n * Warn if the element doesn't have an explicit key assigned to it.\n * This element is in an array. The array could grow and shrink or be\n * reordered. All children that haven't already been validated are required to\n * have a \"key\" property assigned to it. Error statuses are cached so a warning\n * will only be shown once.\n *\n * @internal\n * @param {ReactElement} element Element that requires a key.\n * @param {*} parentType element's parent's type.\n */\n\n\nfunction validateExplicitKey(element, parentType) {\n  {\n    if (!element._store || element._store.validated || element.key != null) {\n      return;\n    }\n\n    element._store.validated = true;\n    var currentComponentErrorInfo = getCurrentComponentErrorInfo(parentType);\n\n    if (ownerHasKeyUseWarning[currentComponentErrorInfo]) {\n      return;\n    }\n\n    ownerHasKeyUseWarning[currentComponentErrorInfo] = true; // Usually the current owner is the offender, but if it accepts children as a\n    // property, it may be the creator of the child that's responsible for\n    // assigning it a key.\n\n    var childOwner = '';\n\n    if (element && element._owner && element._owner !== ReactCurrentOwner$1.current) {\n      // Give the component that originally created this child.\n      childOwner = \" It was passed a child from \" + getComponentNameFromType(element._owner.type) + \".\";\n    }\n\n    setCurrentlyValidatingElement$1(element);\n\n    error('Each child in a list should have a unique \"key\" prop.' + '%s%s See https://reactjs.org/link/warning-keys for more information.', currentComponentErrorInfo, childOwner);\n\n    setCurrentlyValidatingElement$1(null);\n  }\n}\n/**\n * Ensure that every element either is passed in a static location, in an\n * array with an explicit keys property defined, or in an object literal\n * with valid key property.\n *\n * @internal\n * @param {ReactNode} node Statically passed child of any type.\n * @param {*} parentType node's parent's type.\n */\n\n\nfunction validateChildKeys(node, parentType) {\n  {\n    if (typeof node !== 'object') {\n      return;\n    }\n\n    if (isArray(node)) {\n      for (var i = 0; i < node.length; i++) {\n        var child = node[i];\n\n        if (isValidElement(child)) {\n          validateExplicitKey(child, parentType);\n        }\n      }\n    } else if (isValidElement(node)) {\n      // This element was passed in a valid location.\n      if (node._store) {\n        node._store.validated = true;\n      }\n    } else if (node) {\n      var iteratorFn = getIteratorFn(node);\n\n      if (typeof iteratorFn === 'function') {\n        // Entry iterators used to provide implicit keys,\n        // but now we print a separate warning for them later.\n        if (iteratorFn !== node.entries) {\n          var iterator = iteratorFn.call(node);\n          var step;\n\n          while (!(step = iterator.next()).done) {\n            if (isValidElement(step.value)) {\n              validateExplicitKey(step.value, parentType);\n            }\n          }\n        }\n      }\n    }\n  }\n}\n/**\n * Given an element, validate that its props follow the propTypes definition,\n * provided by the type.\n *\n * @param {ReactElement} element\n */\n\n\nfunction validatePropTypes(element) {\n  {\n    var type = element.type;\n\n    if (type === null || type === undefined || typeof type === 'string') {\n      return;\n    }\n\n    var propTypes;\n\n    if (typeof type === 'function') {\n      propTypes = type.propTypes;\n    } else if (typeof type === 'object' && (type.$$typeof === REACT_FORWARD_REF_TYPE || // Note: Memo only checks outer props here.\n    // Inner props are checked in the reconciler.\n    type.$$typeof === REACT_MEMO_TYPE)) {\n      propTypes = type.propTypes;\n    } else {\n      return;\n    }\n\n    if (propTypes) {\n      // Intentionally inside to avoid triggering lazy initializers:\n      var name = getComponentNameFromType(type);\n      checkPropTypes(propTypes, element.props, 'prop', name, element);\n    } else if (type.PropTypes !== undefined && !propTypesMisspellWarningShown) {\n      propTypesMisspellWarningShown = true; // Intentionally inside to avoid triggering lazy initializers:\n\n      var _name = getComponentNameFromType(type);\n\n      error('Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?', _name || 'Unknown');\n    }\n\n    if (typeof type.getDefaultProps === 'function' && !type.getDefaultProps.isReactClassApproved) {\n      error('getDefaultProps is only used on classic React.createClass ' + 'definitions. Use a static property named `defaultProps` instead.');\n    }\n  }\n}\n/**\n * Given a fragment, validate that it can only be provided with fragment props\n * @param {ReactElement} fragment\n */\n\n\nfunction validateFragmentProps(fragment) {\n  {\n    var keys = Object.keys(fragment.props);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n\n      if (key !== 'children' && key !== 'key') {\n        setCurrentlyValidatingElement$1(fragment);\n\n        error('Invalid prop `%s` supplied to `React.Fragment`. ' + 'React.Fragment can only have `key` and `children` props.', key);\n\n        setCurrentlyValidatingElement$1(null);\n        break;\n      }\n    }\n\n    if (fragment.ref !== null) {\n      setCurrentlyValidatingElement$1(fragment);\n\n      error('Invalid attribute `ref` supplied to `React.Fragment`.');\n\n      setCurrentlyValidatingElement$1(null);\n    }\n  }\n}\n\nvar didWarnAboutKeySpread = {};\nfunction jsxWithValidation(type, props, key, isStaticChildren, source, self) {\n  {\n    var validType = isValidElementType(type); // We warn in this case but don't throw. We expect the element creation to\n    // succeed and there will likely be errors in render.\n\n    if (!validType) {\n      var info = '';\n\n      if (type === undefined || typeof type === 'object' && type !== null && Object.keys(type).length === 0) {\n        info += ' You likely forgot to export your component from the file ' + \"it's defined in, or you might have mixed up default and named imports.\";\n      }\n\n      var sourceInfo = getSourceInfoErrorAddendum(source);\n\n      if (sourceInfo) {\n        info += sourceInfo;\n      } else {\n        info += getDeclarationErrorAddendum();\n      }\n\n      var typeString;\n\n      if (type === null) {\n        typeString = 'null';\n      } else if (isArray(type)) {\n        typeString = 'array';\n      } else if (type !== undefined && type.$$typeof === REACT_ELEMENT_TYPE) {\n        typeString = \"<\" + (getComponentNameFromType(type.type) || 'Unknown') + \" />\";\n        info = ' Did you accidentally export a JSX literal instead of a component?';\n      } else {\n        typeString = typeof type;\n      }\n\n      error('React.jsx: type is invalid -- expected a string (for ' + 'built-in components) or a class/function (for composite ' + 'components) but got: %s.%s', typeString, info);\n    }\n\n    var element = jsxDEV(type, props, key, source, self); // The result can be nullish if a mock or a custom function is used.\n    // TODO: Drop this when these are no longer allowed as the type argument.\n\n    if (element == null) {\n      return element;\n    } // Skip key warning if the type isn't valid since our key validation logic\n    // doesn't expect a non-string/function type and can throw confusing errors.\n    // We don't want exception behavior to differ between dev and prod.\n    // (Rendering will throw with a helpful message and as soon as the type is\n    // fixed, the key warnings will appear.)\n\n\n    if (validType) {\n      var children = props.children;\n\n      if (children !== undefined) {\n        if (isStaticChildren) {\n          if (isArray(children)) {\n            for (var i = 0; i < children.length; i++) {\n              validateChildKeys(children[i], type);\n            }\n\n            if (Object.freeze) {\n              Object.freeze(children);\n            }\n          } else {\n            error('React.jsx: Static children should always be an array. ' + 'You are likely explicitly calling React.jsxs or React.jsxDEV. ' + 'Use the Babel transform instead.');\n          }\n        } else {\n          validateChildKeys(children, type);\n        }\n      }\n    }\n\n    {\n      if (hasOwnProperty.call(props, 'key')) {\n        var componentName = getComponentNameFromType(type);\n        var keys = Object.keys(props).filter(function (k) {\n          return k !== 'key';\n        });\n        var beforeExample = keys.length > 0 ? '{key: someKey, ' + keys.join(': ..., ') + ': ...}' : '{key: someKey}';\n\n        if (!didWarnAboutKeySpread[componentName + beforeExample]) {\n          var afterExample = keys.length > 0 ? '{' + keys.join(': ..., ') + ': ...}' : '{}';\n\n          error('A props object containing a \"key\" prop is being spread into JSX:\\n' + '  let props = %s;\\n' + '  <%s {...props} />\\n' + 'React keys must be passed directly to JSX without using spread:\\n' + '  let props = %s;\\n' + '  <%s key={someKey} {...props} />', beforeExample, componentName, afterExample, componentName);\n\n          didWarnAboutKeySpread[componentName + beforeExample] = true;\n        }\n      }\n    }\n\n    if (type === REACT_FRAGMENT_TYPE) {\n      validateFragmentProps(element);\n    } else {\n      validatePropTypes(element);\n    }\n\n    return element;\n  }\n} // These two functions exist to still get child warnings in dev\n// even with the prod transform. This means that jsxDEV is purely\n// opt-in behavior for better messages but that we won't stop\n// giving you warnings if you use production apis.\n\nfunction jsxWithValidationStatic(type, props, key) {\n  {\n    return jsxWithValidation(type, props, key, true);\n  }\n}\nfunction jsxWithValidationDynamic(type, props, key) {\n  {\n    return jsxWithValidation(type, props, key, false);\n  }\n}\n\nvar jsx =  jsxWithValidationDynamic ; // we may want to special case jsxs internally to take advantage of static children.\n// for now we can ship identical prod functions\n\nvar jsxs =  jsxWithValidationStatic ;\n\nexports.Fragment = REACT_FRAGMENT_TYPE;\nexports.jsx = jsx;\nexports.jsxs = jsxs;\n  })();\n}\n","/**\n * React Context Provider for Clippy agents\n */\n\nimport React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { Agent } from './Agent';\nimport { load } from './loader';\n\ninterface ClippyContextType {\n  agents: Map<string, Agent>;\n  loadAgent: (name: string, options?: LoadAgentOptions) => Promise<Agent>;\n  unloadAgent: (name: string) => void;\n  getAgent: (name: string) => Agent | undefined;\n}\n\ninterface LoadAgentOptions {\n  basePath?: string;\n  show?: boolean;\n}\n\ninterface ClippyProviderProps {\n  children: ReactNode;\n  defaultBasePath?: string;\n}\n\nconst ClippyContext = createContext<ClippyContextType | undefined>(undefined);\n\n/**\n * Provider component for managing Clippy agents\n */\nexport const ClippyProvider: React.FC<ClippyProviderProps> = ({ children, defaultBasePath }) => {\n  const [agents, setAgents] = useState<Map<string, Agent>>(new Map());\n\n  const loadAgent = async (name: string, options?: LoadAgentOptions): Promise<Agent> => {\n    // Check if already loaded\n    const existing = agents.get(name);\n    if (existing) return existing;\n\n    try {\n      // Load the agent\n      const agent = await load(name, {\n        basePath: options?.basePath || defaultBasePath\n      });\n\n      // Add to state\n      setAgents(prev => new Map(prev).set(name, agent));\n\n      // Show if requested\n      if (options?.show !== false) {\n        await agent.show();\n      }\n\n      return agent;\n    } catch (error) {\n      console.error(`Failed to load agent ${name}:`, error);\n      throw error;\n    }\n  };\n\n  const unloadAgent = (name: string): void => {\n    const agent = agents.get(name);\n    if (agent) {\n      agent.destroy();\n      setAgents(prev => {\n        const next = new Map(prev);\n        next.delete(name);\n        return next;\n      });\n    }\n  };\n\n  const getAgent = (name: string): Agent | undefined => {\n    return agents.get(name);\n  };\n\n  // Clean up on unmount\n  useEffect(() => {\n    return () => {\n      agents.forEach(agent => agent.destroy());\n    };\n  }, []);\n\n  const value: ClippyContextType = {\n    agents,\n    loadAgent,\n    unloadAgent,\n    getAgent\n  };\n\n  return (\n    <ClippyContext.Provider value={value}>\n      {children}\n    </ClippyContext.Provider>\n  );\n};\n\n/**\n * Hook to access Clippy context\n */\nexport const useClippy = (): ClippyContextType => {\n  const context = useContext(ClippyContext);\n  if (!context) {\n    throw new Error('useClippy must be used within a ClippyProvider');\n  }\n  return context;\n};","/**\n * Clippy.js - Modern TypeScript and React implementation\n */\n\n// Core classes\nexport { Agent } from './Agent';\nexport { Animator } from './Animator';\nexport { Balloon } from './Balloon';\nexport { Queue } from './Queue';\n\n// Loader functions\nexport { load, ready, soundsReady } from './loader';\n\n// React components and hooks\nexport { ClippyProvider, useClippy } from './ClippyProvider';\nexport { Clippy, useAgent } from './Clippy';\n\n// Types\nexport * from './types';\n\n// Legacy API support\nimport { load, ready, soundsReady } from './loader';\nimport { Agent } from './Agent';\nimport { Animator } from './Animator';\nimport { Balloon } from './Balloon';\nimport { Queue } from './Queue';\n\nconst clippy = {\n  load,\n  ready,\n  soundsReady,\n  Agent,\n  Animator,\n  Balloon,\n  Queue\n};\n\n// Export default for backward compatibility\nexport default clippy;\n\n// Set up global if in browser\nif (typeof window !== 'undefined') {\n  (window as any).clippy = clippy;\n}","/**\n * React component for Clippy agents\n */\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useClippy } from './ClippyProvider';\nimport { Agent } from './Agent';\n\nexport interface ClippyProps {\n  /** Name of the agent to load (e.g., 'Clippy', 'Bonzi', 'Rover') */\n  name: string;\n  /** Custom base path for agent assets */\n  basePath?: string;\n  /** Whether to show immediately after loading */\n  showOnLoad?: boolean;\n  /** Callback when agent is loaded */\n  onLoad?: (agent: Agent) => void;\n  /** Callback on load error */\n  onError?: (error: Error) => void;\n  /** Initial position */\n  position?: { x: number; y: number };\n  /** Initial message to speak */\n  speak?: string;\n  /** Whether to hold the speech balloon */\n  holdSpeech?: boolean;\n}\n\n/**\n * Clippy React Component\n */\nexport const Clippy: React.FC<ClippyProps> = ({\n  name,\n  basePath,\n  showOnLoad = true,\n  onLoad,\n  onError,\n  position,\n  speak,\n  holdSpeech = false\n}) => {\n  const { loadAgent, getAgent, unloadAgent } = useClippy();\n  const [agent, setAgent] = useState<Agent | undefined>();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n  const mountedRef = useRef(true);\n\n  useEffect(() => {\n    mountedRef.current = true;\n    let currentAgent: Agent | undefined;\n\n    const initAgent = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n\n        // Check if already loaded\n        currentAgent = getAgent(name);\n\n        if (!currentAgent) {\n          // Load the agent\n          currentAgent = await loadAgent(name, {\n            basePath,\n            show: showOnLoad\n          });\n        } else if (showOnLoad) {\n          await currentAgent.show();\n        }\n\n        if (!mountedRef.current) return;\n\n        setAgent(currentAgent);\n\n        // Set initial position if provided\n        if (position && currentAgent) {\n          await currentAgent.moveTo(position.x, position.y, 0);\n        }\n\n        // Speak initial message if provided\n        if (speak && currentAgent) {\n          await currentAgent.speak(speak, holdSpeech);\n        }\n\n        // Call onLoad callback\n        if (onLoad && currentAgent) {\n          onLoad(currentAgent);\n        }\n      } catch (err) {\n        if (!mountedRef.current) return;\n\n        const error = err as Error;\n        setError(error);\n\n        if (onError) {\n          onError(error);\n        }\n      } finally {\n        if (mountedRef.current) {\n          setLoading(false);\n        }\n      }\n    };\n\n    initAgent();\n\n    return () => {\n      mountedRef.current = false;\n      // Note: We don't unload the agent here as it might be used elsewhere\n      // The ClippyProvider handles cleanup on unmount\n    };\n  }, [name, basePath, showOnLoad]);\n\n  // Handle speak prop changes\n  useEffect(() => {\n    if (agent && speak) {\n      agent.speak(speak, holdSpeech);\n    }\n  }, [speak, holdSpeech]);\n\n  // This component doesn't render anything - the Agent manages its own DOM\n  return null;\n};\n\n/**\n * Hook to control a specific agent\n */\nexport const useAgent = (name: string): {\n  agent: Agent | undefined;\n  loading: boolean;\n  error: Error | null;\n  load: () => Promise<void>;\n  unload: () => void;\n} => {\n  const { loadAgent, getAgent, unloadAgent } = useClippy();\n  const [agent, setAgent] = useState<Agent | undefined>(() => getAgent(name));\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n\n  const load = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const loadedAgent = await loadAgent(name);\n      setAgent(loadedAgent);\n    } catch (err) {\n      setError(err as Error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const unload = () => {\n    unloadAgent(name);\n    setAgent(undefined);\n  };\n\n  useEffect(() => {\n    // Update agent reference if it changes\n    const currentAgent = getAgent(name);\n    if (currentAgent !== agent) {\n      setAgent(currentAgent);\n    }\n  }, [name]);\n\n  return {\n    agent,\n    loading,\n    error,\n    load,\n    unload\n  };\n};"],"names":["Queue","constructor","onEmptyCallback","this","queue","active","enqueue","func","push","length","progressQueue","clear","next","size","isActive","shift","Animator","element","path","data","sounds","overlays","currentFrameIndex","exiting","started","paused","preloadSounds","setupElements","currentElement","setupElementStyle","i","overlayCount","innerElement","document","createElement","appendChild","width","height","framesize","style","display","background","soundName","uri","Audio","getAnimations","Object","keys","animations","hasAnimation","name","showAnimation","animationName","stateChangeCallback","currentAnimation","currentAnimationName","step","currentFrame","undefined","endCallback","exitAnimation","pause","loop","window","clearTimeout","resume","newFrameIndex","Math","min","getNextAnimationFrame","frames","frameChanged","atLastFrame","useExitBranching","draw","playSound","setTimeout","duration","States","WAITING","EXITED","branching","exitBranch","rnd","random","branch","branches","weight","frameIndex","images","x","y","backgroundPosition","sound","audio","play","catch","destroy","PLAYING","Balloon","targetEl","hidden","hold","WORD_SPEAK_TIME","CLOSE_BALLOON_DELAY","BALLOON_MARGIN","balloonEl","createBalloonElement","contentEl","querySelector","tipEl","body","balloon","className","tip","content","speak","text","Promise","resolve","show","textContent","offsetHeight","offsetWidth","reposition","completeCallback","sayWords","hide","immediately","hidingTimeout","finishHideBalloon","close","wordTimeout","addWord","positions","position","isOutOfBounds","side","rect","getBoundingClientRect","balloonHeight","balloonWidth","classList","remove","left","top","add","bottom","innerHeight","right","innerWidth","words","split","currentIndex","addNextWord","slice","join","Agent","options","handleResize","zIndex","onQueueEmpty","animator","setupEvents","fast","scrollY","stop","playInternal","state","animation","timeout","complete","completed","reject","Error","async","closeBalloon","moveTo","getDirection","animatePosition","gestureAt","direction","gestureAnim","lookAnim","animate","nonIdleAnimations","filter","a","startsWith","randomAnimation","floor","delay","time","stopCurrent","isVisible","removeEventListener","bind","addEventListener","e","onMouseDown","onDoubleClick","preventDefault","startDrag","dragOffset","clientY","clientX","moveHandler","dragMove","upHandler","finishDrag","updateDragPosition","targetX","targetY","dragUpdateLoop","callback","isIdleAnimation","idleDeferred","then","idleAnimation","getIdleAnimation","idleResolve","current","idleAnimations","centerX","b","angle","round","atan2","PI","startX","parseInt","startY","startTime","Date","now","elapsed","progress","currentX","currentY","requestAnimationFrame","loadedMaps","Map","loadedSounds","loadedData","dataCallbacks","soundCallbacks","load","basePath","CLIPPY_CDN","agentData","all","loadMap","loadAgentData","loadSounds","existing","get","promise","img","Image","onload","onerror","src","set","script","delete","head","canPlayMp3","canPlayType","canPlayOgg","soundFile","ready","soundsReady","clippy","process","env","NODE_ENV","jsxRuntimeModule","exports","f","require$$0","k","Symbol","for","l","m","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","ref","__self","__source","q","c","g","d","h","call","defaultProps","$$typeof","type","props","_owner","reactJsxRuntime_production_min","jsx","jsxs","REACT_MODULE_REFERENCE","React","REACT_ELEMENT_TYPE","REACT_PORTAL_TYPE","REACT_FRAGMENT_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_PROVIDER_TYPE","REACT_CONTEXT_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","REACT_OFFSCREEN_TYPE","MAYBE_ITERATOR_SYMBOL","iterator","ReactSharedInternals","error","format","_len2","arguments","args","Array","_key2","level","stack","ReactDebugCurrentFrame","getStackAddendum","concat","argsWithFormat","map","item","String","unshift","Function","apply","console","printWarning","getContextName","displayName","getComponentNameFromType","tag","_context","outerType","innerType","wrapperName","functionName","getWrappedName","render","outerName","lazyComponent","payload","_payload","init","_init","prevLog","prevInfo","prevWarn","prevError","prevGroup","prevGroupCollapsed","prevGroupEnd","assign","disabledDepth","disabledLog","__reactDisabledLog","prefix","ReactCurrentDispatcher","describeBuiltInComponentFrame","source","ownerFn","match","trim","componentFrameCache","reentry","PossiblyWeakMap","WeakMap","describeNativeComponentFrame","fn","construct","control","frame","previousDispatcher","previousPrepareStackTrace","prepareStackTrace","log","info","warn","group","groupCollapsed","groupEnd","configurable","enumerable","value","writable","defineProperties","disableLogs","Fake","defineProperty","Reflect","sample","sampleLines","controlLines","s","_frame","replace","includes","reenableLogs","syntheticFrame","describeUnknownElementTypeFrameInDEV","isReactComponent","loggedTypeFailures","setCurrentlyValidatingElement","owner","_source","setExtraStackFrame","isArrayImpl","isArray","testStringCoercion","checkKeyStringCoercion","willCoercionThrow","toStringTag","typeName","specialPropKeyWarningShown","specialPropRefWarningShown","RESERVED_PROPS","jsxDEV","config","maybeKey","self","propName","getter","getOwnPropertyDescriptor","isReactWarning","hasValidKey","hasValidRef","warnIfStringRefCannotBeAutoConverted","warnAboutAccessingKey","defineKeyPropWarningGetter","warnAboutAccessingRef","defineRefPropWarningGetter","_store","freeze","ReactElement","propTypesMisspellWarningShown","ReactCurrentOwner$1","ReactDebugCurrentFrame$1","setCurrentlyValidatingElement$1","isValidElement","object","getDeclarationErrorAddendum","ownerHasKeyUseWarning","validateExplicitKey","parentType","validated","currentComponentErrorInfo","parentName","getCurrentComponentErrorInfo","childOwner","validateChildKeys","node","child","iteratorFn","maybeIterable","maybeIterator","getIteratorFn","entries","done","validatePropTypes","propTypes","typeSpecs","values","location","componentName","has","typeSpecName","error$1","err","ex","message","checkPropTypes","PropTypes","getDefaultProps","isReactClassApproved","didWarnAboutKeySpread","jsxWithValidation","isStaticChildren","validType","getModuleId","isValidElementType","typeString","children","beforeExample","fragment","validateFragmentProps","reactJsxRuntime_development","Fragment","ClippyContext","createContext","useClippy","context","useContext","showOnLoad","onLoad","onError","holdSpeech","loadAgent","getAgent","unloadAgent","agent","setAgent","useState","loading","setLoading","setError","mountedRef","useRef","useEffect","currentAgent","initAgent","defaultBasePath","agents","setAgents","forEach","prev","_jsx","Provider","loadedAgent","unload"],"mappings":"sRAMaA,EAKX,WAAAC,CAAYC,GAJJC,KAAAC,MAAyB,GACzBD,KAAAE,QAAS,EAIfF,KAAKD,gBAAkBA,CACzB,CAKO,OAAAI,CAAQC,GACbJ,KAAKC,MAAMI,KAAKD,GAEU,IAAtBJ,KAAKC,MAAMK,QAAiBN,KAAKE,QACnCF,KAAKO,eAET,CAKO,KAAAC,GACLR,KAAKC,MAAQ,GACbD,KAAKE,QAAS,CAChB,CAKO,IAAAO,GACLT,KAAKE,QAAS,EACdF,KAAKO,eACP,CAKO,IAAAG,GACL,OAAOV,KAAKC,MAAMK,MACpB,CAKO,QAAAK,GACL,OAAOX,KAAKE,MACd,CAKQ,aAAAK,GAEN,IAAKP,KAAKC,MAAMK,OAId,YAHIN,KAAKD,iBACPC,KAAKD,mBAKT,MAAMK,EAAOJ,KAAKC,MAAMW,QACxB,IAAKR,EAAM,OAEXJ,KAAKE,QAAS,EAIdE,EADyB,IAAMJ,KAAKS,OAEtC,QCpEWI,EAwBX,WAAAf,CAAYgB,EAAsBC,EAAcC,EAAiBC,GAdzDjB,KAAAiB,OAA8C,CAAA,EAC9CjB,KAAAkB,SAA0B,GAI1BlB,KAAAmB,kBAAoB,EACpBnB,KAAAoB,SAAU,EACVpB,KAAAqB,SAAU,EACVrB,KAAAsB,QAAS,EAOftB,KAAKc,QAAUA,EACfd,KAAKgB,KAAOA,EACZhB,KAAKe,KAAOA,EAEZf,KAAKuB,cAAcN,GACnBjB,KAAKwB,eACP,CAKQ,aAAAA,GACNxB,KAAKkB,SAAW,CAAClB,KAAKc,SACtB,IAAIW,EAAiBzB,KAAKc,QAE1Bd,KAAK0B,kBAAkB1B,KAAKc,SAG5B,IAAK,IAAIa,EAAI,EAAGA,EAAI3B,KAAKgB,KAAKY,aAAcD,IAAK,CAC/C,MAAME,EAAeC,SAASC,cAAc,OAC5C/B,KAAK0B,kBAAkBG,GACvBJ,EAAeO,YAAYH,GAC3B7B,KAAKkB,SAASb,KAAKwB,GACnBJ,EAAiBI,CACnB,CACF,CAKQ,iBAAAH,CAAkBZ,GACxB,MAAOmB,EAAOC,GAAUlC,KAAKgB,KAAKmB,UAClCrB,EAAQsB,MAAMC,QAAU,OACxBvB,EAAQsB,MAAMH,MAAQ,GAAGA,MACzBnB,EAAQsB,MAAMF,OAAS,GAAGA,MAC1BpB,EAAQsB,MAAME,WAAa,QAAQtC,KAAKe,0BAC1C,CAKQ,aAAAQ,CAAcN,GACpB,IAAK,MAAMsB,KAAavC,KAAKgB,KAAKC,OAAQ,CACxC,MAAMuB,EAAMvB,EAAOsB,GACfC,IACFxC,KAAKiB,OAAOsB,GAAa,IAAIE,MAAMD,GAEvC,CACF,CAKO,aAAAE,GACL,OAAOC,OAAOC,KAAK5C,KAAKgB,KAAK6B,WAC/B,CAKO,YAAAC,CAAaC,GAClB,QAAS/C,KAAKgB,KAAK6B,WAAWE,EAChC,CAKO,aAAAC,CAAcC,EAAuBC,GAG1C,OAFAlD,KAAKoB,SAAU,IAEVpB,KAAK8C,aAAaG,KAIvBjD,KAAKmD,iBAAmBnD,KAAKgB,KAAK6B,WAAWI,GAC7CjD,KAAKoD,qBAAuBH,EAEvBjD,KAAKqB,UACRrB,KAAKqD,OACLrD,KAAKqB,SAAU,GAGjBrB,KAAKmB,kBAAoB,EACzBnB,KAAKsD,kBAAeC,EACpBvD,KAAKwD,YAAcN,GAEZ,EACT,CAKO,aAAAO,GACLzD,KAAKoB,SAAU,CACjB,CAKO,KAAAsC,GACL1D,KAAKsB,QAAS,EACVtB,KAAK2D,OACPC,OAAOC,aAAa7D,KAAK2D,MACzB3D,KAAK2D,UAAOJ,EAEhB,CAKO,MAAAO,GACL9D,KAAKsB,QAAS,EACVtB,KAAKmD,kBACPnD,KAAKqD,MAET,CAKQ,IAAAA,GACN,IAAKrD,KAAKmD,kBAAoBnD,KAAKsB,OAAQ,OAE3C,MAAMyC,EAAgBC,KAAKC,IACzBjE,KAAKkE,wBACLlE,KAAKmD,iBAAiBgB,OAAO7D,OAAS,GAElC8D,GAAgBpE,KAAKsD,cAAgBtD,KAAKmB,oBAAsB4C,EACtE/D,KAAKmB,kBAAoB4C,EAGnB/D,KAAKqE,eAAiBrE,KAAKmD,iBAAiBmB,mBAChDtE,KAAKsD,aAAetD,KAAKmD,iBAAiBgB,OAAOnE,KAAKmB,oBAGxDnB,KAAKuE,OACLvE,KAAKwE,YAEDxE,KAAKsD,eACPtD,KAAK2D,KAAOC,OAAOa,WAAW,IAAMzE,KAAKqD,OAAQrD,KAAKsD,aAAaoB,WAIjE1E,KAAKwD,aAAeY,GAAgBpE,KAAKqE,gBACvCrE,KAAKmD,iBAAiBmB,mBAAqBtE,KAAKoB,QAClDpB,KAAKwD,YAAYxD,KAAKoD,qBAAuBvC,EAAS8D,OAAOC,SAE7D5E,KAAKwD,YAAYxD,KAAKoD,qBAAuBvC,EAAS8D,OAAOE,QAGnE,CAKQ,qBAAAX,GACN,IAAKlE,KAAKmD,iBAAkB,OAAO,EACnC,IAAKnD,KAAKsD,aAAc,OAAO,EAE/B,MAAMA,EAAetD,KAAKsD,aACpBwB,EAAYxB,EAAawB,UAE/B,GAAI9E,KAAKoB,cAAuCmC,IAA5BD,EAAayB,WAC/B,OAAOzB,EAAayB,WACf,GAAID,EAAW,CACpB,IAAIE,EAAsB,IAAhBhB,KAAKiB,SACf,IAAK,MAAMC,KAAUJ,EAAUK,SAAU,CACvC,GAAIH,GAAOE,EAAOE,OAChB,OAAOF,EAAOG,WAEhBL,GAAOE,EAAOE,MAChB,CACF,CAEA,OAAOpF,KAAKmB,kBAAoB,CAClC,CAKQ,IAAAoD,GACN,MAAMe,EAAStF,KAAKsD,cAAcgC,QAAU,GAE5C,IAAK,IAAI3D,EAAI,EAAGA,EAAI3B,KAAKkB,SAASZ,OAAQqB,IACxC,GAAIA,EAAI2D,EAAOhF,OAAQ,CACrB,MAAOiF,EAAGC,GAAKF,EAAO3D,GAChB8D,EAAqB,IAAIF,QAAQC,MACvCxF,KAAKkB,SAASS,GAAGS,MAAMqD,mBAAqBA,EAC5CzF,KAAKkB,SAASS,GAAGS,MAAMC,QAAU,OACnC,MACErC,KAAKkB,SAASS,GAAGS,MAAMC,QAAU,MAGvC,CAKQ,SAAAmC,GACN,IAAKxE,KAAKsD,cAAcoC,MAAO,OAE/B,MAAMnD,EAAYvC,KAAKsD,aAAaoC,MACpC,GAAyB,iBAAdnD,EAAwB,CACjC,MAAMoD,EAAQ3F,KAAKiB,OAAOsB,GACtBoD,GACFA,EAAMC,OAAOC,MAAM,OAIvB,CACF,CAKQ,WAAAxB,GACN,QAAKrE,KAAKmD,kBACHnD,KAAKmB,mBAAqBnB,KAAKmD,iBAAiBgB,OAAO7D,OAAS,CACzE,CAKO,OAAAwF,GACL9F,KAAK0D,QACL1D,KAAKkB,SAAW,GAChBlB,KAAKiB,OAAS,CAAA,CAChB,EA3PuBJ,EAAA8D,OAAS,CAC9BC,QAAS,UACTC,OAAQ,SACRkB,QAAS,iBCFAC,EAgBX,WAAAlG,CAAYmG,GAXJjG,KAAAkG,QAAS,EACTlG,KAAAE,QAAS,EACTF,KAAAmG,MAAO,EAKEnG,KAAAoG,gBAAkB,IAClBpG,KAAAqG,oBAAsB,IACtBrG,KAAAsG,eAAiB,GAGhCtG,KAAKiG,SAAWA,EAChBjG,KAAKuG,UAAYvG,KAAKwG,uBACtBxG,KAAKyG,UAAYzG,KAAKuG,UAAUG,cAC9B,mBAEF1G,KAAK2G,MAAQ3G,KAAKuG,UAAUG,cAAc,eAC1C5E,SAAS8E,KAAK5E,YAAYhC,KAAKuG,UACjC,CAKQ,oBAAAC,GACN,MAAMK,EAAU/E,SAASC,cAAc,OACvC8E,EAAQC,UAAY,iBACpBD,EAAQzE,MAAMC,QAAU,OAExB,MAAM0E,EAAMjF,SAASC,cAAc,OACnCgF,EAAID,UAAY,aAEhB,MAAME,EAAUlF,SAASC,cAAc,OAMvC,OALAiF,EAAQF,UAAY,iBAEpBD,EAAQ7E,YAAY+E,GACpBF,EAAQ7E,YAAYgF,GAEbH,CACT,CAKO,KAAAI,CAAMC,EAAcf,GAAO,GAChC,OAAO,IAAIgB,QAASC,IAClBpH,KAAKkG,QAAS,EACdlG,KAAKqH,OAGLrH,KAAKyG,UAAUrE,MAAMF,OAAS,OAC9BlC,KAAKyG,UAAUrE,MAAMH,MAAQ,OAG7BjC,KAAKyG,UAAUa,YAAcJ,EAG7B,MAAMhF,EAASlC,KAAKyG,UAAUc,aACxBtF,EAAQjC,KAAKyG,UAAUe,YAC7BxH,KAAKyG,UAAUrE,MAAMF,OAAS,GAAGA,MACjClC,KAAKyG,UAAUrE,MAAMH,MAAQ,GAAGA,MAGhCjC,KAAKyG,UAAUa,YAAc,GAE7BtH,KAAKyH,aAELzH,KAAK0H,iBAAmBN,EACxBpH,KAAK2H,SAAST,EAAMf,IAExB,CAKO,IAAAkB,GACDrH,KAAKkG,SACTlG,KAAKuG,UAAUnE,MAAMC,QAAU,QACjC,CAKO,IAAAuF,CAAKC,GAAc,GACxB,GAAIA,EAGF,OAFA7H,KAAKuG,UAAUnE,MAAMC,QAAU,YAC/BrC,KAAKkG,QAAS,GAIhBlG,KAAK8H,cAAgBlE,OAAOa,WAAW,KACrCzE,KAAK+H,qBACJ/H,KAAKqG,oBACV,CAKO,KAAA2B,GACDhI,KAAKE,OACPF,KAAKmG,MAAO,EACHnG,KAAKmG,MAAQnG,KAAK0H,kBAC3B1H,KAAK0H,kBAET,CAKO,KAAAhE,GACD1D,KAAKiI,aACPrE,OAAOC,aAAa7D,KAAKiI,aAEvBjI,KAAK8H,gBACPlE,OAAOC,aAAa7D,KAAK8H,eACzB9H,KAAK8H,mBAAgBvE,EAEzB,CAKO,MAAAO,GACD9D,KAAKE,OACPF,KAAKkI,SAAWlI,KAAKkI,UACXlI,KAAKmG,MAASnG,KAAKkG,SAC7BlG,KAAK8H,cAAgBlE,OAAOa,WAAW,KACrCzE,KAAK+H,qBACJ/H,KAAKqG,qBAEZ,CAKO,UAAAoB,GACL,MAAMU,EAA+B,CACnC,WACA,YACA,cACA,gBAGF,IAAK,MAAMC,KAAYD,EAErB,GADAnI,KAAKoI,SAASA,IACTpI,KAAKqI,gBAAiB,KAE/B,CAKQ,QAAAD,CAASE,GACf,MAAMC,EAAOvI,KAAKiG,SAASuC,wBACrBC,EAAgBzI,KAAKuG,UAAUgB,aAC/BmB,EAAe1I,KAAKuG,UAAUiB,YAGpCxH,KAAKuG,UAAUoC,UAAUC,OACvB,kBACA,mBACA,qBACA,uBAGF,IAAIC,EAAO,EACPC,EAAM,EAEV,OAAQR,GACN,IAAK,WACHO,EAAON,EAAKM,KAAON,EAAKtG,MAAQyG,EAChCI,EAAMP,EAAKO,IAAML,EAAgBzI,KAAKsG,eACtC,MACF,IAAK,YACHuC,EAAON,EAAKM,KACZC,EAAMP,EAAKO,IAAML,EAAgBzI,KAAKsG,eACtC,MACF,IAAK,eACHuC,EAAON,EAAKM,KACZC,EAAMP,EAAKO,IAAMP,EAAKrG,OAASlC,KAAKsG,eACpC,MACF,IAAK,cACHuC,EAAON,EAAKM,KAAON,EAAKtG,MAAQyG,EAChCI,EAAMP,EAAKO,IAAMP,EAAKrG,OAASlC,KAAKsG,eAIxCtG,KAAKuG,UAAUnE,MAAM0G,IAAM,GAAGA,MAC9B9I,KAAKuG,UAAUnE,MAAMyG,KAAO,GAAGA,MAC/B7I,KAAKuG,UAAUoC,UAAUI,IAAI,UAAUT,IACzC,CAKQ,aAAAD,GACN,MAAME,EAAOvI,KAAKuG,UAAUiC,wBAG5B,OAAID,EAAKO,IAFM,EAES,GAAKP,EAAKM,KAFnB,EAEmC,IAKhDN,EAAKS,OAPQ,EAOUpF,OAAOqF,aAC9BV,EAAKW,MARQ,EAQStF,OAAOuF,WAEjC,CAKQ,QAAAxB,CAAST,EAAcf,GAC7BnG,KAAKE,QAAS,EACdF,KAAKmG,KAAOA,EACZ,MAAMiD,EAAQlC,EAAKmC,MAAM,OACzB,IAAIC,EAAe,EAEnB,MAAMC,EAAc,KACbvJ,KAAKE,SAENoJ,GAAgBF,EAAM9I,QACxBN,KAAKE,QAAS,EACTF,KAAKmG,OACJnG,KAAK0H,kBACP1H,KAAK0H,mBAEP1H,KAAK4H,UAGP5H,KAAKyG,UAAUa,YAAc8B,EAAMI,MAAM,EAAGF,EAAe,GAAGG,KAAK,KACnEH,IACAtJ,KAAKiI,YAAcrE,OAAOa,WAAW8E,EAAavJ,KAAKoG,oBAI3DpG,KAAKkI,QAAUqB,EACfA,GACF,CAKQ,iBAAAxB,GACF/H,KAAKE,SACTF,KAAKuG,UAAUnE,MAAMC,QAAU,OAC/BrC,KAAKkG,QAAS,EACdlG,KAAK8H,mBAAgBvE,EACvB,CAUO,OAAAuC,GACD9F,KAAK8H,eACPlE,OAAOC,aAAa7D,KAAK8H,eAEvB9H,KAAKiI,aACPrE,OAAOC,aAAa7D,KAAKiI,aAE3BjI,KAAKuG,UAAUqC,QACjB,QC5QWc,EAmBX,WAAA5J,CAAYiB,EAAcC,EAAiBC,EAAkB0I,GAZrD3J,KAAAkG,QAAS,EAiUTlG,KAAA4J,aAAe,KACrB5J,KAAKyH,cArTLzH,KAAKe,KAAOA,EAGZf,KAAKc,QAAUgB,SAASC,cAAc,OACtC/B,KAAKc,QAAQgG,UAAY,SACzB9G,KAAKc,QAAQsB,MAAMC,QAAU,OAC7BrC,KAAKc,QAAQsB,MAAMgG,SAAW,QAC9BpI,KAAKc,QAAQsB,MAAMyH,OAAS,OAC5B/H,SAAS8E,KAAK5E,YAAYhC,KAAKc,SAG/Bd,KAAKC,MAAQ,IAAIJ,EAAM,IAAMG,KAAK8J,gBAClC9J,KAAK+J,SAAW,IAAIlJ,EAASb,KAAKc,QAASC,EAAMC,EAAMC,GACvDjB,KAAK6G,QAAU,IAAIb,EAAQhG,KAAKc,SAGhCd,KAAKgK,YAAYL,EACnB,CAKO,UAAMtC,CAAK4C,GAAO,GAGvB,GAFAjK,KAAKkG,QAAS,EAEV+D,EAIF,OAHAjK,KAAKc,QAAQsB,MAAMC,QAAU,QAC7BrC,KAAK8D,SACL9D,KAAK8J,eACE3C,QAAQC,UAIjB,GAA+B,SAA3BpH,KAAKc,QAAQsB,MAAM0G,KAA8C,SAA5B9I,KAAKc,QAAQsB,MAAMyG,KAAiB,CAC3E,MAAMA,EAA2B,GAApBjF,OAAOuF,WACdL,EAA8C,IAAvClF,OAAOqF,YAAcrF,OAAOsG,SACzClK,KAAKc,QAAQsB,MAAMyG,KAAO,GAAGA,MAC7B7I,KAAKc,QAAQsB,MAAM0G,IAAM,GAAGA,KAC9B,CAIA,OAFA9I,KAAKc,QAAQsB,MAAMC,QAAU,QAC7BrC,KAAK8D,SACE9D,KAAK4F,KAAK,OACnB,CAKO,UAAMgC,CAAKqC,GAAO,GAIvB,OAHAjK,KAAKkG,QAAS,EACdlG,KAAKmK,OAEDF,GACFjK,KAAKc,QAAQsB,MAAMC,QAAU,OAC7BrC,KAAK0D,QACEyD,QAAQC,WAGV,IAAID,QAASC,IAClBpH,KAAKoK,aAAa,OAAQ,CAACrH,EAAMsH,KAC3BA,IAAUxJ,EAAS8D,OAAOE,SAC5B7E,KAAKc,QAAQsB,MAAMC,QAAU,OAC7BrC,KAAK0D,QACL0D,QAIR,CAKO,IAAAxB,CAAK0E,EAAmBC,EAAU,KACvC,OAAKvK,KAAK8C,aAAawH,GAIhB,IAAInD,QAASC,IAClBpH,KAAKC,MAAME,QAASqK,IAClB,IAAIC,GAAY,EAUZF,GACF3G,OAAOa,WAAW,KACZgG,GACJzK,KAAK+J,SAAStG,iBACb8G,GAGLvK,KAAKoK,aAAaE,EAhBD,CAACvH,EAAcsH,KAC1BA,IAAUxJ,EAAS8D,OAAOE,SAC5B4F,GAAY,EACZrD,IACAoD,WAVCrD,QAAQuD,OAAO,IAAIC,MAAM,cAAcL,gBAyBlD,CAKO,KAAArD,CAAMC,EAAcf,GAAO,GAChC,OAAO,IAAIgB,QAASC,IAClBpH,KAAKC,MAAME,QAAQyK,MAAOJ,UAClBxK,KAAK6G,QAAQI,MAAMC,EAAMf,GAC/BqE,IACApD,OAGN,CAKO,YAAAyD,GACL7K,KAAK6G,QAAQe,MACf,CAKO,MAAAkD,CAAOvF,EAAWC,EAAWd,EAAW,KAC7C,MACM4F,EAAY,OADAtK,KAAK+K,aAAaxF,EAAGC,KAGvC,OAAO,IAAI2B,QAASC,IAClBpH,KAAKC,MAAME,QAASqK,IAElB,GAAiB,IAAb9F,EAMF,OALA1E,KAAKc,QAAQsB,MAAMyG,KAAO,GAAGtD,MAC7BvF,KAAKc,QAAQsB,MAAM0G,IAAM,GAAGtD,MAC5BxF,KAAKyH,aACL+C,SACApD,IAKF,IAAKpH,KAAK8C,aAAawH,GAKrB,YAJAtK,KAAKgL,gBAAgBzF,EAAGC,EAAGd,EAAU,KACnC8F,IACApD,MAiBJpH,KAAKoK,aAAaE,EAXD,CAACvH,EAAcsH,KAC1BA,IAAUxJ,EAAS8D,OAAOE,QAC5B2F,IACApD,KACSiD,IAAUxJ,EAAS8D,OAAOC,SACnC5E,KAAKgL,gBAAgBzF,EAAGC,EAAGd,EAAU,KACnC1E,KAAK+J,SAAStG,uBAQ1B,CAKO,eAAMwH,CAAU1F,EAAWC,GAChC,MAAM0F,EAAYlL,KAAK+K,aAAaxF,EAAGC,GACjC2F,EAAc,UAAUD,IACxBE,EAAW,OAAOF,IAElBZ,EAAYtK,KAAK8C,aAAaqI,GAAeA,EAAcC,EACjE,OAAOpL,KAAK4F,KAAK0E,EACnB,CAKO,aAAMe,GACX,MACMC,EADatL,KAAK0C,gBACa6I,OAAOC,IAAMA,EAAEC,WAAW,SAE/D,GAAiC,IAA7BH,EAAkBhL,OACpB,OAAO6G,QAAQC,UAGjB,MAAMsE,EAAkBJ,EAAkBtH,KAAK2H,MAAM3H,KAAKiB,SAAWqG,EAAkBhL,SACvF,OAAON,KAAK4F,KAAK8F,EACnB,CAKO,KAAAE,CAAMC,EAAO,KAClB,OAAO,IAAI1E,QAASC,IAClBpH,KAAKC,MAAME,QAASqK,IAClBxK,KAAK8J,eACLlG,OAAOa,WAAW,KAChB+F,IACApD,KACCyE,MAGT,CAKO,IAAA1B,GACLnK,KAAKC,MAAMO,QACXR,KAAK+J,SAAStG,gBACdzD,KAAK6G,QAAQe,MACf,CAKO,WAAAkE,GACL9L,KAAK+J,SAAStG,gBACdzD,KAAK6G,QAAQmB,OACf,CAKO,KAAAtE,GACL1D,KAAK+J,SAASrG,QACd1D,KAAK6G,QAAQnD,OACf,CAKO,MAAAI,GACL9D,KAAK+J,SAASjG,SACd9D,KAAK6G,QAAQ/C,QACf,CAKO,YAAAhB,CAAaC,GAClB,OAAO/C,KAAK+J,SAASjH,aAAaC,EACpC,CAKO,aAAAL,GACL,OAAO1C,KAAK+J,SAASrH,eACvB,CAKO,UAAA+E,GACL,IAAKzH,KAAK+L,YAAa,OAEvB,MAAMxD,EAAOvI,KAAKc,QAAQ0H,wBAE1B,IAAIM,IAAEA,EAAGD,KAAEA,GAASN,EAGhBO,EAJW,EAII,EACjBA,EALa,EAMJA,EAAMP,EAAKrG,OANP,EAMyB0B,OAAOqF,cAC7CH,EAAMlF,OAAOqF,YAAcV,EAAKrG,OAPnB,GAUX2G,EAVW,EAUK,EAClBA,EAXa,EAYJA,EAAON,EAAKtG,MAZR,EAYyB2B,OAAOuF,aAC7CN,EAAOjF,OAAOuF,WAAaZ,EAAKtG,MAbnB,GAgBfjC,KAAKc,QAAQsB,MAAMyG,KAAO,GAAGA,MAC7B7I,KAAKc,QAAQsB,MAAM0G,IAAM,GAAGA,MAG5B9I,KAAK6G,QAAQY,YACf,CAKO,OAAA3B,GACL9F,KAAKmK,OACLvG,OAAOoI,oBAAoB,SAAUhM,KAAK4J,cAC1C5J,KAAKc,QAAQ8H,SACb5I,KAAK+J,SAASjE,UACd9F,KAAK6G,QAAQf,SACf,CAIQ,WAAAkE,CAAYL,GAElB3J,KAAK4J,aAAe5J,KAAK4J,aAAaqC,KAAKjM,MAC3C4D,OAAOsI,iBAAiB,SAAUlM,KAAK4J,cAGvC5J,KAAKc,QAAQoL,iBAAiB,YAAcC,GAAMnM,KAAKoM,YAAYD,IACnEnM,KAAKc,QAAQoL,iBAAiB,WAAY,IAAMlM,KAAKqM,cAAc1C,GACrE,CAMQ,WAAAyC,CAAYD,GAClBA,EAAEG,iBACFtM,KAAKuM,UAAUJ,EACjB,CAEQ,aAAAE,CAAc1C,GAChBA,GAAS0C,cACX1C,EAAQ0C,gBACErM,KAAK4F,KAAK,cACpB5F,KAAKqL,SAET,CAEQ,SAAAkB,CAAUJ,GAChBnM,KAAK0D,QACL1D,KAAK6G,QAAQe,MAAK,GAElB,MAAMW,EAAOvI,KAAKc,QAAQ0H,wBAC1BxI,KAAKwM,WAAa,CAChB1D,IAAKqD,EAAEM,QAAUlE,EAAKO,IACtBD,KAAMsD,EAAEO,QAAUnE,EAAKM,MAGzB7I,KAAK2M,YAAeR,GAAkBnM,KAAK4M,SAAST,GACpDnM,KAAK6M,UAAY,IAAM7M,KAAK8M,aAE5BlJ,OAAOsI,iBAAiB,YAAalM,KAAK2M,aAC1C/I,OAAOsI,iBAAiB,UAAWlM,KAAK6M,WAExC7M,KAAK+M,oBACP,CAEQ,QAAAH,CAAST,GACfA,EAAEG,iBACGtM,KAAKwM,aAEVxM,KAAKgN,QAAUb,EAAEO,QAAU1M,KAAKwM,WAAW3D,KAC3C7I,KAAKiN,QAAUd,EAAEM,QAAUzM,KAAKwM,WAAW1D,IAC7C,CAEQ,kBAAAiE,QACexJ,IAAjBvD,KAAKgN,cAA0CzJ,IAAjBvD,KAAKiN,UACrCjN,KAAKc,QAAQsB,MAAMyG,KAAO,GAAG7I,KAAKgN,YAClChN,KAAKc,QAAQsB,MAAM0G,IAAM,GAAG9I,KAAKiN,aAEnCjN,KAAKkN,eAAiBtJ,OAAOa,WAAW,IAAMzE,KAAK+M,qBAAsB,GAC3E,CAEQ,UAAAD,GACF9M,KAAKkN,gBACPtJ,OAAOC,aAAa7D,KAAKkN,gBAGvBlN,KAAK2M,aAAe3M,KAAK6M,YAC3BjJ,OAAOoI,oBAAoB,YAAahM,KAAK2M,aAC7C/I,OAAOoI,oBAAoB,UAAWhM,KAAK6M,YAG7C7M,KAAK6G,QAAQQ,OACbrH,KAAKyH,aACLzH,KAAK8D,QACP,CAEQ,YAAAsG,CAAaE,EAAmB6C,GAElCnN,KAAKoN,mBAAqBpN,KAAKqN,aACjCrN,KAAKqN,aAAaC,KAAK,KACrBtN,KAAKoK,aAAaE,EAAW6C,KAKjCnN,KAAK+J,SAAS/G,cAAcsH,EAAW6C,EACzC,CAEQ,YAAArD,GACN,GAAI9J,KAAKkG,QAAUlG,KAAKoN,kBAAmB,OAE3C,MAAMG,EAAgBvN,KAAKwN,mBAC3BxN,KAAKqN,aAAe,IAAIlG,QAASC,IAC/BpH,KAAKyN,YAAcrG,IAGrBpH,KAAK+J,SAAS/G,cAAcuK,EAAe,CAACxK,EAAMsH,KAC5CA,IAAUxJ,EAAS8D,OAAOE,QAAU7E,KAAKyN,cAC3CzN,KAAKyN,cACLzN,KAAKqN,kBAAe9J,EACpBvD,KAAKyN,iBAAclK,IAGzB,CAEQ,eAAA6J,GACN,MAAMM,EAAU1N,KAAK+J,SAAS3G,qBAC9B,QAASsK,GAAWA,EAAQjC,WAAW,OACzC,CAEQ,gBAAA+B,GACN,MAAM3K,EAAa7C,KAAK0C,gBAClBiL,EAAiB9K,EAAW0I,OAAOC,GAAKA,EAAEC,WAAW,SAE3D,OAA8B,IAA1BkC,EAAerN,OACVuC,EAAW,IAAM,QAGnB8K,EAAe3J,KAAK2H,MAAM3H,KAAKiB,SAAW0I,EAAerN,QAClE,CAEQ,YAAAyK,CAAaxF,EAAWC,GAC9B,MAAM+C,EAAOvI,KAAKc,QAAQ0H,wBACpBoF,EAAUrF,EAAKM,KAAON,EAAKtG,MAAQ,EAGnCuJ,EAFUjD,EAAKO,IAAMP,EAAKrG,OAAS,EAErBsD,EACdqI,EAAID,EAAUrI,EACduI,EAAQ9J,KAAK+J,MAAO,IAAM/J,KAAKgK,MAAMxC,EAAGqC,GAAM7J,KAAKiK,IAEzD,OAAI,IAAOH,GAASA,EAAQ,GAAW,QACnC,IAAMA,GAASA,EAAQ,IAAY,KAClC,KAAOA,GAASA,GAAS,WAAiBA,GAASA,OAAsB,QAC1E,KAAQA,GAASA,GAAQ,GAAY,OAElC,IACT,CAEQ,eAAA9C,CAAgBzF,EAAWC,EAAWd,EAAkByI,GAC9D,MAAMe,EAASC,SAASnO,KAAKc,QAAQsB,MAAMyG,OAAS,EAC9CuF,EAASD,SAASnO,KAAKc,QAAQsB,MAAM0G,MAAQ,EAC7CuF,EAAYC,KAAKC,MAEjBlD,EAAU,KACd,MAAMmD,EAAUF,KAAKC,MAAQF,EACvBI,EAAWzK,KAAKC,IAAIuK,EAAU9J,EAAU,GAExCgK,EAAWR,GAAU3I,EAAI2I,GAAUO,EACnCE,EAAWP,GAAU5I,EAAI4I,GAAUK,EAEzCzO,KAAKc,QAAQsB,MAAMyG,KAAO,GAAG6F,MAC7B1O,KAAKc,QAAQsB,MAAM0G,IAAM,GAAG6F,MAExBF,EAAW,EACbG,sBAAsBvD,GAEtB8B,KAIJ9B,GACF,CAEQ,SAAAU,GACN,MAAsC,SAA/B/L,KAAKc,QAAQsB,MAAMC,OAC5B,ECzeF,MAAMwM,EAAyC,IAAIC,IAC7CC,EAA+C,IAAID,IACnDE,EAA8C,IAAIF,IAGlDG,EAAwD,IAAIH,IAC5DI,EAA0D,IAAIJ,IAK7DlE,eAAeuE,EAAKpM,EAAc4G,GACvC,MAIM5I,EAAO,GAJI4I,GAASyF,UACvBxL,OAAeyL,YAChB,+DAEyBtM,KAGrB,CAAGuM,EAAWrO,SAAgBkG,QAAQoI,IAAI,CAC9CC,EAAQzO,GACR0O,EAAc1M,EAAMhC,GACpB2O,EAAW3M,EAAMhC,KAGnB,OAAO,IAAI2I,EAAM3I,EAAMuO,EAAWrO,EACpC,CAKA2J,eAAe4E,EAAQzO,GAErB,MAAM4O,EAAWd,EAAWe,IAAI7O,GAChC,GAAI4O,EAAU,OAAOA,EAErB,MAAME,EAAU,IAAI1I,QAAc,CAACC,EAASsD,KAC1C,MAAMoF,EAAM,IAAIC,MAChBD,EAAIE,OAAS,IAAM5I,IACnB0I,EAAIG,QAAU,IAAMvF,EAAO,IAAIC,MAAM,uBAAuB5J,cAC5D+O,EAAII,IAAM,GAAGnP,cAIf,OADA8N,EAAWsB,IAAIpP,EAAM8O,GACdA,CACT,CAKAjF,eAAe6E,EAAc1M,EAAchC,GAEzC,MAAM4O,EAAWX,EAAWY,IAAI7M,GAChC,GAAI4M,EAAU,OAAOA,EAErB,MAAME,EAAU,IAAI1I,QAAmB,CAACC,EAASsD,KAE/CuE,EAAckB,IAAIpN,EAAMqE,GAGxB,MAAMgJ,EAAStO,SAASC,cAAc,UACtCqO,EAAOF,IAAM,GAAGnP,aAChBqP,EAAOxF,OAAQ,EACfwF,EAAOH,QAAU,KACfhB,EAAcoB,OAAOtN,GACrB2H,EAAO,IAAIC,MAAM,8BAA8B5J,gBAGjDe,SAASwO,KAAKtO,YAAYoO,KAI5B,OADApB,EAAWmB,IAAIpN,EAAM8M,GACdA,CACT,CAKAjF,eAAe8E,EAAW3M,EAAchC,GAEtC,MAAM4O,EAAWZ,EAAaa,IAAI7M,GAClC,GAAI4M,EAAU,OAAOA,EAErB,MAAME,EAAU,IAAI1I,QAAkB,CAACC,EAASsD,KAE9C,MAAM/E,EAAQ7D,SAASC,cAAc,SAC/BwO,IAAe5K,EAAM6K,aAAmD,KAApC7K,EAAM6K,YAAY,cACtDC,IAAe9K,EAAM6K,aAAmE,KAApD7K,EAAM6K,YAAY,8BAE5D,IAAKD,IAAeE,EAElB,YADArJ,EAAQ,CAAA,GAKV8H,EAAeiB,IAAIpN,EAAMqE,GAGzB,MAAMsJ,EAAYH,EAAa,gBAAkB,gBAC3CH,EAAStO,SAASC,cAAc,UACtCqO,EAAOF,IAAM,GAAGnP,KAAQ2P,IACxBN,EAAOxF,OAAQ,EACfwF,EAAOH,QAAU,KACff,EAAemB,OAAOtN,GAEtBqE,EAAQ,CAAA,IAGVtF,SAASwO,KAAKtO,YAAYoO,KAI5B,OADArB,EAAaoB,IAAIpN,EAAM8M,GAChBA,CACT,CAMM,SAAUc,EAAM5N,EAAc/B,GAClC,MAAMmM,EAAW8B,EAAcW,IAAI7M,GAC/BoK,IACFA,EAASnM,GACTiO,EAAcoB,OAAOtN,GAEzB,CAMM,SAAU6N,EAAY7N,EAAc9B,GACxC,MAAMkM,EAAW+B,EAAeU,IAAI7M,GAChCoK,IACFA,EAASlM,GACTiO,EAAemB,OAAOtN,GAE1B,CAGsB,oBAAXa,SACRA,OAAeiN,OAAS,IAClBjN,OAAeiN,QAAU,GAC9BF,QACAC;;;;;;;;;OCtJyB,eAAzBE,QAAQC,IAAIC,SACdC,EAAAC,qCCMW,IAAIC,EAAEC,EAAiBC,EAAEC,OAAOC,IAAI,iBAAiBC,EAAEF,OAAOC,IAAI,kBAAkBE,EAAE9O,OAAO+O,UAAUC,eAAeC,EAAET,EAAEU,mDAAmDC,kBAAkBC,EAAE,CAACC,KAAI,EAAGC,KAAI,EAAGC,QAAO,EAAGC,UAAS,GAChP,SAASC,EAAEC,EAAE7G,EAAE8G,GAAG,IAAIzE,EAAE0E,EAAE,CAAA,EAAGpG,EAAE,KAAKqG,EAAE,KAAiF,IAAI3E,UAAhF,IAASyE,IAAInG,EAAE,GAAGmG,QAAG,IAAS9G,EAAEwG,MAAM7F,EAAE,GAAGX,EAAEwG,UAAK,IAASxG,EAAEyG,MAAMO,EAAEhH,EAAEyG,KAAczG,EAAEiG,EAAEgB,KAAKjH,EAAEqC,KAAKkE,EAAEJ,eAAe9D,KAAK0E,EAAE1E,GAAGrC,EAAEqC,IAAI,GAAGwE,GAAGA,EAAEK,aAAa,IAAI7E,KAAKrC,EAAE6G,EAAEK,kBAAe,IAASH,EAAE1E,KAAK0E,EAAE1E,GAAGrC,EAAEqC,IAAI,MAAM,CAAC8E,SAAStB,EAAEuB,KAAKP,EAAEL,IAAI7F,EAAE8F,IAAIO,EAAEK,MAAMN,EAAEO,OAAOlB,EAAElE,QAAQ,QAACqF,WAAiBvB,EAAEuB,EAAAC,IAAYZ,EAAEW,EAAAE,KAAab,IDPvVhB,GAEjBH,EAAAC,iBEO2B,eAAzBJ,QAAQC,IAAIC,UACd,WAGF,IAsFIkC,EAtFAC,EAAQ/B,EAMRgC,EAAqB9B,OAAOC,IAAI,iBAChC8B,EAAoB/B,OAAOC,IAAI,gBAC/B+B,EAAsBhC,OAAOC,IAAI,kBACjCgC,EAAyBjC,OAAOC,IAAI,qBACpCiC,EAAsBlC,OAAOC,IAAI,kBACjCkC,EAAsBnC,OAAOC,IAAI,kBACjCmC,EAAqBpC,OAAOC,IAAI,iBAChCoC,EAAyBrC,OAAOC,IAAI,qBACpCqC,EAAsBtC,OAAOC,IAAI,kBACjCsC,EAA2BvC,OAAOC,IAAI,uBACtCuC,EAAkBxC,OAAOC,IAAI,cAC7BwC,EAAkBzC,OAAOC,IAAI,cAC7ByC,EAAuB1C,OAAOC,IAAI,mBAClC0C,EAAwB3C,OAAO4C,SAgB/BC,EAAuBhB,EAAMtB,mDAEjC,SAASuC,EAAMC,GAGT,IAAK,IAAIC,EAAQC,UAAUjU,OAAQkU,EAAO,IAAIC,MAAMH,EAAQ,EAAIA,EAAQ,EAAI,GAAII,EAAQ,EAAGA,EAAQJ,EAAOI,IACxGF,EAAKE,EAAQ,GAAKH,UAAUG,IAQpC,SAAsBC,EAAON,EAAQG,GAIjC,IACII,EADyBT,EAAqBU,uBACfC,mBAErB,KAAVF,IACFP,GAAU,KACVG,EAAOA,EAAKO,OAAO,CAACH,KAItB,IAAII,EAAiBR,EAAKS,IAAI,SAAUC,GACtC,OAAOC,OAAOD,EACpB,GAEIF,EAAeI,QAAQ,YAAcf,GAIrCgB,SAAS3D,UAAU4D,MAAM7C,KAAK8C,QAAQZ,GAAQY,QAASP,EAE3D,CA5BMQ,CAAa,QAASnB,EAAQG,EAGpC,CAgFA,SAASiB,EAAe7C,GACtB,OAAOA,EAAK8C,aAAe,SAC7B,CAGA,SAASC,EAAyB/C,GAChC,GAAY,MAARA,EAEF,OAAO,KAST,GAL0B,iBAAbA,EAAKgD,KACdxB,EAAM,qHAIU,mBAATxB,EACT,OAAOA,EAAK8C,aAAe9C,EAAK7P,MAAQ,KAG1C,GAAoB,iBAAT6P,EACT,OAAOA,EAGT,OAAQA,GACN,KAAKU,EACH,MAAO,WAET,KAAKD,EACH,MAAO,SAET,KAAKG,EACH,MAAO,WAET,KAAKD,EACH,MAAO,aAET,KAAKK,EACH,MAAO,WAET,KAAKC,EACH,MAAO,eAIX,GAAoB,iBAATjB,EACT,OAAQA,EAAKD,UACX,KAAKe,EAEH,OAAO+B,EADO7C,GACmB,YAEnC,KAAKa,EAEH,OAAOgC,EADQ7C,EACgBiD,UAAY,YAE7C,KAAKlC,EACH,OArER,SAAwBmC,EAAWC,EAAWC,GAC5C,IAAIN,EAAcI,EAAUJ,YAE5B,GAAIA,EACF,OAAOA,EAGT,IAAIO,EAAeF,EAAUL,aAAeK,EAAUhT,MAAQ,GAC9D,MAAwB,KAAjBkT,EAAsBD,EAAc,IAAMC,EAAe,IAAMD,CACxE,CA4DeE,CAAetD,EAAMA,EAAKuD,OAAQ,cAE3C,KAAKrC,EACH,IAAIsC,EAAYxD,EAAK8C,aAAe,KAEpC,OAAkB,OAAdU,EACKA,EAGFT,EAAyB/C,EAAKA,OAAS,OAEhD,KAAKmB,EAED,IAAIsC,EAAgBzD,EAChB0D,EAAUD,EAAcE,SACxBC,EAAOH,EAAcI,MAEzB,IACE,OAAOd,EAAyBa,EAAKF,GACjD,CAAY,MAAO/Q,GACP,OAAO,IACnB,EAOE,OAAO,IACT,CA5HE2N,EAAyB5B,OAAOC,IAAI,0BA8HtC,IAOImF,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAbAC,EAAStU,OAAOsU,OAMhBC,EAAgB,EASpB,SAASC,IAAc,CAEvBA,EAAYC,oBAAqB,EA+EjC,IACIC,EADAC,EAAyBnD,EAAqBmD,uBAElD,SAASC,EAA8BxU,EAAMyU,EAAQC,GAEjD,QAAelU,IAAX8T,EAEF,IACE,MAAM1M,OACd,CAAQ,MAAOpF,GACP,IAAImS,EAAQnS,EAAEqP,MAAM+C,OAAOD,MAAM,gBACjCL,EAASK,GAASA,EAAM,IAAM,EACtC,CAII,MAAO,KAAOL,EAAStU,CAE3B,CACA,IACI6U,EADAC,GAAU,EAIRC,EAAqC,mBAAZC,QAAyBA,QAAUjJ,IAIlE,SAASkJ,EAA6BC,EAAIC,GAExC,IAAMD,GAAMJ,EACV,MAAO,GAIP,IAOEM,EAPEC,EAAQR,EAAoBhI,IAAIqI,GAEpC,QAAc1U,IAAV6U,EACF,OAAOA,EAKXP,GAAU,EACV,IAGIQ,EAHAC,EAA4B3N,MAAM4N,kBAEtC5N,MAAM4N,uBAAoBhV,EAIxB8U,EAAqBf,EAAuB5J,QAG5C4J,EAAuB5J,QAAU,KAjIrC,WAEI,GAAsB,IAAlBwJ,EAAqB,CAEvBR,EAAUnB,QAAQiD,IAClB7B,EAAWpB,QAAQkD,KACnB7B,EAAWrB,QAAQmD,KACnB7B,EAAYtB,QAAQnB,MACpB0C,EAAYvB,QAAQoD,MACpB5B,EAAqBxB,QAAQqD,eAC7B5B,EAAezB,QAAQsD,SAEvB,IAAIhG,EAAQ,CACViG,cAAc,EACdC,YAAY,EACZC,MAAO7B,EACP8B,UAAU,GAGZtW,OAAOuW,iBAAiB3D,QAAS,CAC/BkD,KAAM5F,EACN2F,IAAK3F,EACL6F,KAAM7F,EACNuB,MAAOvB,EACP8F,MAAO9F,EACP+F,eAAgB/F,EAChBgG,SAAUhG,GAGlB,CAEIqE,GAEJ,CAiGIiC,GAGF,IAEE,GAAIjB,EAAW,CAEb,IAAIkB,EAAO,WACT,MAAMzO,OACd,EAWM,GARAhI,OAAO0W,eAAeD,EAAK1H,UAAW,QAAS,CAC7CvB,IAAK,WAGH,MAAMxF,OAChB,IAG6B,iBAAZ2O,SAAwBA,QAAQpB,UAAW,CAGpD,IACEoB,QAAQpB,UAAUkB,EAAM,GAClC,CAAU,MAAO7T,GACP4S,EAAU5S,CACpB,CAEQ+T,QAAQpB,UAAUD,EAAI,GAAImB,EAClC,KAAa,CACL,IACEA,EAAK3G,MACf,CAAU,MAAOlN,GACP4S,EAAU5S,CACpB,CAEQ0S,EAAGxF,KAAK2G,EAAK1H,UACrB,CACA,KAAW,CACL,IACE,MAAM/G,OACd,CAAQ,MAAOpF,GACP4S,EAAU5S,CAClB,CAEM0S,GACN,CACA,CAAI,MAAOsB,GAEP,GAAIA,GAAUpB,GAAmC,iBAAjBoB,EAAO3E,MAAoB,CAQzD,IALA,IAAI4E,EAAcD,EAAO3E,MAAMvL,MAAM,MACjCoQ,EAAetB,EAAQvD,MAAMvL,MAAM,MACnCqQ,EAAIF,EAAYlZ,OAAS,EACzB+R,EAAIoH,EAAanZ,OAAS,EAEvBoZ,GAAK,GAAKrH,GAAK,GAAKmH,EAAYE,KAAOD,EAAapH,IAOzDA,IAGF,KAAOqH,GAAK,GAAKrH,GAAK,EAAGqH,IAAKrH,IAG5B,GAAImH,EAAYE,KAAOD,EAAapH,GAAI,CAMtC,GAAU,IAANqH,GAAiB,IAANrH,EACb,GAKE,GAJAqH,MACArH,EAGQ,GAAKmH,EAAYE,KAAOD,EAAapH,GAAI,CAE/C,IAAIsH,EAAS,KAAOH,EAAYE,GAAGE,QAAQ,WAAY,QAgBvD,OAXI3B,EAAGvC,aAAeiE,EAAOE,SAAS,iBACpCF,EAASA,EAAOC,QAAQ,cAAe3B,EAAGvC,cAIxB,mBAAPuC,GACTL,EAAoBzH,IAAI8H,EAAI0B,GAKzBA,CACvB,QACqBD,GAAK,GAAKrH,GAAK,GAG1B,KACV,CAEA,CACA,CAAG,QACCwF,GAAU,EAGRP,EAAuB5J,QAAU2K,EAlNvC,WAII,GAAsB,MAFtBnB,EAEyB,CAEvB,IAAIrE,EAAQ,CACViG,cAAc,EACdC,YAAY,EACZE,UAAU,GAGZtW,OAAOuW,iBAAiB3D,QAAS,CAC/BiD,IAAKvB,EAAO,CAAA,EAAIpE,EAAO,CACrBmG,MAAOtC,IAET+B,KAAMxB,EAAO,CAAA,EAAIpE,EAAO,CACtBmG,MAAOrC,IAET+B,KAAMzB,EAAO,CAAA,EAAIpE,EAAO,CACtBmG,MAAOpC,IAETxC,MAAO6C,EAAO,CAAA,EAAIpE,EAAO,CACvBmG,MAAOnC,IAET8B,MAAO1B,EAAO,CAAA,EAAIpE,EAAO,CACvBmG,MAAOlC,IAET8B,eAAgB3B,EAAO,CAAA,EAAIpE,EAAO,CAChCmG,MAAOjC,IAET8B,SAAU5B,EAAO,CAAA,EAAIpE,EAAO,CAC1BmG,MAAOhC,KAIjB,CAEQE,EAAgB,GAClB9C,EAAM,+EAGZ,CAyKM0F,GAGFnP,MAAM4N,kBAAoBD,CAC9B,CAGE,IAAIvV,EAAOkV,EAAKA,EAAGvC,aAAeuC,EAAGlV,KAAO,GACxCgX,EAAiBhX,EAAOwU,EAA8BxU,GAAQ,GAQlE,MALoB,mBAAPkV,GACTL,EAAoBzH,IAAI8H,EAAI8B,GAIzBA,CACT,CAYA,SAASC,EAAqCpH,EAAM4E,EAAQC,GAE1D,GAAY,MAAR7E,EACF,MAAO,GAGT,GAAoB,mBAATA,EAEP,OAAOoF,EAA6BpF,MAZpClB,EAY0DkB,EAZpClB,aACHA,EAAUuI,mBAFnC,IACMvI,EAgBJ,GAAoB,iBAATkB,EACT,OAAO2E,EAA8B3E,GAGvC,OAAQA,GACN,KAAKgB,EACH,OAAO2D,EAA8B,YAEvC,KAAK1D,EACH,OAAO0D,EAA8B,gBAGzC,GAAoB,iBAAT3E,EACT,OAAQA,EAAKD,UACX,KAAKgB,EACH,OApCGqE,EAoCmCpF,EAAKuD,QApCP,GAsCtC,KAAKrC,EAEH,OAAOkG,EAAqCpH,EAAKA,KAAM4E,EAAQC,GAEjE,KAAK1D,EAED,IAAIsC,EAAgBzD,EAChB0D,EAAUD,EAAcE,SACxBC,EAAOH,EAAcI,MAEzB,IAEE,OAAOuD,EAAqCxD,EAAKF,GAAUkB,EAAQC,EAC/E,CAAY,MAAOlS,GAAG,EAKpB,MAAO,EACT,CA7NEqS,EAAsB,IAAIE,EA+N5B,IAAInG,EAAiBhP,OAAO+O,UAAUC,eAElCuI,EAAqB,CAAA,EACrBrF,EAAyBV,EAAqBU,uBAElD,SAASsF,EAA8BrZ,GAEnC,GAAIA,EAAS,CACX,IAAIsZ,EAAQtZ,EAAQgS,OAChB8B,EAAQoF,EAAqClZ,EAAQ8R,KAAM9R,EAAQuZ,QAASD,EAAQA,EAAMxH,KAAO,MACrGiC,EAAuByF,mBAAmB1F,EAChD,MACMC,EAAuByF,mBAAmB,KAGhD,CAmDA,IAAIC,EAAc9F,MAAM+F,QAExB,SAASA,EAAQhP,GACf,OAAO+O,EAAY/O,EACrB,CAiCA,SAASiP,EAAmBzB,GAwB1B,MAAO,GAAKA,CACd,CACA,SAAS0B,EAAuB1B,GAE5B,GAvCJ,SAA2BA,GAEvB,IAEE,OADAyB,EAAmBzB,IACZ,CACb,CAAM,MAAO7M,GACP,OAAO,CACb,CAEA,CA8BQwO,CAAkB3B,GAGpB,OAFA5E,EAAM,kHAlDZ,SAAkB4E,GAKd,MAFuC,mBAAX1H,QAAyBA,OAAOsJ,aAC/B5B,EAAM1H,OAAOsJ,cAAgB5B,EAAMlZ,YAAYiD,MAAQ,QAGxF,CA2CoI8X,CAAS7B,IAEhIyB,EAAmBzB,EAGhC,CAEA,IAOI8B,EACAC,EARAjJ,EAAoBqC,EAAqBrC,kBACzCkJ,EAAiB,CACnBhJ,KAAK,EACLC,KAAK,EACLC,QAAQ,EACRC,UAAU,GAyKZ,SAAS8I,EAAOrI,EAAMsI,EAAQC,EAAU3D,EAAQ4D,GAE5C,IAAIC,EAEAxI,EAAQ,CAAA,EACRb,EAAM,KACNC,EAAM,KA6BV,IAAKoJ,UAtBY9X,IAAb4X,IAEAT,EAAuBS,GAGzBnJ,EAAM,GAAKmJ,GAnKjB,SAAqBD,GAEjB,GAAIvJ,EAAec,KAAKyI,EAAQ,OAAQ,CACtC,IAAII,EAAS3Y,OAAO4Y,yBAAyBL,EAAQ,OAAOtL,IAE5D,GAAI0L,GAAUA,EAAOE,eACnB,OAAO,CAEf,CAGE,YAAsBjY,IAAf2X,EAAOlJ,GAChB,CA0JQyJ,CAAYP,KAEZR,EAAuBQ,EAAOlJ,KAGhCA,EAAM,GAAKkJ,EAAOlJ,KAzLxB,SAAqBkJ,GAEjB,GAAIvJ,EAAec,KAAKyI,EAAQ,OAAQ,CACtC,IAAII,EAAS3Y,OAAO4Y,yBAAyBL,EAAQ,OAAOtL,IAE5D,GAAI0L,GAAUA,EAAOE,eACnB,OAAO,CAEf,CAGE,YAAsBjY,IAAf2X,EAAOjJ,GAChB,CAgLQyJ,CAAYR,KACdjJ,EAAMiJ,EAAOjJ,IAjKnB,SAA8CiJ,GAEhB,iBAAfA,EAAOjJ,KAAoBH,EAAkBpE,OAU5D,CAsJMiO,CAAqCT,IAItBA,EACXvJ,EAAec,KAAKyI,EAAQG,KAAcL,EAAerJ,eAAe0J,KAC1ExI,EAAMwI,GAAYH,EAAOG,IAK7B,GAAIzI,GAAQA,EAAKF,aAAc,CAC7B,IAAIA,EAAeE,EAAKF,aAExB,IAAK2I,KAAY3I,OACSnP,IAApBsP,EAAMwI,KACRxI,EAAMwI,GAAY3I,EAAa2I,GAGzC,CAEI,GAAIrJ,GAAOC,EAAK,CACd,IAAIyD,EAA8B,mBAAT9C,EAAsBA,EAAK8C,aAAe9C,EAAK7P,MAAQ,UAAY6P,EAExFZ,GA5KV,SAAoCa,EAAO6C,GAEvC,IAAIkG,EAAwB,WACrBd,IACHA,GAA6B,EAE7B1G,EAAM,4OAA4PsB,GAE1Q,EAEIkG,EAAsBJ,gBAAiB,EACvC7Y,OAAO0W,eAAexG,EAAO,MAAO,CAClCjD,IAAKgM,EACL9C,cAAc,GAGpB,CA6JQ+C,CAA2BhJ,EAAO6C,GAGhCzD,GA9JV,SAAoCY,EAAO6C,GAEvC,IAAIoG,EAAwB,WACrBf,IACHA,GAA6B,EAE7B3G,EAAM,4OAA4PsB,GAE1Q,EAEIoG,EAAsBN,gBAAiB,EACvC7Y,OAAO0W,eAAexG,EAAO,MAAO,CAClCjD,IAAKkM,EACLhD,cAAc,GAGpB,CA+IQiD,CAA2BlJ,EAAO6C,EAE1C,CAEI,OA5He,SAAU9C,EAAMZ,EAAKC,EAAKmJ,EAAM5D,EAAQ4C,EAAOvH,GAChE,IAAI/R,EAAU,CAEZ6R,SAAUS,EAEVR,KAAMA,EACNZ,IAAKA,EACLC,IAAKA,EACLY,MAAOA,EAEPC,OAAQsH,EAQRtZ,OAAiB,IAiCnB,OA5BE6B,OAAO0W,eAAevY,EAAQkb,OAAQ,YAAa,CACjDlD,cAAc,EACdC,YAAY,EACZE,UAAU,EACVD,OAAO,IAGTrW,OAAO0W,eAAevY,EAAS,QAAS,CACtCgY,cAAc,EACdC,YAAY,EACZE,UAAU,EACVD,MAAOoC,IAITzY,OAAO0W,eAAevY,EAAS,UAAW,CACxCgY,cAAc,EACdC,YAAY,EACZE,UAAU,EACVD,MAAOxB,IAGL7U,OAAOsZ,SACTtZ,OAAOsZ,OAAOnb,EAAQ+R,OACtBlQ,OAAOsZ,OAAOnb,IAIXA,CACT,CAwEWob,CAAatJ,EAAMZ,EAAKC,EAAKmJ,EAAM5D,EAAQ1F,EAAkBpE,QAASmF,EAEjF,CAEA,IAeIsJ,EAfAC,GAAsBjI,EAAqBrC,kBAC3CuK,GAA2BlI,EAAqBU,uBAEpD,SAASyH,GAAgCxb,GAErC,GAAIA,EAAS,CACX,IAAIsZ,EAAQtZ,EAAQgS,OAChB8B,EAAQoF,EAAqClZ,EAAQ8R,KAAM9R,EAAQuZ,QAASD,EAAQA,EAAMxH,KAAO,MACrGyJ,GAAyB/B,mBAAmB1F,EAClD,MACMyH,GAAyB/B,mBAAmB,KAGlD,CAgBA,SAASiC,GAAeC,GAEpB,MAAyB,iBAAXA,GAAkC,OAAXA,GAAmBA,EAAO7J,WAAaS,CAEhF,CAEA,SAASqJ,KAEL,GAAIL,GAAoB1O,QAAS,CAC/B,IAAI3K,EAAO4S,EAAyByG,GAAoB1O,QAAQkF,MAEhE,GAAI7P,EACF,MAAO,mCAAqCA,EAAO,IAE3D,CAEI,MAAO,EAEX,CA7BEoZ,GAAgC,EAiDlC,IAAIO,GAAwB,CAAA,EA8B5B,SAASC,GAAoB7b,EAAS8b,GAElC,GAAK9b,EAAQkb,SAAUlb,EAAQkb,OAAOa,WAA4B,MAAf/b,EAAQkR,IAA3D,CAIAlR,EAAQkb,OAAOa,WAAY,EAC3B,IAAIC,EAnCR,SAAsCF,GAElC,IAAInE,EAAOgE,KAEX,IAAKhE,EAAM,CACT,IAAIsE,EAAmC,iBAAfH,EAA0BA,EAAaA,EAAWlH,aAAekH,EAAW7Z,KAEhGga,IACFtE,EAAO,8CAAgDsE,EAAa,KAE5E,CAEI,OAAOtE,CAEX,CAqBoCuE,CAA6BJ,GAE7D,IAAIF,GAAsBI,GAA1B,CAIAJ,GAAsBI,IAA6B,EAInD,IAAIG,EAAa,GAEbnc,GAAWA,EAAQgS,QAAUhS,EAAQgS,SAAWsJ,GAAoB1O,UAEtEuP,EAAa,+BAAiCtH,EAAyB7U,EAAQgS,OAAOF,MAAQ,KAGhG0J,GAAgCxb,GAEhCsT,EAAM,4HAAkI0I,EAA2BG,GAEnKX,GAAgC,KAjBpC,CAPA,CA0BA,CAYA,SAASY,GAAkBC,EAAMP,GAE7B,GAAoB,iBAATO,EAIX,GAAI3C,EAAQ2C,GACV,IAAK,IAAIxb,EAAI,EAAGA,EAAIwb,EAAK7c,OAAQqB,IAAK,CACpC,IAAIyb,EAAQD,EAAKxb,GAEb4a,GAAea,IACjBT,GAAoBS,EAAOR,EAErC,MACW,GAAIL,GAAeY,GAEpBA,EAAKnB,SACPmB,EAAKnB,OAAOa,WAAY,QAErB,GAAIM,EAAM,CACf,IAAIE,EApjCV,SAAuBC,GACrB,GAAsB,OAAlBA,GAAmD,iBAAlBA,EACnC,OAAO,KAGT,IAAIC,EAAgBtJ,GAAyBqJ,EAAcrJ,IAA0BqJ,EAN5D,cAQzB,MAA6B,mBAAlBC,EACFA,EAGF,IACT,CAwiCuBC,CAAcL,GAE/B,GAA0B,mBAAfE,GAGLA,IAAeF,EAAKM,QAItB,IAHA,IACIpa,EADA6Q,EAAWmJ,EAAW5K,KAAK0K,KAGtB9Z,EAAO6Q,EAASzT,QAAQid,MAC3BnB,GAAelZ,EAAK2V,QACtB2D,GAAoBtZ,EAAK2V,MAAO4D,EAK9C,CAEA,CASA,SAASe,GAAkB7c,GAEvB,IAMI8c,EANAhL,EAAO9R,EAAQ8R,KAEnB,GAAIA,SAAuD,iBAATA,EAAlD,CAMA,GAAoB,mBAATA,EACTgL,EAAYhL,EAAKgL,cACZ,IAAoB,iBAAThL,GAAsBA,EAAKD,WAAagB,GAE1Df,EAAKD,WAAamB,EAGhB,OAFA8J,EAAYhL,EAAKgL,SAGvB,CAEI,GAAIA,EAAW,CAEb,IAAI7a,EAAO4S,EAAyB/C,IA5jB1C,SAAwBiL,EAAWC,EAAQC,EAAUC,EAAeld,GAGhE,IAAImd,EAAM5I,SAAS5C,KAAKxG,KAAK0F,GAE7B,IAAK,IAAIuM,KAAgBL,EACvB,GAAII,EAAIJ,EAAWK,GAAe,CAChC,IAAIC,OAAU,EAId,IAGE,GAAuC,mBAA5BN,EAAUK,GAA8B,CAEjD,IAAIE,EAAMzT,OAAOqT,GAAiB,eAAiB,KAAOD,EAAW,UAAYG,EAAjE,oGAA2LL,EAAUK,GAArM,mGAEhB,MADAE,EAAIrb,KAAO,sBACLqb,CAClB,CAEUD,EAAUN,EAAUK,GAAcJ,EAAQI,EAAcF,EAAeD,EAAU,KAAM,+CACjG,CAAU,MAAOM,GACPF,EAAUE,CACpB,EAEYF,GAAaA,aAAmBxT,QAClCwP,EAA8BrZ,GAE9BsT,EAAM,2RAAqT4J,GAAiB,cAAeD,EAAUG,SAAqBC,GAE1XhE,EAA8B,OAG5BgE,aAAmBxT,SAAWwT,EAAQG,WAAWpE,KAGnDA,EAAmBiE,EAAQG,UAAW,EACtCnE,EAA8BrZ,GAE9BsT,EAAM,qBAAsB2J,EAAUI,EAAQG,SAE9CnE,EAA8B,MAExC,CAGA,CA8gBMoE,CAAeX,EAAW9c,EAAQ+R,MAAO,OAAQ9P,EAAMjC,EAC7D,WAAkCyC,IAAnBqP,EAAK4L,WAA4BrC,IAC1CA,GAAgC,EAIhC/H,EAAM,sGAFMuB,EAAyB/C,IAEiF,YAGpF,mBAAzBA,EAAK6L,iBAAmC7L,EAAK6L,gBAAgBC,sBACtEtK,EAAM,6HA3BZ,CA8BA,CAkCA,IAAIuK,GAAwB,CAAA,EAC5B,SAASC,GAAkBhM,EAAMC,EAAOb,EAAK6M,EAAkBrH,EAAQ4D,GAEnE,IAAI0D,EAjlCR,SAA4BlM,GAC1B,MAAoB,iBAATA,GAAqC,mBAATA,GAKnCA,IAASU,GAAuBV,IAASY,GAA8CZ,IAASW,GAA0BX,IAASgB,GAAuBhB,IAASiB,GAAmDjB,IAASoB,GAI/M,iBAATpB,GAA8B,OAATA,IAC1BA,EAAKD,WAAaoB,GAAmBnB,EAAKD,WAAamB,GAAmBlB,EAAKD,WAAac,GAAuBb,EAAKD,WAAae,GAAsBd,EAAKD,WAAagB,GAIjLf,EAAKD,WAAaO,QAA+C3P,IAArBqP,EAAKmM,YAMrD,CA4jCoBC,CAAmBpM,GAGnC,IAAKkM,EAAW,CACd,IAcIG,EAdAxG,EAAO,SAEElV,IAATqP,GAAsC,iBAATA,GAA8B,OAATA,GAA8C,IAA7BjQ,OAAOC,KAAKgQ,GAAMtS,UACvFmY,GAAQ,oIAQRA,GAAQgE,KAKG,OAAT7J,EACFqM,EAAa,OACJzE,EAAQ5H,GACjBqM,EAAa,aACK1b,IAATqP,GAAsBA,EAAKD,WAAaS,GACjD6L,EAAa,KAAOtJ,EAAyB/C,EAAKA,OAAS,WAAa,MACxE6F,EAAO,sEAEPwG,SAAoBrM,EAGtBwB,EAAM,0IAAqJ6K,EAAYxG,EAC7K,CAEI,IAAI3X,EAAUma,EAAOrI,EAAMC,EAAOb,EAAKwF,EAAQ4D,GAG/C,GAAe,MAAXta,EACF,OAAOA,EAQT,GAAIge,EAAW,CACb,IAAII,EAAWrM,EAAMqM,SAErB,QAAiB3b,IAAb2b,EACF,GAAIL,EACF,GAAIrE,EAAQ0E,GAAW,CACrB,IAAK,IAAIvd,EAAI,EAAGA,EAAIud,EAAS5e,OAAQqB,IACnCub,GAAkBgC,EAASvd,GAAIiR,GAG7BjQ,OAAOsZ,QACTtZ,OAAOsZ,OAAOiD,EAE5B,MACY9K,EAAM,6JAGR8I,GAAkBgC,EAAUtM,EAGtC,CAGM,GAAIjB,EAAec,KAAKI,EAAO,OAAQ,CACrC,IAAImL,EAAgBrI,EAAyB/C,GACzChQ,EAAOD,OAAOC,KAAKiQ,GAAOtH,OAAO,SAAU8F,GAC7C,MAAa,QAANA,CACjB,GACY8N,EAAgBvc,EAAKtC,OAAS,EAAI,kBAAoBsC,EAAK6G,KAAK,WAAa,SAAW,iBAEvFkV,GAAsBX,EAAgBmB,KAGzC/K,EAAM,kOAA4P+K,EAAenB,EAF9Ppb,EAAKtC,OAAS,EAAI,IAAMsC,EAAK6G,KAAK,WAAa,SAAW,KAEiOuU,GAE9SW,GAAsBX,EAAgBmB,IAAiB,EAEjE,CASI,OANIvM,IAASU,EApHjB,SAA+B8L,GAI3B,IAFA,IAAIxc,EAAOD,OAAOC,KAAKwc,EAASvM,OAEvBlR,EAAI,EAAGA,EAAIiB,EAAKtC,OAAQqB,IAAK,CACpC,IAAIqQ,EAAMpP,EAAKjB,GAEf,GAAY,aAARqQ,GAA8B,QAARA,EAAe,CACvCsK,GAAgC8C,GAEhChL,EAAM,2GAAiHpC,GAEvHsK,GAAgC,MAChC,KACR,CACA,CAEyB,OAAjB8C,EAASnN,MACXqK,GAAgC8C,GAEhChL,EAAM,yDAENkI,GAAgC,MAGtC,CA4FM+C,CAAsBve,GAEtB6c,GAAkB7c,GAGbA,CAEX,CAgBA,IAAIkS,GANJ,SAAkCJ,EAAMC,EAAOb,GAE3C,OAAO4M,GAAkBhM,EAAMC,EAAOb,GAAK,EAE/C,EAKIiB,GAdJ,SAAiCL,EAAMC,EAAOb,GAE1C,OAAO4M,GAAkBhM,EAAMC,EAAOb,GAAK,EAE/C,EAYAsN,EAAAC,SAAmBjM,EACnBgM,EAAAtM,IAAcA,GACdsM,EAAArM,KAAeA,EACZ,CAtyCD,uBCYF,MAAMuM,EAAgBC,EAAAA,mBAA6Clc,GA0EtDmc,EAAY,KACvB,MAAMC,EAAUC,EAAAA,WAAWJ,GAC3B,IAAKG,EACH,MAAM,IAAIhV,MAAM,kDAElB,OAAOgV,GC7EH9O,EAAS,CACb1B,OACAwB,QACAC,cACAlH,QACA7I,WACAmF,UACAnG,SAOoB,oBAAX+D,SACRA,OAAeiN,OAASA,+CCZkB,EAC3C9N,OACAqM,WACAyQ,cAAa,EACbC,SACAC,UACA3X,WACAnB,QACA+Y,cAAa,MAEb,MAAMC,UAAEA,EAASC,SAAEA,EAAQC,YAAEA,GAAgBT,KACtCU,EAAOC,GAAYC,cACnBC,EAASC,GAAcF,EAAAA,UAAS,IAChClM,EAAOqM,GAAYH,EAAAA,SAAuB,MAC3CI,EAAaC,EAAAA,QAAO,GA2E1B,OAzEAC,EAAAA,UAAU,KAER,IAAIC,EADJH,EAAWhT,SAAU,EAyDrB,MAtDkB9C,WAChB,IAiBE,GAhBA4V,GAAW,GACXC,EAAS,MAGTI,EAAeX,EAASnd,GAEnB8d,EAMMhB,SACHgB,EAAaxZ,OALnBwZ,QAAqBZ,EAAUld,EAAM,CACnCqM,WACA/H,KAAMwY,KAMLa,EAAWhT,QAAS,OAEzB2S,EAASQ,GAGLzY,GAAYyY,SACRA,EAAa/V,OAAO1C,EAAS7C,EAAG6C,EAAS5C,EAAG,GAIhDyB,GAAS4Z,SACLA,EAAa5Z,MAAMA,EAAO+Y,GAI9BF,GAAUe,GACZf,EAAOe,EAEX,CAAE,MAAOzC,GACP,IAAKsC,EAAWhT,QAAS,OAEzB,MAAM0G,EAAQgK,EACdqC,EAASrM,GAEL2L,GACFA,EAAQ3L,EAEZ,SACMsM,EAAWhT,SACb8S,GAAW,EAEf,GAGFM,GAEO,KACLJ,EAAWhT,SAAU,IAItB,CAAC3K,EAAMqM,EAAUyQ,IAGpBe,EAAAA,UAAU,KACJR,GAASnZ,GACXmZ,EAAMnZ,MAAMA,EAAO+Y,IAEpB,CAAC/Y,EAAO+Y,IAGJ,uBFzFoD,EAAGd,WAAU6B,sBACxE,MAAOC,EAAQC,GAAaX,EAAAA,SAA6B,IAAIxR,KA6C7D8R,EAAAA,UAAU,IACD,KACLI,EAAOE,QAAQd,GAASA,EAAMta,YAE/B,IAEH,MAAMkT,EAA2B,CAC/BgI,SACAf,UAnDgBrV,MAAO7H,EAAc4G,KAErC,MAAMgG,EAAWqR,EAAOpR,IAAI7M,GAC5B,GAAI4M,EAAU,OAAOA,EAErB,IAEE,MAAMyQ,QAAcjR,EAAKpM,EAAM,CAC7BqM,SAAUzF,GAASyF,UAAY2R,IAWjC,OAPAE,EAAUE,GAAQ,IAAIrS,IAAIqS,GAAMhR,IAAIpN,EAAMqd,KAGpB,IAAlBzW,GAAStC,YACL+Y,EAAM/Y,OAGP+Y,CACT,CAAE,MAAOhM,GAEP,MADAmB,QAAQnB,MAAM,wBAAwBrR,KAASqR,GACzCA,CACR,GA6BA+L,YA1BmBpd,IACnB,MAAMqd,EAAQY,EAAOpR,IAAI7M,GACrBqd,IACFA,EAAMta,UACNmb,EAAUE,IACR,MAAM1gB,EAAO,IAAIqO,IAAIqS,GAErB,OADA1gB,EAAK4P,OAAOtN,GACLtC,MAoBXyf,SAfgBnd,GACTie,EAAOpR,IAAI7M,IAiBpB,OACEqe,EAAAA,IAAC5B,EAAc6B,SAAQ,CAACrI,MAAOA,EAAKkG,SACjCA,yEEkCkBnc,IAOvB,MAAMkd,UAAEA,EAASC,SAAEA,EAAQC,YAAEA,GAAgBT,KACtCU,EAAOC,GAAYC,EAAAA,SAA4B,IAAMJ,EAASnd,KAC9Dwd,EAASC,GAAcF,EAAAA,UAAS,IAChClM,EAAOqM,GAAYH,EAAAA,SAAuB,MA4BjD,OARAM,EAAAA,UAAU,KAER,MAAMC,EAAeX,EAASnd,GAC1B8d,IAAiBT,GACnBC,EAASQ,IAEV,CAAC9d,IAEG,CACLqd,QACAG,UACAnM,QACAjF,KA9BWvE,UACX,IACE4V,GAAW,GACXC,EAAS,MACT,MAAMa,QAAoBrB,EAAUld,GACpCsd,EAASiB,EACX,CAAE,MAAOlD,GACPqC,EAASrC,EACX,SACEoC,GAAW,EACb,GAqBAe,OAlBa,KACbpB,EAAYpd,GACZsd,OAAS9c","x_google_ignoreList":[5,6,7]}